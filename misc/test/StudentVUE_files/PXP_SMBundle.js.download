/*! For license information please see PXP_SMBundle.js.LICENSE.txt */
(()=>{var e={7883:e=>{e.exports='<div class="st-modal modal sm-app" tabindex="-1" role="dialog" data-bind="attr: { id: id }">\r\n    <div class="compose-dialog modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title"></h2>\r\n            </div>\r\n            <div class="modal-header mobile-only" style="margin-top: 0; text-align: right;">\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="text: (showAdvanced() ? \'Hide Advanced\' : \'Show Advanced\'), visible: SM.isTeacher && SM.enableShowAdvanced && SM.useNewTVUECommunication, click: toggleAdvanced"></button>\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="click: newContactGroup, text: SM.translation.newContactGroup, visible: selectedTab()?.id === RecipientList.ContactGroups && SM.userType === UserType.Staff && SM.allowEmailAtFocus()"></button>\r\n                <button id="cancelAddRecipients" type="button" class="btn btn-default" data-bind="click: cancel, text: SM.translation.cancel"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.ok"></button>\r\n            </div>\r\n            <div class="modal-body" style="padding-bottom: 0 !important;">\r\n                <div id="composeRecipients" class="form-control recipient-box-large margin-bottom">\r\n                    <span data-bind="foreach: recipients">\r\n                        <sm-recipient-box class="recipient" params="options: { recipient: $data, onRemove: $parent.removeRecipient.bind($parent), readOnly: false, isSender: true , onRecipientCountClick: $parent.showResolvedRecipientList.bind($parent), recipientBadgeType: RecipientBoxBadgeType.ResolvedRecipientCount}"></sm-recipient-box>\r\n                    </span>\r\n                    <sm-recipient-box params="options: { recipient: dummyRecipient, readOnly: false }" data-bind="attr: { id: \'toDummy\' + id }" class="hidden"></sm-recipient-box>\r\n                    <sm-recipient-box id="animationBox" params="options: animationBoxOptions" class="hidden"></sm-recipient-box>\r\n                    <div data-bind="css: { \'invisible\': recipients().length > 0 }"><span class="select-recipient-text" data-bind="text: \'<\' + SM.translation.selectFromList() + \'>\'"></span></div>\r\n                    <button data-bind="visible: showPasteStudentIds, click: pasteStudentIds, smTooltip: { title: \'Paste Student IDs\', placement: \'left\' }" class="btn btn-secondary">\r\n                        <span class="far fa-clipboard"></span>\r\n                    </button>\r\n                </div>\r\n                <div id="recipientTabs" data-bind="dxTabs: recipientTabOptions" class="desktop-only"></div>\r\n                <div data-bind="dxSelectBox: selectTabOptions" class="mobile-only" ></div>\r\n                <div class="row no-edge-padding row-no-gutters margin-top" data-bind="visible: (SM.userType === UserType.Staff && selectedTab()?.id !== RecipientList.UserGroups && (SM.staffRecipientAccess === StaffRecipientAccess.District || SM.allowEmailAtFocus())) || (SM.userType !== UserType.Staff && selectedTab()?.id === RecipientList.Staff) || selectedTab()?.id === RecipientList.StudentGroups || (SM.userType === UserType.Student && selectedTab()?.id === RecipientList.Students && SM.studentRecipientAccess !== StudentRecipientAccess.SchoolStaff)">\r\n                    <div class="col-12 flexbox horizontal" style="gap: 1.0rem;">\r\n                            <div data-bind="visible: SM.userType !== UserType.Staff || (SM.userType === UserType.Staff && SM.staffRecipientAccess === StaffRecipientAccess.District)" class="col-md-4">\r\n                                <div data-bind="dxSelectBox: selectOrganizationOptions"></div>\r\n                            </div>\r\n                            <div data-bind="visible: selectedTab()?.id === RecipientList.ContactGroups && SM.userType === UserType.Staff">\r\n                                <div data-bind="dxRadioGroup: contactGroupScopeOptions"></div>\r\n                            </div>\r\n                            <div data-bind="visible: (selectedTab()?.id === RecipientList.Parents || selectedTab()?.id === RecipientList.Students) && SM.isTeacher" class="col-md-8 flexbox horizontal">\r\n                                <div data-bind="dxRadioGroup: teacherGroupScopeOptions" class="col-md-4" style="margin-top: auto; margin-bottom: auto;"></div>\r\n                                <div data-bind="dxSelectBox: selectSectionOptions, visible: teacherGroupScope() === 0" class="col-md-8"></div>\r\n                                <div data-bind="dxSelectBox: selectStudentGroupOptions, visible: teacherGroupScope() === 1" class="col-md-8"></div>\r\n                            </div>\r\n                            <div data-bind="visible: selectedTab()?.id === RecipientList.Classes && SM.isTeacher && SM.teacherStudentAccess === TeacherStudentAccess.All">\r\n                                <div data-bind="dxRadioGroup: classScopeOptions"></div>\r\n                            </div>\r\n                            <div data-bind="visible: selectedTab()?.id === RecipientList.MassStudentGroups && SM.isTeacher && SM.teacherStudentAccess === TeacherStudentAccess.All">\r\n                                <div data-bind="dxRadioGroup: massStudentGroupScopeOptions"></div>\r\n                            </div>\r\n                    </div>\r\n                </div>\r\n                                                \r\n                <sm-recipient-search params="options: staffSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Staff"></sm-recipient-search>\r\n                <sm-recipient-search params="options: parentSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Parents"></sm-recipient-search>\r\n                <sm-recipient-search params="options: studentSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Students"></sm-recipient-search>\r\n                <sm-recipient-search params="options: classSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Classes"></sm-recipient-search>\r\n                <sm-recipient-search params="options: teacherSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Teachers"></sm-recipient-search>\r\n                <sm-recipient-search params="options: counselorSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Counselors"></sm-recipient-search>\r\n                <sm-recipient-search params="options: studentGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.StudentGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: massStudentGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.MassStudentGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: userGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.UserGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: massEmailSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.MassEmail"></sm-recipient-search>\r\n                <sm-recipient-search params="options: contactGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.ContactGroups"></sm-recipient-search>\r\n            </div>\r\n            <div class="modal-footer desktop-only" style="margin-top: 0;">\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="text: (showAdvanced() ? \'Hide Advanced\' : \'Show Advanced\'), visible: SM.isTeacher && SM.enableShowAdvanced && SM.useNewTVUECommunication, click: toggleAdvanced"></button>\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="click: newContactGroup, text: SM.translation.newContactGroup, visible: selectedTab()?.id === RecipientList.ContactGroups && SM.userType === UserType.Staff && SM.allowEmailAtFocus()"></button>\r\n                <button id="cancelAddRecipients" type="button" class="btn btn-default" data-bind="click: cancel, text: SM.translation.cancel"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.ok"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},8520:e=>{e.exports='<div class="audio-player">\r\n    <span data-bind="click: handlePlayPauseClick"><i data-bind="attr:{class: playPauseIconClass}"></i></span>\r\n    <input class="amountPlayed" type="range" data-bind="value: audioPlayerCurrentAmount, event: {change: handleAmountPlayedChange}" />\r\n    <span class="amountPlayedTime" data-bind="text: audioPlayerCurrentTimeAndDuration"></span>\r\n    <span><i class="fa-solid fa-volume fa-3x"></i></span>\r\n    <input class="volume" type="range" data-bind="value: audioVolume, valueUpdate: \'input\'"/>\r\n</div>'},9:e=>{e.exports='<div class="audio-recorder">\r\n    <div class="audio-controls">\r\n        <span data-bind="click: handleRecordStartStop"><i style="color: red"data-bind="attr:{class: recordingStartStopIconClass}"></i></span>\r\n        <span class="duration" data-bind="text: mediaRecorderDuration"></span>\r\n    </div>\r\n    <div class="audio-player" data-bind="visible: audioSrc">\r\n        <span data-bind="click: handlePlayPauseClick"><i data-bind="attr:{class: playPauseIconClass}"></i></span>\r\n        <input class="amountPlayed" type="range" data-bind="value: audioPlayerCurrentAmount, event: {change: handleAmountPlayedChange}" />\r\n        <span class="amountPlayedTime" data-bind="text: audioPlayerCurrentTimeAndDuration"></span>\r\n        <span><i class="fa-solid fa-volume fa-3x"></i></span>\r\n        <input class="volume" type="range" data-bind="value: audioVolume, valueUpdate: \'input\'"/>\r\n    </div>\r\n</div>'},605:e=>{e.exports='\x3c!-- This max-height 800px is not my favorite solution in the world, but it does trigger the audit admin page to overflow appropriately --\x3e\r\n<div class="form-horizontal padding-lg" style="max-height: 800px">\r\n    <sm-recipient-list-edit params="options: toRecipientListOptions"></sm-recipient-list-edit>\r\n\r\n    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n        <div class="col-sm-12 col-md-1">\r\n            <label class="control-label">Messages</label>\r\n        </div>\r\n        <div class="col-md-11">\r\n            <div data-bind="dxSelectBox: messageRelationshipOptions"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n        <div class="col-sm-12 col-md-1">\r\n            <label class="col-md-1 control-label">Keywords</label>\r\n        </div>\r\n        <div class="col-md-11">\r\n            <input type="text" class="form-control" style="width: 100%;" data-bind="value: keywords" />\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n        <div class="col-sm-12 col-md-1">\r\n            <label class="col-md-1 control-label">Search</label>\r\n        </div>\r\n        <div class="col-md-11" style="display: flex; gap: .5rem; align-items: center;">\r\n            <span data-bind="dxCheckBox: { value: searchSubject }"></span> <span class="margin-right">Subject</span>\r\n            <span data-bind="dxCheckBox: { value: searchBody }"></span> <span class="margin-right">Body</span>\r\n            <span data-bind="dxCheckBox: { value: searchSMSText }, visible: SM.isSynergyMessageEnabled"></span> <span class="margin-right" data-bind="visible: SM.isSynergyMessageEnabled">SMS Text</span>\r\n            <span data-bind="dxCheckBox: { value: searchVoiceText }, visible: SM.isSynergyMessageEnabled"></span> <span class="margin-right" data-bind="visible: SM.isSynergyMessageEnabled">Voice Text</span>\r\n            <span data-bind="dxCheckBox: { value: searchAttachmentNames }"></span> <span class="margin-right">Attachment Names</span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n        <div class="col-sm-12 col-md-1">\r\n            <label class="col-md-1 control-label">From</label>\r\n        </div>\r\n        <div class="col-md-11">\r\n            <div class="form-inline">\r\n                <div class="form-group">\r\n                    <div class="col-md-12">\r\n                        <div class="margin-right" data-bind="dxDateBox: fromDateOptions, dxValidator: requiredFieldValidator"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-md-1 control-label margin-right">To</label>\r\n                    <div class="col-md-10">\r\n                        <div data-bind="dxDateBox: toDateOptions, dxValidator: requiredFieldValidator"></div>\r\n                    </div>\r\n                </div>\r\n                <button type="button" class="btn btn-primary" data-bind="click: search, visible: renderGrid">Search</button>\r\n                <button type="button" class="btn btn-default" data-bind="click: print, visible: renderGrid">Print</button>\r\n                <button type="button" class="btn btn-default" data-bind="click: createRetentionSet, visible: renderGrid">Create Retention Set</button>\r\n                <span data-bind="visible: limitResults" class="results-limited">Note: Results have been limited to 1,000 emails.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div data-bind="dxDataGrid: messageGridOptions, visible: renderGrid" class="margin-top"></div>'},867:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="composeDialog" data-bind="attr: { \'aria-label\': titleText }">\r\n    <div id="composeDialogDrag" role="document" data-bind="css: { \'modal-dialog compose-dialog\': windowSize() === 0, \'compose-dialog-maximized\': windowSize() === 1 }">\r\n        <div data-bind="css: { \'modal-content\': windowSize() === 0, \'modal-content-maximized\': windowSize() === 1 }">\r\n            <div class="modal-header">\r\n                <span class="button fa fa-times" data-bind="click: close"></span>\r\n                <span class="button fa" data-bind="click: toggleWindowSize, css: { \'fa-window-maximize\': windowSize() === 0, \'fa-window-restore\': windowSize() === 1 }"></span>\r\n                <h2 class="modal-title">\r\n                    <span data-bind="text: titleText"></span>\r\n                </h2>\r\n            </div>\r\n            <sm-editor params="options: editorOptions"></sm-editor>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},5204:e=>{e.exports='<div class="chat" data-bind="with: conversation, style: {height: isPXP ? \'calc(100vh - 210px)\' : isTXP ? \'calc(100vh - 150px)\' :\'100%\'}">\r\n    <div class="chat-header">\r\n        <div class="chat-photo">\r\n            <span data-bind="visible: photoURL() === null || photoURL() === \'\', text: initials"></span>\r\n            <img data-bind="visible: photoURL() !== null && photoURL() !== \'\', attr: { src: photoURL }" />\r\n        </div>\r\n        <div data-bind="text: displayName"></div>\r\n    </div>\r\n    <div id="messages-list" class="messages" data-bind="event: {scroll: $parent.handleScroll.bind($parent)}">\r\n        \r\n        <div class="messages-container" data-bind="foreach: messages()">\r\n            <div class="message-row" data-bind="class: cssClass">\r\n                <div class="chat-photo" data-bind="visible: !isSender()">\r\n                    <span data-bind="visible: $parent.photoURL() === null || $parent.photoURL() === \'\', text: $parent.initials"></span>\r\n                    <img data-bind="visible: $parent.photoURL() !== null && $parent.photoURL() !== \'\', attr: { src: $parent.photoURL() }" />\r\n                </div>      \r\n                <div class="message-details">\r\n                    <div class="message-metadata">\r\n                        <div class="message-time" data-bind="text: sendDateTime()"></div>\r\n                        <div class="message-status" data-bind="visible: isSender()">\r\n                            <i class="fa-duotone fa-check-double" data-bind="attr:{style: statusStyle()}, smTooltip:{title: statusTooltip(), html:true}"></i>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class="message-line">\r\n                        <div class="message-text">\r\n                            <span data-bind="text: smsMessage()"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="loading-container" data-bind="visible: loadingMessages">\r\n            <i class="fa-solid fa-spinner fa-xl fa-spin-pulse"></i>\r\n        </div>\r\n        \r\n    </div>\r\n    \r\n    <div class="message-input">\r\n        <input class="form-control" data-bind="value: $parent.newMessageText, valueUpdate: \'input\', event: { keydown: $parent.checkForSubmit.bind($parent) }">\r\n        <button class="btn btn-success" data-bind="click: $parent.sendMessage.bind($parent)">Send</button>\r\n    </div>\r\n</div>'},5733:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" data-bind="attr: { id: dialogId }">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="html: title"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <div data-bind="visible: type() === SMDialogType.Message, html: message"></div>\r\n                    <div class="form-group" data-bind="visible: type() === SMDialogType.Input, css: { \'has-error\': !formValid() }">\r\n                        <label for="input" data-bind="html: message"></label>\r\n                        <input id="input" type="text" class="form-control" data-bind="textInput: input, hasFocus: inputHasFocus, event: { focus:inputFocused }" />\r\n                        <span class="help-block" data-bind="visible: !formValid(), html: validationMessage"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer" style="text-align: left;">\r\n                <div class="pull-right" data-bind="foreach: rightButtons">\r\n                    <button type="button" class="btn btn-default" data-bind="attr: { class: $data.css === undefined ? \'btn\' : css }, click: $parent.buttonPressed.bind($parent, value), text: label"></button>\r\n                </div>\r\n                <div data-bind="foreach: leftButtons">\r\n                    <button type="button" class="btn btn-default" data-bind="attr: { class: $data.css === undefined ? \'btn\' : css }, click: $parent.buttonPressed.bind($parent, value), text: label"></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},7319:e=>{e.exports='<div class="st-modal modal sm-app" tabindex="-1" role="dialog" id="editContactGroupDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title()"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <label for="name" data-bind="text: SM.translation.name()"></label>\r\n                    <input id="name" type="text" class="form-control" data-bind="textInput: contactGroup().name, hasFocus: nameHasFocus, event: { focus: nameFocused }" />\r\n                    <span class="help-block" data-bind="visible: !nameValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="description" data-bind="text: SM.translation.description()"></label>\r\n                    <input id="description" type="text" class="form-control" data-bind="textInput: contactGroup().description" />\r\n                    <span class="help-block" data-bind="visible: !descriptionValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                </div>\r\n                <div class="form-group" data-bind="visible: SM.contactListSecurity === ContactListSecurity.PublicSchool || SM.contactListSecurity === ContactListSecurity.PublicDistrict">\r\n                    <div class="row no-edge-padding">\r\n                        <div class="col-md-1">\r\n                            <label data-bind="text: SM.translation.public()"></label>\r\n                        </div>\r\n                        <div class="col-md-11">\r\n                            <span id="public" data-bind="dxCheckBox: { value: contactGroup().isPublic }"></span>\r\n                            <div data-bind="dxTooltip: { target: \'#public\', showEvent: \'mouseenter\', hideEvent: \'mouseleave\', position: \'right\' }">Visible to other staff</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" data-bind="visible: contactGroup().isPublic() && SM.contactListSecurity === ContactListSecurity.PublicDistrict">\r\n                    <label data-bind="text: SM.translation.school()"></label>\r\n                    <div data-bind="dxSelectBox: selectOrganizationOptions"></div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <sm-recipient-list-edit class="row" params="options: recipientListOptions"></sm-recipient-list-edit>\r\n                    <span class="help-block" data-bind="visible: formError, text: formError"></span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2509:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editFolderDialog">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group" data-bind="css: { \'has-error\': !formValid() || formError() }">\r\n                    <label for="folderName" data-bind="text: SM.translation.enterFolderName()"></label>\r\n                    <input id="folderName" type="text" maxlength="20" class="form-control" data-bind="textInput: folder().name, hasFocus: folderNameHasFocus, event: { focus: folderNameFocused }" />\r\n                    <span class="help-block" data-bind="visible: !formValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                    <span class="help-block" data-bind="visible: formError, text: formError"></span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},7935:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editSignatureDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: SM.translation.editSignatures"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <label data-bind="text: SM.translation.newMessages"></label>\r\n                    <p><textarea id="newSignature"></textarea></p>                    \r\n                </div>\r\n                <div class="form-group">\r\n                    <label data-bind="text: SM.translation.repliesForwards"></label>\r\n                    <p><textarea id="repliesSignature"></textarea></p>                    \r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},6224:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editTemplateDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Edit Template</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group" data-bind="css: { \'has-error\': !formValid() }">\r\n                    <label for="templateName">Enter template name</label>\r\n                    <input id="templateName" type="text" class="form-control" data-bind="textInput: template().name, hasFocus: templateNameHasFocus, event: { focus: templateNameFocused }"\r\n                    />\r\n                    <span class="help-block" data-bind="visible: !formValid()">Enter valid template name</span>\r\n                </div>\r\n                <div class="form-group">\r\n                    <textarea id="template"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save">Save</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},3298:(e,t,i)=>{var n=i(7091)(i(1334)),a='<div data-bind="if: composeOptions, childrenComplete: onChildrenComplete.bind($component)">\r\n    <div class="modal-header clearfix" style="text-align: left;" role="region" data-bind="attr: { \'aria-label\': SM.translation.actions }">\r\n        <span data-bind="visible: allowSend() && !composeOptions().isEditingTemplate">\r\n            <button type="button" class="btn btn-success" data-bind="click: send, text: sendText, visible: !allowScheduleSend"></button>\r\n            <div class="btn-group" data-bind="visible: allowScheduleSend">\r\n                <button type="button" class="btn btn-success" data-bind="click: send, text: sendText"></button>\r\n                <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only">Toggle Dropdown</span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" data-bind="click: openScheduleSend">Schedule Send</a></li>\r\n                </ul>\r\n            </div>\r\n            <a href="TS_Messages.aspx?folderType=1" class="btn btn-default" data-bind="visible: isTVUECommunication, text: SM.translation.sent"></a>\r\n            <a href="TS_Messages.aspx?folderType=2" class="btn btn-default" data-bind="visible: isTVUECommunication, text: SM.translation.drafts"></a>\r\n            <a href="TS_Messages.aspx?folderType=4" class="btn btn-default" data-bind="visible: isTVUECommunication, text: SM.translation.outbox"></a>\r\n            <button type="button" class="btn btn-warning" data-bind="click: close, text: SM.translation.close(), visible: !isEmbedded()"></button>\r\n        </span>\r\n        <span data-bind="visible: composeOptions().isEditingTemplate">\r\n            <button type="button" class="btn btn-success" data-bind="click: close">Save Template</button>\r\n            <button type="button" class="btn btn-warning" data-bind="click: close">Close</button>\r\n        </span>\r\n        <button type="button" class="btn btn-primary pull-right" data-bind="visible: allowAttachments, click: addAttachment, text: SM.translation.addAttachment(), disable: isUploadingAttachment"></button>\r\n        <span class="recipient-count-text pull-right" data-bind="text: recipientCountText, visible: showRecipientCount && allowSend()"></span>\r\n        \r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n\r\n            <div data-bind="dxTabs: communicationTabOptions, visible: (allowSMS() && SM.smsTabVisible) || (allowVoice() && SM.voiceTabVisible)" style="margin-bottom: 2rem;"></div>\r\n\r\n            <div data-bind="visible: message().isMeeting">\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n                    <div class="col-sm-12 col-md-1">\r\n                        <label id="topicLabel" class="col-md-1 control-label" data-bind="text: SM.translation.topic()"></label>\r\n                    </div>\r\n                    <div class="col-sm-12 col-md-11">\r\n                        <input id="composeTopic" type="text" class="form-control" style="width: 100%;" data-bind="textInput: message().subject, hasFocus: topicHasFocus" aria-labelledby="topicLabel" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div data-bind="visible: message().isMeeting()">\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom" style="padding: 0;">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label id="meetingLabel" class="control-label" data-bind="text: SM.translation.meeting()"></label>\r\n                        </div>\r\n                        <div class="flexbox horizontal col-sm-12 col-md-11">\r\n                            <button data-bind="click: setMeetingStartTimeNow, text: SM.translation.now()" class="btn btn-primary" style="border-radius: 4px 0 0 4px;"></button>\r\n                            <div data-bind="dxDateBox: meetingDateOptions" style="border-radius: 0; min-width: 145px;"></div>\r\n                            <div data-bind="dxDateBox: meetingStartTimeOptions" style="border-radius: 0 4px 4px 0; min-width: 130px;"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom" style="padding: 0;">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label id="durationLabel" class="control-label" data-bind="text: SM.translation.duration()"></label>\r\n                        </div>\r\n                        <div class="flexbox horizontal col-sm-12 col-md-11">\r\n                            <div class="flexbox horizontal height-fix" style="min-width: 105px;">\r\n                                <div data-bind="dxSelectBox: hourOptions" style="border-radius: 4px 0 0 4px;"></div>\r\n                            </div>\r\n                            <div class="flexbox horizontal height-fix" style="min-width: 115px;">\r\n                                <div data-bind="dxSelectBox: minuteOptions" style="border-radius: 0 4px 4px 0;"></div>\r\n                            </div>\r\n                            <div class="flexbox height-fix" style="margin-left: 15px;">\r\n                                <button data-bind="click: editRecurrence, text: \'Recurrence\', css: { \'btn-primary\': message().recurrence() }" class="btn btn-default">Recurrence</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: message().isMeeting() && message().recurrence()">\r\n                    <div class="col-sm-12 col-md-1">\r\n                        <label id="meetingLabel" class="control-label">Recurrence</label>\r\n                    </div>\r\n                    <div class="form-control-static col-sm-12 col-md-11">\r\n                        <span data-bind="text: recurrenceText"></span>\r\n                        -\r\n                        <a href="#" data-bind="click: removeRecurrence">Remove</a>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr />\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id !== CommunicationType.Social">\r\n                <div data-bind="visible: !composeOptions().isEditingTemplate">\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: composeOptions().isUrgent">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label class="control-label">Focus</label>\r\n                        </div>\r\n                        <div class="col-sm-12 col-md-11">\r\n                            <div class="form-control-static" data-bind="text: focusedOrganization()"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="clearfix col-md-12" data-bind="visible: !composeOptions().isUrgent">\r\n                        <div class="pull-right">\r\n                            <a href="#" data-bind="click: showTo, visible: showToVisible, text: SM.translation.to()"></a>\r\n                            <a href="#" data-bind="click: showCc, visible: showCcVisible, text: SM.translation.cc()"></a>\r\n                            <a href="#" data-bind="click: showBcc, visible: showBccVisible() && SM.showBCC, text: SM.translation.bcc()"></a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: SM.userType === UserType.Staff">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label id="fromLabel" class="control-label" data-bind="text: SM.translation.from()"></label>\r\n                        </div>\r\n                        <div class="col-sm-12 col-md-11 flexbox horizontal height-fix">\r\n                            <div aria-labelledby="fromLabel" style="width: 100%;" data-bind="dxSelectBox: fromSettings"></div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    \r\n                    <div data-bind="visible: !composeOptions().isUrgent">\r\n                        <sm-recipient-list-edit params="options: toRecipientListOptions" data-bind="visible: toVisible"></sm-recipient-list-edit>\r\n                        <sm-recipient-list-edit params="options: ccRecipientListOptions" data-bind="visible: ccVisible"></sm-recipient-list-edit>\r\n                        <sm-recipient-list-edit params="options: bccRecipientListOptions" data-bind="visible: bccVisible"></sm-recipient-list-edit>\r\n                    </div>\r\n\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: composeOptions().isUrgent">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label class="control-label">To</label>\r\n                        </div>\r\n                        <div class="col-sm-12 col-md-11 flexbox horizontal auto">\r\n                            <div data-bind="dxCheckBox: { value: sendAllStaff }"></div> Staff\r\n                            <div data-bind="dxCheckBox: { value: sendAllParents }"></div> Parents\r\n                            <div data-bind="dxCheckBox: { value: sendAllStudents }"></div> Students\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: !!message().surveyGU()" style="white-space: nowrap">\r\n                    <div class="col-sm-12 col-md-1">\r\n                        <label class="control-label col-md-1">Survey</label>\r\n                    </div>\r\n                    <div class="col-sm-12 col-md-11">\r\n                        <div class="flexbox horizontal auto" style="flex-wrap: wrap">\r\n                            <div class="flexbox horizontal auto padded middle" style="flex-wrap: wrap">\r\n                                <label class="control-label">Begin Date</label>\r\n                                <div class="flexbox horizontal auto">\r\n                                    <div data-bind="dxDateBox: surveyBeginDateOptions" style="border-radius: 4px 0 0 4px; width: 20ch;"></div>\r\n                                    <div data-bind="dxDateBox: surveyBeginTimeOptions" style="border-radius: 0 4px 4px 0; width: 18ch;"></div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="flexbox horizontal auto padded middle" style="flex-wrap: wrap">\r\n                                <label class="control-label">End Date</label>\r\n                                <div class="flexbox horizontal wrap">\r\n                                    <div data-bind="dxDateBox: surveyEndDateOptions" style="border-radius: 4px 0 0 4px; width: 20ch;"></div>\r\n                                    <div data-bind="dxDateBox: surveyEndTimeOptions" style="border-radius: 0 4px 4px 0; width: 18ch;"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="flexbox horizontal padded" style="flex-wrap: wrap" data-bind="with: message().surveyInfo()">\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: !isSentMessage() || isEnabled, disabled: !isSentMessage(), attr: {\'aria-label\': \'Enabled\' } }"></div>\r\n                                <label class="checkbox-label">Enabled</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: isRequired, attr: {\'aria-label\': \'Required On Login\' } }"></div>\r\n                                <label class="checkbox-label">Required On Login</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: isAnonymous, attr: {\'aria-label\': \'Anonymous\' } }"></div>\r\n                                <label class="checkbox-label">Anonymous</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: splitStudents, attr: {\'aria-label\': \'One Survey Per Student\' } }"></div>\r\n                                <label class="checkbox-label">One Survey Per Student</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="flexbox horizontal padded" data-bind="with: message()">\r\n                            <div class="auto">\r\n                                <button type="button" class="btn btn-default" data-bind="click: addSTQueryRecipients">Add Recipients From Synergy Query</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr data-bind="visible: !!message().surveyGU()" />\r\n            \r\n                <div data-bind="visible: !composeOptions().isUrgent && !composeOptions().isEditingTemplate && SM.userType === UserType.Staff">\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n                        <div class="col-sm-12 col-md-1"></div>\r\n                        <div class="col-sm-12 col-md-11 flexbox horizontal wrap">\r\n                            <div class="margin-right-xlarge" data-bind="visible: currentContactLogOption !== ContactLogOption.NoLogging">\r\n                                <div data-bind="dxCheckBox: { value: message().updateContactLog, disabled: currentContactLogOption !== ContactLogOption.StaffChoice }, attr: { \'aria-label\': SM.translation.updateContactLog }"></div>\r\n                                <label class="checkbox-label" data-bind="text: SM.translation.updateContactLog"></label>\r\n                            </div>\r\n                            <div class="flexbox horizontal margin-right-xlarge" data-bind="visible: SM.contactCategoriesEnabled && currentContactLogOption !== ContactLogOption.NoLogging">\r\n                                <label id="contactCategoryLabel" class="checkbox-label margin-right" data-bind="text: SM.translation.contactCategory()"></label>\r\n                                <div class="height-fix">\r\n                                    <div aria-labelledby="contactCategoryLabel" data-bind="dxSelectBox: contactCategorySettings, attr: { \'aria-label\': SM.translation.contactCategory }"></div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="margin-right-xlarge">\r\n                                <div data-bind="dxCheckBox: { value: message().bccSender }, attr: { \'aria-label\': SM.translation.bccSender }"></div>\r\n                                <label class="checkbox-label" data-bind="text: SM.translation.bccSender"></label>\r\n                            </div>\r\n                            <div data-bind="visible: SM.translationEnabled">\r\n                                <div data-bind="dxCheckBox: { value: message().shouldTranslate }, attr: { \'aria-label\': SM.translation.shouldTranslate }"></div>\r\n                                <label class="checkbox-label" data-bind="text: SM.translation.shouldTranslate"></label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div data-bind="visible: composeOptions().isEditingTemplate">\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label id="templateNameLabel" class="col-md-1 control-label">Name</label>\r\n                        </div>\r\n                        <div class="col-sm-12 col-md-11">\r\n                            <input id="templateName" type="text" class="form-control" style="width: 100%;" data-bind="textInput: template.name" aria-labelledby="templateNameLabel" />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div data-bind="visible: composeOptions().isEditingTemplate">\r\n                    <div class="row no-edge-padding row-no-gutters margin-bottom">\r\n                        <div class="col-sm-12 col-md-1">\r\n                            <label id="templatePriorityLabel" class="col-md-1 control-label">Priority</label>\r\n                        </div>\r\n                        <div class="col-sm-12 col-md-11">\r\n                            <div data-bind="dxSelectBox: templatePriorityOptions"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n            </div>\r\n            \r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Email">\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: !message().isMeeting()">\r\n                    <div class="col-sm-12 col-md-1">\r\n                        <label id="subjectLabel" class="control-label" data-bind="text: SM.translation.subject()"></label>\r\n                    </div>\r\n                    <div class="col-sm-12 col-md-11">\r\n                        <input id="composeSubject" type="text" class="form-control" autocomplete="no" style="width: 100%;" data-bind="textInput: message().subject, hasFocus: subjectHasFocus" aria-labelledby="subjectLabel" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div data-bind="dxPopover: templatePopoverSettings">\r\n                    <div class="sm-app">\r\n                        <button type="button" class="btn btn-primary" style="width: 100%;" data-bind="click: newTemplate">New Template From Message</button>\r\n                        <div class="dx-searchbar" style="padding-top: 5px;">\r\n                            <div data-bind="dxTextBox: templateSearchSettings"></div>\r\n                        </div>\r\n                        <div data-bind="dxList: templateListSettings">\r\n                            <div data-options="dxTemplate: {name: \'item\'}">\r\n                                <div class="list-remove" data-bind="click: $parent.removeTemplate.bind($parent, $data), clickBubble: false">\r\n                                    <span class="fa fa-times"> </span>\r\n                                </div>\r\n                                <div class="list-remove" style="margin-right: 10px;" data-bind="click: $parent.doEditTemplate.bind($parent, $data), clickBubble: false">\r\n                                    <span class="fa fa-pencil"> </span>\r\n                                </div>\r\n                                <div class="template-name" data-bind="text: $data.name"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style="margin-bottom: 1rem;" data-bind="visible: SM.aiEnabled">\r\n                    <button class="btn btn-primary" data-bind="visible: composeOptions().editorType === SMEditorType.New, click: toggleGenerator">\r\n                        <i class="fa-regular fa-brain-circuit"></i> Generate Message\r\n                    </button>\r\n\r\n                    <div style="display: flex; gap: 1rem;" data-bind="visible: composeOptions().editorType !== SMEditorType.New">\r\n                        <div class="btn-group" style="display: flex;">\r\n                            <button type="button" class="btn btn-primary" data-bind="click: generateResponses.bind($component)"><i class="fa-regular fa-brain-circuit"></i> Suggest</button>\r\n                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                                <span class="caret"></span>\r\n                                <span class="sr-only">Toggle Dropdown</span>\r\n                            </button>\r\n                            <ul class="dropdown-menu">\r\n                                <li><a href="#" data-bind="click: toggleGenerator"><i class="fa-regular fa-brain-circuit"></i> Generate Message</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    \r\n                        \x3c!-- ko foreach: replyResponses() --\x3e\r\n                            <button class="btn btn-secondary" style="display: flex; overflow: hidden;" data-bind="click: $component.createMessage.bind($component, messageText())">\r\n                                <span data-bind="text: response" style="text-overflow: ellipsis; overflow: hidden; display: block;"></span>\r\n                            </button>\r\n                        \x3c!-- /ko --\x3e\r\n                    </div>\r\n\r\n                    <sm-generator id="smGenerator" data-bind="attr: { \'text\': message().subject, \'show\': showGenerator }" />\r\n                </div>\r\n\r\n                <p>\r\n                    <textarea data-bind="attr: { id: \'editor-\' + instanceId }"></textarea>\r\n                </p>\r\n\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: message().fileAttachments().length > 0">\r\n                    <div class="col-md-12">\r\n                        <label class="control-label" data-bind="text: SM.translation.attachments()"></label>\r\n                        <div id="attachmentBox" tabindex="0" class="form-control attachment-box" data-bind="attr: { \'aria-label\': SM.translation.attachments }">\r\n                            <div data-bind="foreach: message().fileAttachments()">\r\n                                <span tabindex="0" data-bind="attr: { class: labelStatusClass, \'aria-label\': name() }, click: $component.openAttachment">\r\n                                    <img class="attachment-spinner" src="'+n+'" data-bind="visible: status() === AttachmentStatus.Uploading, attr: { \'alt\': SM.translation.uploading }" />\r\n                                    <span data-bind="text: progressText(), visible: status() === AttachmentStatus.Uploading"></span>\r\n                                    <span aria-hidden="true" data-bind="attr: { class: iconStatusClass }, visible: status() !== AttachmentStatus.Uploading"></span>\r\n                                    <span data-bind="text: name"></span>\r\n                                    <span tabindex="0" class="glyphicon glyphicon-remove" aria-region="button" data-bind="click: $parent.removeAttachment.bind($parent, $data), clickBubble: false, visible: canCancel, attr: { \'aria-label\': SM.translation.delete }"></span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row no-edge-padding row-no-gutters margin-bottom" data-bind="visible: message().linkAttachments().length > 0">\r\n                    <div class="col-md-12">\r\n                        <label class="control-label">Links</label>\r\n                        <div tabindex="0" class="form-control attachment-box" aria-label="Links">\r\n                            <div data-bind="foreach: message().linkAttachments()">\r\n                                <span tabindex="0" class="label link-attachment-label attachment" data-bind="attr: { \'aria-label\': name() }, click: $component.openAttachment">\r\n                                    <img data-bind="attr: { src: iconPath }" style="width: 20px;" />\r\n                                    <span data-bind="text: name"></span>\r\n                                    <span tabindex="0" class="glyphicon glyphicon-remove" aria-region="button" data-bind="click: $parent.removeAttachment.bind($parent, $data), clickBubble: false, visible: canCancel, attr: { \'aria-label\': SM.translation.delete }"></span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style="display: flex; justify-content: space-between;">\r\n                    <div class="drag-drop-info desktop-only" data-bind="visible: message().fileAttachments().length == 0 && SM.isAdvancedUpload() && allowAttachments(), text: SM.translation.dragDropInfo()"></div>\r\n                    <div class="auto-save-text" data-bind="visible: allowDraft">\r\n                        <span data-bind="visible: isDirty() && !showAutoSaving()">Unsaved Changes</span>\r\n                        <span data-bind="visible: showAutoSaving">\r\n                            <img src="'+n+'" style="width: 12px; margin-top: -2px;">\r\n                            <span data-bind="text: SM.translation.autosaving()"></span>\r\n                        </span>\r\n                        <span data-bind="visible: !showAutoSaving() && !isDirty(), text: autoSaveResults"></span>\r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div class="drag-drop-message" data-bind="visible: draggingFiles() && allowAttachments()">\r\n                    <div class="message-text">Drag files here</div>\r\n                </div>\r\n\r\n                <form id="openAttachmentForm" action="FileDownload.aspx" method="GET">\r\n                    <input type="hidden" id="openAttachmentFdId" name="fdID" />\r\n                    <input type="hidden" name="dbID" value="3" />\r\n                </form>\r\n\r\n                <form id="uploadForm" action="PXP_UploadFile.aspx" target="uploadFrame" method="post" enctype="multipart/form-data">\r\n                    <input type="hidden" id="messagePersonId" name="messagePersonId" value="" />\r\n                    <input type="hidden" id="uploadRequest" name="xml" value=\'\' />\r\n                    <input type="file" id="uploadFile" name="file" class="hidden" data-bind="event: { change: uploadAttachments.bind($data, $element.files) }" />\r\n                </form>\r\n                <iframe id="uploadFrame" name="uploadFrame" class="hidden"></iframe>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Text">\r\n                <div class="form-group">\r\n                    <textarea type="text" class="form-control" style="width: 100%; height: 335px;" data-bind="textInput: message().smsMessage"></textarea>\r\n                </div>\r\n                <div class="drag-drop-info">Character count: <span data-bind="text: message().smsMessage()?.length ?? 0"></span></div>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Voice">\r\n                <div class="form-group">\r\n                    <div data-bind="dxRadioGroup: voiceTypeOptions"></div><br>\r\n                    \r\n                    <div data-bind="visible: showVoiceTextToSpeechTextArea">\r\n                        <div class="voice-options">\r\n                            <div class="voice-selection" data-bind="dxSelectBox: voiceTTSLanguagesSettings"></div>\r\n                            <button class="btn btn-info" data-bind="click: handleVoiceTTSPreviewClick">Preview</button>\r\n                        </div>\r\n                        <textarea type="text" class="form-control" style="width: 100%; height: 305px;" data-bind="textInput: message().voiceText"></textarea>    \r\n                    </div>\r\n\r\n                    <div data-bind="visible: showVoiceAudioRecorder">\r\n                        <sm-audio-recorder params="saveRecording: addVoiceRecording.bind($data)"></sm-audio-recorder>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Social">\r\n                <div class="form-group">\r\n                    <h3 style="margin-top: 0;">Twitter</h3>\r\n                    <hr>\r\n                    <div class="row">\r\n                        <div class="col-xs-1" style="font-size: 4rem;">\r\n                            <i class="fa-brands fa-twitter"></i>\r\n                        </div>\r\n                        <div class="col-xs-11">\r\n                            <textarea type="text" class="form-control" data-bind="textInput: message().socialText"></textarea>\r\n                        </div>\r\n                    </div>\r\n                    <h3 style="margin-top: 3rem;">Facebook</h3>\r\n                    <hr>\r\n                    <div class="row">\r\n                        <div class="col-xs-1" style="font-size: 4rem;">\r\n                            <i class="fa-brands fa-facebook-f"></i>\r\n                        </div>\r\n                        <div class="col-xs-11">\r\n                            <textarea type="text" class="form-control"></textarea>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="attachmentDropBox" class="attachment-drop-box" data-bind="visible: draggingFiles"></div>\r\n\r\n    <div data-bind="visible: responsesLoading, click: responsesLoading(false)" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; z-index: 5000; background: #0000005e;">\r\n        <div style="background: var(--st-color-modal-bg); border-radius: 1rem; width: 300px; margin: auto; margin-top: 250px;">\r\n            <st-ai-loader processing="true" size="300px" data-bind="{ attr: { show: responsesLoading() } }"></st-ai-loader>\r\n        </div>\r\n    </div>\r\n\r\n    <div data-bind="dxLoadPanel: loadPanelSettings"></div>\r\n</div>';e.exports=a},4827:e=>{e.exports='<div class="messageContent" data-bind="with: message, visible: message, attr: { \'aria-label\': SM.translation.messageContent }" role="region" aria-live="polite">\r\n    <div class="vidconf-bar" data-bind="visible: isMeeting, css: { \'active\': canJoinMeeting }">\r\n        <button class="btn btn-sm btn-default pull-right" data-bind="click: $parent.joinMeeting.bind($parent)">\r\n            <span class="fa fa-video"></span>\r\n            <span data-bind="text: SM.translation.joinMeeting"></span>\r\n        </button>\r\n        <button class="btn btn-sm btn-default pull-right" data-bind="visible: false, click: $component.openICS.bind($parent)">\r\n            <span class="fa fa-calendar-plus-o"></span>\r\n            <span data-bind="text: SM.translation.addToCalendar"></span>\r\n        </button>\r\n        <span data-bind="html: $parent.getVideoConferenceInfo.call($parent)" class="clearfix"></span>\r\n    </div>\r\n    <div class="survey-bar flexbox horizontal middle" data-bind="visible: isSurvey">\r\n        <div class="auto" data-bind="html: $parent.getSurveyInfo.call($parent)"></div>\r\n        <div>\r\n            <button class="btn btn-sm btn-default" data-bind="click: $parent.openSurvey.bind($parent)">\r\n                <img data-bind="attr: { src: \'Images/ST_GENESIS/SIS_SurveyDef.gif\' }" style="width: 20px;" />\r\n                <span data-bind="text: SM.translation.openSurvey"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="panel-body">\r\n        <div role="region" data-bind="attr: { \'aria-label\': SM.translation.subject }">\r\n            <span class="label label-danger" data-bind="visible: isItDraft() && (SM.impersonated || SM.auditing)">DRAFT</span>\r\n            <span id="subjectText" class="subject" data-bind="html: subject"></span>\r\n        </div>\r\n        <div class="header-text" data-bind="text: sendDateTimeFormattedLong, visible: !$parent.printLayout"></div>\r\n        <div class="header-text" data-bind="text: sendDateTimeFormattedFull, visible: $parent.printLayout"></div>\r\n        <div role="region" data-bind="attr: { \'aria-label\': SM.translation.from }">\r\n            <div class="header-text link-text" data-bind="attr: { title: SM.translation.readCountExplanation }, visible: (isSender() || $parent.isAuditAdmin) && SM.userType === UserType.Staff && !isItDraft() && !$parent.printLayout">\r\n                <i class="fa fa-envelope-open-o" aria-hidden="true"></i>\r\n                <span data-bind="text: $parent.getMessageReadText.call($parent), click: $parent.showMessageReadStatus.bind($parent)"></span>\r\n            </div>\r\n            <div class="header-text" data-bind="visible: noReply"><i class="fa fa-lock" aria-hidden="true"></i> <span data-bind="text: SM.translation.noRepliesAllowed"></span></div>\r\n            <div class="header-text" data-bind="visible: isSender() && behalfOfSenderName()"><i class="fas fa-people-arrows" aria-hidden="true"></i> Sent by <span data-bind="text: behalfOfSenderName"></span></div>\r\n            <div class="header-text" data-bind="visible: shouldTranslate() === false"><i class="fa-regular fa-align-slash" aria-hidden="true"></i> <span data-bind="text: SM.translation.senderDisabledTranslation"></span></div>\r\n            <span class="header-text" data-bind="click: $parent.toggleRecipients.bind($parent), visible: !isSystemMessage() && !$parent.printLayout">\r\n                <span class="fa" data-bind="css: { \'fa-caret-down\': $parent.recipientsVisible(), \'fa-caret-right\': !$parent.recipientsVisible() }"></span>\r\n                <span class="link-text" data-bind="text: $parent.recipientsVisible() ? SM.translation.hideDetails() : SM.translation.showDetails()"></span>\r\n            </span>\r\n            <hr>\r\n\r\n            <div class="form-horizontal">\r\n                <div data-bind="visible: !isSender() || (isSender() && $parent.recipientsVisible()) || $parent.printLayout">\r\n                    <div class="form-group">\r\n                        <label class="col-sm-1 control-label">\r\n                            <span data-bind="text: SM.translation.from"></span>\r\n                        </label>\r\n                        <div class="col-sm-11" data-bind="with: from">\r\n                            <sm-recipient-box params="options: { recipient: $data, onRecipientCountClick: $parents[1].showReadStatus.bind($parents[1]) }"></sm-recipient-box>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div data-bind="visible: isSender() || (!isSender() && $parent.recipientsVisible()) || $parent.printLayout">\r\n                    <div class="form-group" data-bind="visible: to().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.to"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: to">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender(), onRecipientCountClick: $parents[1].showReadStatus.bind($parents[1]), recipientBadgeType: $parents[1].recipientBadgeType }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: cc().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.cc"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: cc">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender(), onRecipientCountClick: $parents[1].showReadStatus.bind($parents[1]), recipientBadgeType: $parents[1].recipientBadgeType }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: bcc().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.bcc"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: bcc">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender(), onRecipientCountClick: $parents[1].showReadStatus.bind($parents[1]), recipientBadgeType: $parents[1].recipientBadgeType }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <hr>\r\n        </div>\r\n\r\n        <div class="communication-tabs" data-bind="dxTabs: $parent.communicationTabOptions, visible: $parent.showCommunicationTabs"></div>\r\n\r\n        <div data-bind="visible: $parent.showEmailTab">\r\n            <div class="alert alert-danger" role="alert" data-bind="visible: translationError() && SM.userType === UserType.Staff, attr: { \'aria-label\': SM.translation.errorOccurredText }">\r\n                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\r\n                <span data-bind="text: translationError"></span>\r\n            </div>\r\n            <span class="ck-content" role="region" data-bind="html: messageTextFormatted, attr: { \'aria-label\': SM.translation.message }"></span>\r\n            <div class="col-md-12" role="region" data-bind="visible: fileAttachments().length > 0, attr: { \'aria-label\': SM.translation.attachments }">\r\n                <div data-bind="foreach: fileAttachments()">\r\n                    <span class="label attachment-label label-primary attachment" data-bind="click: $component.openAttachment.bind($component)">\r\n                        <span class="fa fa-paperclip margin-right-small"></span>\r\n                        <span data-bind="text: name"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-12" role="region" data-bind="visible: linkAttachments().length > 0 && SM.userType === UserType.Staff" aria-label="Links">\r\n                <br>\r\n                <div data-bind="foreach: linkAttachments()">\r\n                    <span class="label link-attachment-label label-primary attachment" data-bind="click: $component.openAttachment.bind($component)">\r\n                        <img data-bind="attr: { src: iconPath }" style="width: 20px;" />\r\n                        <span data-bind="text: name"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <form id="openAttachmentForm" action="FileDownload.aspx" method="GET">\r\n                <input type="hidden" id="openAttachmentFdId" name="fdID" />\r\n                <input type="hidden" id="aID" name="aID" />\r\n                <input type="hidden" id="dbID" name="dbID" value="3" />\r\n            </form>\r\n            <div role="region" data-bind="visible: translated, attr: { \'aria-label\': SM.translation.messageTranslatedFrom }">\r\n                <div class="show-recipients margin-top" data-bind="click: $parent.toggleOriginalText.bind($parent)">\r\n                    <span class="fa" data-bind="css: { \'fa-caret-down\': $parent.originalTextVisible(), \'fa-caret-right\': !$parent.originalTextVisible() }"></span>\r\n                    <span class="link-text" data-bind="visible: translated"><span data-bind="text: SM.translation.messageTranslatedFrom"></span> <span data-bind="text: originalLanguageDescription"></span>.</span>\r\n                    <span class="link-text" data-bind="text: $parent.originalTextVisible() ? SM.translation.hideOriginalText() : SM.translation.showOriginalText()"></span>\r\n                </div>\r\n                <div data-bind="visible: $parent.originalTextVisible">\r\n                    <div data-bind="text: SM.translation.originalMessage" class="original-message-header"></div>\r\n                    <div class="original-message">\r\n                        <p><span data-bind="text: SM.translation.subject"></span>: <span data-bind="html: originalSubjectText"></span></p>\r\n                        <div data-bind="html: originalMessageText"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div role="region" data-bind="attr: { \'aria-label\': SM.translation.actions }, visible: !$parent.printLayout">\r\n                <a href="#Actions" class="sr-only" data-bind="text: SM.translation.actions"></a>\r\n            </div>\r\n        </div>\r\n\r\n        <div data-bind="visible: $parent.showSMSTab">\r\n            <span role="region" data-bind="text: smsMessage()"></span>\r\n        </div>\r\n\r\n        <div data-bind="visible: $parent.showVoiceTab">\r\n            <span role="region" data-bind="text: voiceText()"></span>\r\n            <sm-audio-player params="getAudioSource: $parent.GetAudioPlayerSource.bind($parent)" data-bind="visible: $parent.showAudioPlayer"></sm-audio-player>\r\n        </div>\r\n\r\n        <div data-bind="visible: $parent.showPushNoteTab">\r\n            <span role="region" data-bind="text: pushNotificationText()"></span>\r\n        </div>\r\n\r\n    </div>\r\n</div>'},5677:e=>{e.exports='<sm-message params="options: { message: message, isAuditAdmin: isAuditAdmin }"></sm-message>\r\n\r\n<div class="print-content" style="display: none;">\r\n    <sm-message params="options: { message: message, printLayout: true }"></sm-message>\r\n</div>\r\n\r\n<iframe class="print-frame" style="display: none;"></iframe>\r\n'},6410:e=>{e.exports='<div class="row no-edge-padding row-no-gutters margin-bottom">\r\n    <div class="col-md-12">\r\n        <div data-bind="visible: isStudentSpecific">\r\n            <div class="row form-control no-edge-padding" style="height: auto; border-top-left-radius: 0px;border-top-right-radius: 0px;border-top: none;">\r\n                <div class="col-md-6">\r\n                    <p><strong>Student / Parents / Guardians</strong></p>\r\n                    <p>\r\n                        <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: allStudentParentsGuardiansStudentSpecific().selected,  text: allStudentParentsGuardiansStudentSpecific().text }"></div></div>\r\n\r\n                        <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: studentStudent()?.selected, disabled: studentStudent()?.disabled, text: studentStudent()?.text }"></div></div>\r\n\r\n                        \r\n                        <div data-bind="foreach: studentParents()">\r\n                            <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: selected, disabled: disabled, text: text }"></div></div>\r\n                        </div>\r\n                    </p>\r\n\r\n                    <p><strong>Student Groups</strong></p>\r\n                    <p>\r\n                        \r\n                        <div><div class="checkbox-item-with-text no-bold" data-bind="visible: studentStudentGroups()?.length > 0, dxCheckBox: { value: allStudentStudentGroupsStudentSpecific().selected, text: allStudentStudentGroupsStudentSpecific().text }"></div></div>\r\n                        <div data-bind="foreach: studentStudentGroups()">\r\n                            <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: selected, disabled: disabled, text: text }"></div></div>\r\n                        </div>\r\n                        <div data-bind="if: studentStudentGroups()?.length === 0">\r\n                            No Student Groups\r\n                        </div>\r\n                    </p>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <p><strong>Teachers</strong></p>\r\n                    <p>\r\n                        <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: allStudentTeachersStudentSpecific().selected, text: allStudentTeachersStudentSpecific().text }"></div></div>\r\n                        <div data-bind="foreach: studentTeachers()">\r\n                            <div><div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: selected, disabled: disabled, text: text }"></div></div>\r\n                        </div>\r\n                    </p>\r\n\r\n                    <p><strong>Counselor</strong></p>\r\n                    <p>\r\n                        <div data-bind="ifnot: !!(studentCounselor()?.disabled) === false ">\r\n                            <div class="checkbox-item-with-text no-bold" data-bind="dxCheckBox: { value: studentCounselor()?.selected, disabled: studentCounselor()?.disabled, text: studentCounselor()?.text() }"></div>\r\n                        </div>\r\n                        <div data-bind="if: !!(studentCounselor()?.disabled) === false">No Counselor Assigned</div>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div data-bind="visible: !isStudentSpecific">                          \r\n            <div data-bind="style: "class="row form-control no-edge-padding" style="height: auto; border-top-left-radius: 0px;border-top-right-radius: 0px;border-top: none;">\r\n                <div class="col-md-6">\r\n                    <p><strong>Current Sections </strong></p>\r\n                    <p>\r\n                        <div data-bind="if: teacherSections()?.length > 0">\r\n                            <div style="display: flex;">\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Student_s.gif\', alt: \'Students\' }, smTooltip: { title: \'Students\'}" />\r\n                                </div>\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Parent_s.gif\', alt: \'Parents\' }, smTooltip: { title: \'Parents\'}" />\r\n                                </div>\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Staff_s.gif\', alt: \'Staff\' }, smTooltip: { title: \'Staff\'}" />\r\n                                </div>\r\n                            </div>\r\n                            <div style="display: flex; align-items: center;">\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersSections().studentsSelected }"></div>\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersSections().parentsSelected }"></div>\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersSections().staffSelected }"></div>\r\n                                <span>All Sections</span>\r\n                            </div>\r\n                            <div data-bind="foreach: teacherSections()" style="display: flex; flex-direction: column;">\r\n                                <div style="display: flex; align-content: center;">\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.studentsSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.parentsSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.staffSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <span data-bind="text: text"></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div data-bind="if: teacherSections()?.length === 0">\r\n                            No Sections\r\n                        </div>\r\n                    </p>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <p><strong>Current Student Groups</strong></p>\r\n                    <p>\r\n                        <div data-bind="if: teacherStudentGroups()?.length > 0">\r\n                            <div style="display: flex;">\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Student_s.gif\', alt: \'Students\' }, smTooltip: { title: \'Students\'}" />\r\n                                </div>\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Parent_s.gif\', alt: \'Parents\' }, smTooltip: { title: \'Parents\'}" />\r\n                                </div>\r\n                                <div class="margin-right-small" style="display: flex; justify-content: center;">\r\n                                    <img class="icon-header" data-bind="attr:{src: \'images/ST_GENESIS/Staff_s.gif\', alt: \'Staff\' }, smTooltip: { title: \'Staff\'}" />\r\n                                </div> \r\n                            </div>\r\n                            <div style="display: flex; align-items: center;">\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersStudentGroups().studentsSelected}"></div>\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersStudentGroups().parentsSelected}"></div>\r\n                                <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: allTeachersStudentGroups().staffSelected}"></div>\r\n                                <span>All Student Groups</span> \r\n                            </div>\r\n                            <div data-bind="foreach: teacherStudentGroups()">\r\n                                <div style="display: flex; align-content: center;">\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.studentsSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.parentsSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <div class="checkbox-grid-item margin-right-small" data-bind="dxCheckBox: {value: $data.staffSelected}" style="display: flex; justify-content: center;"></div>\r\n                                    <span data-bind="text: text"></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div data-bind="if: teacherStudentGroups()?.length === 0">\r\n                            No Student Groups\r\n                        </div>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2159:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="readStatusDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">\r\n                    <span data-bind="text: SM.translation.readStatus()"></span>\r\n                    <div class="pull-right" data-bind="text: countText"></div>\r\n                </h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div data-bind="dxDataGrid: dataGridOptions"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="click: compose, text: SM.translation.compose(), visible: false"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: close, text: SM.translation.close()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2439:e=>{e.exports='<div style="cursor: default;" tabindex="0" data-bind="click: openMenu, clickBubble: false, attr: { id: id, \'aria-label\': recipient().contactDetails1() }, event: { mouseenter: showSnapshot, mouseleave: hideAll }" class="contact-box contact-box-primary">\r\n    <div class="contact-box-controls" data-bind="visible: !readOnly()">\r\n        <span tabindex="0" class="glyphicon glyphicon-remove" data-bind="click: remove, clickBubble: false, attr: { \'aria-label\': SM.translation.removeRecipient() }"></span><br>\r\n        <span class="caret" data-bind="visible: showGroupUserTypes()"></span>\r\n    </div>\r\n    \r\n    <img class="info-icon" data-bind="click: function() { }, clickBubble: false, attr: { id: \'infoButton\' + recipient().id(), src: imgSrc(recipient().recipientList()), alt: RecipientList[recipient().recipientList()] }" />\r\n    <div class="contact-box-details">\r\n        <div class="contact-box-details1" data-bind="text: recipient().contactDetails1()"></div>\r\n        <div class="contact-box-details2" data-bind="text: recipient().contactDetails2() ? recipient().contactDetails2() : \'&nbsp;\'"></div>\r\n        <div class="contact-box-details2" data-bind="text: recipient().organizationName() ? recipient().organizationName() : \'&nbsp;\', css: { \'detail-highlight\': recipient().organizationYearId() !== undefined && recipient().organizationYearId() != SM.focusOrgYearId }"></div>\r\n    </div>\r\n    <div class="pull-right" data-bind="visible: showRecipientBoxBadge, attr: { title: getReadTitle() }">\r\n        <i data-bind="attr: { class: getReadIcon() }, visible: !recipient().isGroup()" aria-hidden="true"></i>\r\n        <div class="badge badge-read" data-bind="visible: recipient().isGroup()">\r\n            <span data-bind="text: getReadText(), visible: recipient().loadingRecipientCount() === false, click: handleRecipientCountClick"></span>\r\n            <i class="fa-solid fa-spinner fa-xl fa-spin-pulse" style="font-size: 10px;" data-bind="visible: recipient().loadingRecipientCount()"></i>\r\n        </div>\r\n    </div>\r\n    \r\n</div>'},6344:e=>{e.exports='<div class="row no-edge-padding row-no-gutters margin-bottom">\r\n    <div class="col-sm-12 col-md-1">\r\n        <label class="control-label" data-bind="text: title"></label>\r\n    </div>\r\n    <div class="col-sm-12 col-md-11">\r\n        <div class="input-group recipient-list-container" data-bind="class: SM.isTeacher ? \'tvue\' : \'\'">\r\n            <div data-bind="attr: { id: \'composeTo\' + title() }, click: showRecipientDialog, style: { \'border-bottom-left-radius\': showQuickAdd() ? 0 : 4 }" class="form-control recipient-box" >\r\n                <div class="recipient-list" >\r\n                    <span data-bind="foreach: recipients">\r\n                        <sm-recipient-box params="options: { recipient: $data, onRemove: $parent.removeRecipient.bind($parent), readOnly: false, isSender: true, onRecipientCountClick: $parent.showResolvedRecipientList.bind($parent),  recipientBadgeType: RecipientBoxBadgeType.ResolvedRecipientCount}"></sm-recipient-box>\r\n                    </span>\r\n                    <sm-recipient-box data-bind="attr: { id: \'newRecipientDummy\' + title() }" params="options: { recipient: dummyRecipient, readOnly: false }" class="hidden"></sm-recipient-box>\r\n                    <sm-recipient-box id="animationBox" params="options: { recipient: dummyRecipient, readOnly: false }" class="hidden"></sm-recipient-box>\r\n                </div>\r\n            </div>\r\n            <div class="input-group-btn text-top" style="width: 40px;">\r\n                <div class="stacked-buttons">\r\n                    <button type="button" class="btn btn-default" data-bind="click: clearRecipients, attr: { \'aria-label\': title() + \' \' + SM.translation.removeAllRecipients() }">\r\n                        <span class="text-danger glyphicon glyphicon-remove"></span>\r\n                    </button>\r\n                    <button type="button" class="btn btn-default" data-bind="click: showRecipientDialog, attr: { \'aria-label\': title() + \' \' + SM.translation.addRecipients() }, style: { \'border-bottom-right-radius\': SM.isTeacher ? 0 : 4 }">\r\n                        <span class="text-primary glyphicon glyphicon-pencil"></span>\r\n                    </button>\r\n                    <button type="button" class="btn btn-default" data-bind="click: toggleShowQuickAdd, visible: SM.isTeacher, style: { \'border-bottom-right-radius\': showQuickAdd() ? 0 : 4 }">\r\n                        <span data-bind="class: quickAddDropdownIcon"></span>\r\n                    </button>\r\n                    \r\n                </div>\r\n            </div>  \r\n        </div>\r\n        <div data-bind="if: showQuickAdd() && SM.isTeacher">\r\n            <sm-quick-add-recipient params="options: quickAddRecipientOptions"></sm-quick-add-recipient>\r\n        </div>\r\n    </div>\r\n</div>'},6007:e=>{e.exports='<div data-bind="visible: SM.allowEmailAtFocus(addRecipientVM.selectedOrganization()?.id())">\r\n    <div class="row margin-top no-edge-padding row-no-gutters" data-bind="visible: recipientList === RecipientList.Teachers">\r\n        <div class="col-sm-12 col-md-5 margin-bottom" data-bind="visible: teacherData().length > 1">\r\n            <div class="mr-1" data-bind="dxSelectBox: selectSchoolOptions"></div>\r\n        </div>\r\n        <div class="col-sm-12 col-md-5 margin-bottom" data-bind="visible: selectedSchoolTerms()().length > 1">\r\n            <div class="mr-1" data-bind="dxSelectBox: selectTermOptions"></div>\r\n        </div>\r\n        <div class="col-sm-12 col-md-2">\r\n            <button class="btn btn-xs btn-default" style="width: 100%;" data-bind="click: addAll, text: SM.translation.addAll"></button>\r\n        </div>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: recipientList === RecipientList.Classes || recipientList === RecipientList.MassEmail || (recipientList === RecipientList.MassStudentGroups && SM.userType === UserType.Staff)">\r\n        <div class="form-control class-address-to margin-top">\r\n            <div class="col-md-2">\r\n                <span data-bind="visible: recipientList !== RecipientList.MassEmail, text: SM.translation.addressTo"></span>\r\n                <button type="button" class="btn btn-primary" data-bind="visible: recipientList === RecipientList.MassEmail, text: SM.translation.addressTo, click: addMassEmail"></button>\r\n            </div>\r\n            <div class="col-md-10">\r\n                <div class="col-md-3" data-bind="visible: recipientList !== RecipientList.MassEmail">\r\n                    <div data-bind="dxCheckBox: { value: addressToTeacher }"></div> <span data-bind="text: SM.translation.staff"></span>\r\n                </div>\r\n                <div class="col-md-3">\r\n                    <div data-bind="dxCheckBox: { value: addressToParents }"></div> <span data-bind="text: SM.translation.parents"></span>\r\n                </div>\r\n                <div class="col-md-3">\r\n                    <div data-bind="dxCheckBox: { value: addressToStudents }"></div> <span data-bind="text: SM.translation.students"></span>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class="clearfix" data-bind="visible: recipientList === RecipientList.MassEmail">\r\n                <br />\r\n                <hr style="margin: 5px 10px;" />\r\n                <div class="col-md-2" data-bind="text: SM.translation.grade">\r\n                </div>\r\n                <div class="col-md-10">\r\n                    <div data-bind="foreach: grades">\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: selected }"></div><span data-bind="text: description"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="clearfix"></div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: SM.allowEmailAtFocus(addRecipientVM.selectedOrganization()?.id()) && recipientList === RecipientList.MassEmail">\r\n        <div class="form-control clearfix class-address-to margin-top">\r\n            <div class="col-md-2">\r\n                <button type="button" class="btn btn-primary" data-bind="text: SM.translation.addressTo() + \' \' + SM.translation.staffAllGrades(), click: addStaffMassEmail"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<p data-bind="visible: !SM.allowEmailAtFocus(addRecipientVM.selectedOrganization()?.id())" class="text-center margin-top">\r\n    Access is restricted to school focus only\r\n</div>\r\n\r\n<div data-bind="dxDataGrid: dataGridOptions, visible: SM.allowEmailAtFocus(addRecipientVM.selectedOrganization()?.id()) && recipientList !== RecipientList.MassEmail" class="margin-top data-grid-search"></div>'},1426:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="recurrenceDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Recurrence</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-horizontal checkbox-normal">\r\n                    <div class="form-group">\r\n                        <label class="col-md-1 control-label">Schedule</label>\r\n                        <div class="col-md-11">\r\n                            <div data-bind="dxRadioGroup: recurrenceTypeOptions"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 1">\r\n                        <label class="col-md-1 control-label">Every</label>\r\n                        <div class="col-md-11">\r\n                            <input type="text" class="form-control" style="width: 35px !important;" data-bind="value: recurrence.dayCount" /> days\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label">Every</label>\r\n                        <div class="col-md-11">\r\n                            <input type="text" class="form-control" style="width: 35px !important;" data-bind="value: recurrence.weekCount" /> weeks\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label">Days</label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.monday }"></div>\r\n                            <label class="checkbox-label">Monday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.tuesday }"></div>\r\n                            <label class="checkbox-label">Tuesday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.wednesday }"></div>\r\n                            <label class="checkbox-label">Wednesday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.thursday }"></div>\r\n                            <label class="checkbox-label">Thursday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.friday }"></div>\r\n                            <label class="checkbox-label">Friday</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.saturday }"></div>\r\n                            <label class="checkbox-label">Saturday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.sunday }"></div>\r\n                            <label class="checkbox-label">Sunday</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label">Day</label>\r\n                        <div class="col-md-11">\r\n                            <div class="flexbox horizontal">\r\n                                <div data-bind="dxRadioGroup: monthTypeOneOptions"></div>\r\n                                <div class="control-label">Day&nbsp;</div>\r\n                                <div data-bind="dxSelectBox: dayOfMonthOptions"></div>\r\n                            </div>\r\n                            <div class="flexbox horizontal">\r\n                                <div data-bind="dxRadioGroup: monthTypeTwoOptions"></div>\r\n                                <div class="control-label">The&nbsp;</div>\r\n                                <div data-bind="dxSelectBox: monthDayTypeOptions"></div>\r\n                                <div data-bind="dxSelectBox: monthDayofWeek"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label">Months</label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.january }"></div>\r\n                            <label class="checkbox-label">January</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.february }"></div>\r\n                            <label class="checkbox-label">February</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.march }"></div>\r\n                            <label class="checkbox-label">March</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.april }"></div>\r\n                            <label class="checkbox-label">April</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.may }"></div>\r\n                            <label class="checkbox-label">May</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.june }"></div>\r\n                            <label class="checkbox-label">June</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.july }"></div>\r\n                            <label class="checkbox-label">July</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.august }"></div>\r\n                            <label class="checkbox-label">August</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.september }"></div>\r\n                            <label class="checkbox-label">September</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.october }"></div>\r\n                            <label class="checkbox-label">October</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.november }"></div>\r\n                            <label class="checkbox-label">November</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.december }"></div>\r\n                            <label class="checkbox-label">December</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-1 control-label">Stop On</label>\r\n                        <div class="col-md-11">\r\n                            <div data-bind="dxDateBox: stopDateOptions" style="width: 150px;"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},8547:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="resolvedRecipientListDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">\r\n                    <span data-bind="text: SM.translation.individualRecipients()"></span>\r\n                    <div class="pull-right" data-bind="text: countText"></div>\r\n                </h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div data-bind="dxDataGrid: dataGridOptions"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" data-bind="click: close, text: SM.translation.close()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},8068:e=>{e.exports='<div class="sub-title" data-bind="visible: SM.auditing">\r\n    Name: <strong data-bind="text: SM.auditName"></strong>\r\n    <img style="margin-left: 15px;" data-bind="attr: { src: auditIcon() }" /> <span data-bind="text: UserType[SM.auditType]"></strong>\r\n</div>\r\n\r\n<div id="Actions" class="button-bar flexbox horizontal hidden-print" role="navigation" style="padding-left: 0; flex-wrap: wrap" data-bind="visible: SM.configuration.showToolbar, attr: { \'aria-label\': SM.translation.actions }, css: { \'sm-msg-grid-focused\': messageGridFocused }">\r\n    <div class="flexbox horizontal padded">\r\n        <div class="btn-mobile-back" data-bind="css: { unpadded: !(messageGridFocused() || selectedMessage()) }, visible: !mobileConversation">\r\n            <button type="button" class="btn btn-default" data-bind="click: goBack, visible: messageGridFocused() || selectedMessage()">\r\n                <span class="glyphicon glyphicon-chevron-left" role="presentation"></span>\r\n                <span data-bind="text: SM.translation.back"></span>\r\n            </button>\r\n        </div>\r\n        <div data-bind="visible: SM.configuration.showCompose && !SM.smDisabled && (!isMobile() || (!messageGridFocused() && !selectedMessage() && !selectedConversation()))">\r\n            <button type="button" class="btn btn-success" data-bind="click: startCompose, disable: SM.impersonated">\r\n                <span data-bind="text: SM.translation.compose"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="flexbox horizontal padded auto" data-bind="visible: !isMobile() || !selectedConversation()">\r\n        <div class="btn-back" data-bind="css: { unpadded: !selectedMessage() }">\r\n            <button type="button" class="btn btn-default" data-bind="click: closeMessage, visible: selectedMessage">\r\n                <span class="glyphicon glyphicon-chevron-left" role="presentation"></span> \r\n                <span data-bind="text: SM.translation.back"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-delete flexbox horizontal" data-bind="css: { unpadded: !showDeleteButton() }">\r\n            <button class="btn btn-default" data-bind="click: archiveSelectedMessages, disable: SM.impersonated, smTooltip: { title: archiveText }, attr: { \'aria-label\': archiveText }, visible: showDeleteButton" type="button">\r\n                <span data-bind="attr: { \'class\': archiveIconClass }" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-mobile-delete" data-bind="css: { unpadded: !(messageGridFocused() && showDeleteButton()) }">\r\n            <button class="btn btn-default" data-bind="click: archiveSelectedMessages, disable: SM.impersonated, smTooltip: { title: archiveText }, attr: { \'aria-label\': archiveText }, visible: messageGridFocused() && showDeleteButton()" type="button">\r\n                <span data-bind="attr: { \'class\': archiveIconClass }" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-move" data-bind="visible: SM.configuration.showFolderActions, css: { unpadded: !(selectedFolder().folderType() !== FolderType.SystemMessage) }">\r\n            <div class="btn-group" data-bind="visible: selectedFolder().folderType() !== FolderType.SystemMessage">\r\n                <button type="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.moveToFolder }">\r\n                    <span class="fa fa-folder" aria-hidden="true"></span>\r\n                    <span class="caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <div class="scrollable-menu" data-bind="foreach: dropFolders, visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0">\r\n                        <li data-bind="click: $parent.moveMessages.bind($parent)">\r\n                            <a href="#" data-bind="text: getFolderName()"></a>\r\n                        </li>\r\n                    </div>\r\n                    <li role="separator" class="divider" data-bind="visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0"></li>\r\n                    <li data-bind="click: createFolder"><a href="#" data-bind="text: SM.translation.newFolder"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="btn-mobile-move" data-bind="css: { unpadded: !(messageGridFocused() && selectedFolder().folderType() !== FolderType.SystemMessage) }">\r\n            <div class="btn-group" data-bind="visible: messageGridFocused() && selectedFolder().folderType() !== FolderType.SystemMessage">\r\n                <button type="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.moveToFolder }">\r\n                    <span class="fa fa-folder" aria-hidden="true"></span>\r\n                    <span class="caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <div class="scrollable-menu" data-bind="foreach: dropFolders, visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0">\r\n                        <li data-bind="click: $parent.moveMessages.bind($parent)">\r\n                            <a href="#" data-bind="text: getFolderName()"></a>\r\n                        </li>\r\n                    </div>\r\n                    <li role="separator" class="divider" data-bind="visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0"></li>\r\n                    <li data-bind="click: createFolder"><a href="#" data-bind="text: SM.translation.newFolder"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="btn-group" data-bind="attr: { \'aria-label\': SM.translation.moveActions }, visible: selectedFolder().folderType() !== FolderType.SystemMessage">\r\n            <button id="moreActions" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-default dropdown-toggle">\r\n                <span data-bind="text: SM.translation.more"></span>\r\n                <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu" aria-labelledby="moreActions" role="menu">\r\n                <li data-bind="css: { \'disabled\': disableMarkAsRead }"><a href="#" data-bind="click: markAsRead, text: SM.translation.markAsRead"></a></li>\r\n                <li data-bind="css: { \'disabled\': disableMarkAsUnread }"><a href="#" data-bind="click: markAsUnread, text: SM.translation.markAsUnread"></a></li>\r\n                <li data-bind="visible: SM.configuration.showSignatureActions, css: { \'disabled\': SM.impersonated || SM.auditing }"><a href="#" data-bind="click: editSignatures, text: SM.translation.editSignatures"></a></li>\r\n                <li data-bind="css: { \'disabled\': SM.impersonated || SM.auditing }"><a href="#" data-bind="click: editSettings, text: SM.translation.settings"></a></li>\r\n                <li data-bind="visible: selectedFolder().folderType() === FolderType.Archive"><a href="#" data-bind="click: toggleDeletedMessages, text: showDeleted() ? SM.translation.hideDeletedMessages : SM.translation.showDeletedMessages"></a></li>\r\n            </ul>\r\n        </div>\r\n        <div class="flexbox horizontal" data-bind="visible: !selectedMessage()">\r\n            <button class="btn btn-default" type="button" data-bind="css: { \'active\': searchVisible }, click: toggleSearch, smTooltip: { title: SM.translation.search }, attr: { \'aria-label\': SM.translation.search }">\r\n                <span class="fa fa-search"></span>\r\n            </button>\r\n        </div>\r\n        <div data-bind="visible: selectedMessage() && selectedFolder().folderType() !== FolderType.SystemMessage && selectedFolder().folderType() !== FolderType.Outbox && !selectedMessage().noReply() && !SM.smDisabled && SM.configuration.showReplyForward">\r\n            <div class="btn-group">\r\n                <button type="button" class="btn btn-primary" data-bind="click: reply, text: SM.translation.reply, disable: SM.impersonated, attr: { \'aria-label\': SM.translation.reply }"></button>\r\n                <button id="responseActions" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.responseActions }">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" aria-labeledby="responseActions">\r\n                    <li><a href="#" data-bind="click: replyAll, text: SM.translation.replyAll, visible: SM.userType === UserType.Staff"></a></li>\r\n                    <li><a href="#" data-bind="click: forward, text: SM.translation.forward"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="flexbox horizontal" data-bind="visible: selectedMessage">\r\n            <button class="btn btn-default" data-bind="click: print, attr: { \'aria-label\': SM.translation.print }">\r\n                <span class="fa fa-print" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n        <div class="flexbox horizontal" data-bind="visible: selectedMessage() && selectedFolder().folderType() === FolderType.Outbox && selectedMessage().scheduleSendDate()">\r\n            <button class="btn btn-danger" data-bind="click: cancelScheduledSend">Cancel Send</button>\r\n        </div>\r\n        <div data-bind="visible: selectedMessage() && selectedFolder().folderType() !== FolderType.SystemMessage && selectedMessage().noReply() && !SM.smDisabled">\r\n            <button type="button" class="btn btn-primary" data-bind="click: forward, text: SM.translation.forward, disable: SM.impersonated"></button>\r\n        </div>\r\n        <div class="auto"></div>\r\n    </div>\r\n    <div class="flexbox horizontal padded auto" data-bind="if: selectedMessage">\r\n        <div class="auto"></div>\r\n        <div>\r\n            <button data-bind="click: previousMessage, attr: { \'aria-label\': SM.translation.previousMessage }" type="button" class="btn btn-default">\r\n                <span class="fa fa-chevron-left"></span>\r\n            </button>\r\n        </div>\r\n        <div>\r\n            <button data-bind="click: nextMessage, attr: { \'aria-label\': SM.translation.nextMessage }" type="button" class="btn btn-default">\r\n                <span class="fa fa-chevron-right"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="flexbox horizontal auto" style="overflow: hidden" data-bind="css: { \'sm-msg-grid-focused\': messageGridFocused }">\r\n    <div class="side-bar hidden-print" data-bind="visible: SM.configuration.showSidebar, css: { \'sub-title-space\': SM.auditing }">\r\n        <div id="side-bar-content" class="content" data-bind="event: {scroll: handleSideBarScroll}">\r\n            <div class="folder-list" role="navigation" data-bind="attr: { \'aria-label\': SM.translation.folders }">\r\n                <div class="text-center loading-container" data-bind="visible: folders().length === 0">\r\n                    <i class="fa-solid fa-spinner fa-xl fa-spin-pulse"></i>\r\n                </div>\r\n                <ul class="folder-list" data-bind="visible: folders().length > 0, foreach: folders">\r\n                    <li class="folder" data-bind="css: { \'folder-selected\': $parent.isFolderSelected.bind($parent, $data)(), \'drafts\' : folderType() === FolderType.Draft },\r\n                        event: { mouseenter: $parent.showContextMenuIcon.bind($parent, $element), mouseleave: $parent.hideContextMenuIcon.bind($parent, $element) }">\r\n                        <div class="btn-group" style="width: 100%;">\r\n                            <div role="button" tabindex="0" class="btn folder-name" style="width: 90%;" data-bind="click: $parent.selectFolder.bind($parent), event: { keydown: $parent.handleFolderKeyDown.bind($parent, $data) }">\r\n                                <span class="unread-count pull-right label label-primary" data-bind="css: { \'system-message\': folderType() === FolderType.SystemMessage }, text: unreadMessages, visible: unreadMessages() > 0, attr: { \'aria-label\': unreadMessages() + \' \' + SM.translation.unreadMessages() }"></span></span>\r\n                                <span data-bind="attr: { class: getIcon() }" aria-hidden="true"></span>\r\n                                <span data-bind="text: getFolderName()" class="folder-text"></span>\r\n                            </div>\r\n                            <div role="button" tabindex="0" id="folderActions" class="btn dropdown-toggle" aria-label="Folder Actions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="float: right; padding-right: 5px !important;" data-bind="visible: SM.accessibilityMode">\r\n                                <span class="fa fa-caret-down"></span>\r\n                                <span class="sr-only" data-bind="attr: { \'aria-label\': SM.translation.actions }"></span>\r\n                            </div>\r\n                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="folderActions">\r\n                                <li><a tabindex="-1" href="#" data-bind="click: $parent.updateAllRead.bind($parent, $data, true), text: SM.translation.markAllRead"></a></li>\r\n                                <li><a tabindex="-1" href="#" data-bind="click: $parent.updateAllRead.bind($parent, $data, false), text: SM.translation.markAllUnread"></a></li>\r\n                                <li data-bind="visible: folderType() !== FolderType.Archive && folderType() !== FolderType.SystemMessage"><a tabindex="-1" href="#" data-bind="click: $parent.archiveAll.bind($parent), text: SM.translation.archiveAll"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.Archive"><a tabindex="-1" href="#" data-bind="click: $parent.archiveAll.bind($parent), text: SM.translation.deleteAll"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.UserFolder"><a tabindex="-1" href="#" data-bind="click: $parent.editFolderEx.bind($parent), text: SM.translation.editFolder"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.UserFolder"><a tabindex="-1" href="#" data-bind="click: $parent.deleteFolder.bind($parent), text: SM.translation.deleteFolder"></a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div data-bind="visible: SM.isSynergyMessageEnabled">\r\n                <div class="conv-list" role="navigation">\r\n                    <div class="conv-list-heading">\r\n                        <span>Chat</span>\r\n                    </div>\r\n                    <div data-bind="foreach: sortedConversations">\r\n                        <div class="conv-item" data-bind="click: $parent.selectConversation.bind($parent), css: { \'conv-item-selected\': $parent.selectedConversation()?.conversationGU() === conversationGU()}">\r\n                            <div class="chat-photo">\r\n                                <span data-bind="visible: photoURL() === null || photoURL() === \'\', text: initials"></span>\r\n                                <img data-bind="visible: photoURL() !== null && photoURL() !== \'\', attr: { src: photoURL() }" />\r\n                            </div>\r\n                            <div class="conv-item-details">\r\n                                <div class="conv-item-row">\r\n                                    <span class="conv-item-name" data-bind="text: displayName"></span>   \r\n                                    <span class="conv-item-time" data-bind="text: displayLatestMessageDateTime"></span> \r\n                                </div>\r\n                                <div class="conv-item-row">\r\n                                    <span class="conv-item-message" data-bind="text: latestMessage()"></span>\r\n                                    <span class="unread-count label label-primary" data-bind="text: unreadMessagesCount, visible: unreadMessagesCount() > 0"></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="text-center loading-container" data-bind="visible: loadingConversations">\r\n                        <i class="fa-solid fa-spinner fa-xl fa-spin-pulse"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="main-view auto" data-bind="css: { \'sub-title-space\': SM.auditing }">\r\n        <div class="content">\r\n            <div role="region" data-bind="visible: !selectedMessage() && !selectedConversation(), attr: { \'aria-label\': SM.translation.messages }">\r\n                <div id="messageGrid" class="message-grid" data-bind="dxDataGrid: messageGridOptions"></div>\r\n            </div>\r\n\r\n            <sm-printable-message params="options: { message: selectedMessage, onInitialized: printableMessageInitialized.bind($data) }" data-bind="visible: !selectedConversation()"></sm-printable-message>\r\n            <sm-conversation params="conversation: selectedConversation" data-bind="visible: selectedConversation() !== null && SM.isSynergyMessageEnabled"></sm-conversation>\r\n        </div>\r\n    </div>\r\n</div>'},2467:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="scheduleSendDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Schedule Send</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>Note: Recipients for Sections, User Groups, Student Groups, Mass Email and Contact Lists will be based on enrollment at the time the message scheduled to be sent.</p>\r\n                <div class="form-horizontal">\r\n                    <div class="form-group">\r\n                        <label id="dateLabel" class="col-md-2 control-label">Send Date/Time</label>\r\n                        <div class="col-md-10">\r\n                            <div class="margin-right" data-bind="dxDateBox: sendDateOptions, dxValidator: requiredFieldValidator" aria-labelledby="dateLabel"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-success" data-bind="click: save">Schedule Send</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},505:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="selectAddressesDialog" aria-label="Select Addresses">\r\n    <div role="document" class="modal-dialog compose-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <span class="button fa fa-times" data-bind="click: close"></span>\r\n                <h2 class="modal-title">\r\n                    Select Recipients\r\n                </h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-horizontal">\r\n                    <sm-recipient-list-edit params="options: toRecipientListOptions"></sm-recipient-list-edit>\r\n                    <sm-recipient-list-edit params="options: ccRecipientListOptions"></sm-recipient-list-edit>\r\n                    <sm-recipient-list-edit params="options: bccRecipientListOptions"></sm-recipient-list-edit>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: submit, text: SM.translation.ok()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},5125:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="settingsDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: SM.translation.settings"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div data-bind="visible: SM.enableForwarding && settings().emailAddresses().length > 0">\r\n                    <h4>Forwarding</h4>\r\n                    <div class="margin-left">\r\n                        <div data-bind="dxCheckBox: { value: settings().enableForwarding }"></div> <span data-bind="text: SM.translation.enableForwarding"></span>\r\n                        <ul data-bind="foreach: settings().emailAddresses">\r\n                            <li data-bind="text: $data"></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <h4 style="margin-top: 1.5rem;">Undo Send</h4>\r\n                    <div class="margin-left flexbox horizontal" style="align-items: center;">\r\n                        <div data-bind="text: SM.translation.undoSendSeconds"></div>\r\n                        <select class="margin-left form-control" style="width: 75px !important;" data-bind="value: settings().undoSendSeconds">\r\n                            <option value="5">5</option>\r\n                            <option value="10">10</option>\r\n                            <option value="20">20</option>\r\n                            <option value="30">30</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2812:e=>{e.exports='<div data-bind="dxPopover: popoverSettings, attr: { id: \'tokenPopover\' + editor.name }">\r\n    <div class="sm-app">\r\n        <div data-bind="dxList: listSettings">\r\n            <div data-options="dxTemplate: {name: \'item\'}">\r\n                <div data-bind="text: $data.value"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},9050:e=>{e.exports='<div class="sm-undo-send flexbox horizontal" data-bind="visible: isVisible">\r\n    <div class="sm-undo-message">Message Sent (<span data-bind="text: secondsLeft"></span>)</div>\r\n    <button data-bind="click: undoSend" class="btn btn-warning">Undo</button>\r\n    <button data-bind="click: viewMessage" class="btn btn-success">View Message</button>\r\n    <a data-bind="click: close" style="cursor: pointer;"><i class="fa fa-close"></i></a>\r\n</div>'},9806:e=>{e.exports='<div class="sm-app st-modal modal" tabindex="-1" role="dialog" id="viewMessageDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <div class="flexbox horizontal padded auto">\r\n                    <h2 class="modal-title" data-bind="text: SM.translation.viewMessage"></h2>\r\n                    <div class="auto"></div>\r\n                    <div>\r\n                        <button class="btn btn-default" data-bind="click: print, attr: { \'aria-label\': SM.translation.print }" type="button">\r\n                            <span class="fa fa-print" aria-hidden="true"></span>\r\n                        </button>\r\n                        <button class="btn btn-default" data-bind="visible: showDeleteButton, click: deleteMessage, disable: SM.impersonated, smTooltip: SM.translation.delete, attr: { \'aria-label\': SM.translation.delete }" type="button">\r\n                            <span class="fa fa-trash" aria-hidden="true"></span>\r\n                        </button>\r\n                    </div>\r\n                    <div data-bind="visible: !message().noReply() && !message().isSystemMessage() && allowActions && !SM.smDisabled">\r\n                        <div class="btn-group">\r\n                            <button type="button" class="btn btn-primary" data-bind="click: reply, text: SM.translation.reply, disable: SM.impersonated, attr: { \'aria-label\': SM.translation.reply }"></button>\r\n                            <button id="responseActions" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.responseActions }">\r\n                                <span class="caret"></span>\r\n                                <span class="sr-only"></span>\r\n                            </button>\r\n                            <ul class="dropdown-menu" aria-labeledby="responseActions">\r\n                                <li><a href="#" data-bind="click: replyAll, text: SM.translation.replyAll, visible: SM.userType === UserType.Staff"></a></li>\r\n                                <li><a href="#" data-bind="click: forward, text: SM.translation.forward"></a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div data-bind="visible: message().isSystemMessage() && !message().noReply() && allowActions">\r\n                        <button type="button" class="btn btn-primary" data-bind="click: smtpReply, text: SM.translation.reply, attr: { \'aria-label\': SM.translation.reply }, disable: SM.impersonated"></button>\r\n                    </div>\r\n                    <div data-bind="visible: message().noReply() && !message().isSystemMessage() && allowActions">\r\n                        <button type="button" class="btn btn-primary" data-bind="click: forward, text: SM.translation.forward, disable: SM.impersonated"></button>\r\n                    </div>\r\n                </div>                                                    \r\n            </div>\r\n            <div class="modal-body">\r\n                <sm-printable-message params="options: { message: message, onInitialized: printableMessageInitialized.bind($data), isAuditAdmin: isAuditAdmin }"></sm-printable-message>\r\n            </div>\r\n            \r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" data-bind="click: close, text: SM.translation.close()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},7091:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e)}},5082:()=>{},381:function(e,t,i){(e=i.nmd(e)).exports=function(){"use strict";var t,i;function n(){return t.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function l(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var i,n=[],a=e.length;for(i=0;i<a;++i)n.push(t(e[i],i));return n}function p(e,t){for(var i in t)o(t,i)&&(e[i]=t[i]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,i,n){return Gt(e,t,i,n,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function b(e){if(null==e._isValid){var t=m(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function f(e){var t=h(NaN);return null!=e?p(m(t),e):m(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),n=i.length>>>0;for(t=0;t<n;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var g=n.momentProperties=[],v=!1;function S(e,t){var i,n,a,s=g.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=m(t)),l(t._locale)||(e._locale=t._locale),s>0)for(i=0;i<s;i++)l(a=t[n=g[i]])||(e[n]=a);return e}function M(e){S(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,n.updateOffset(this),v=!1)}function y(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function T(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(e,t){var i=!0;return p((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),i){var a,s,r,l=[],d=arguments.length;for(s=0;s<d;s++){if(a="","object"==typeof arguments[s]){for(r in a+="\n["+s+"] ",arguments[0])o(arguments[0],r)&&(a+=r+": "+arguments[0][r]+", ");a=a.slice(0,-2)}else a=arguments[s];l.push(a)}T(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)}),t)}var x,A={};function R(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),A[e]||(T(t),A[e]=!0)}function C(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var i,n=p({},e);for(i in t)o(t,i)&&(s(e[i])&&s(t[i])?(n[i]={},p(n[i],e[i]),p(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)o(e,i)&&!o(t,i)&&s(e[i])&&(n[i]=p({},n[i]));return n}function _(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,x=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)o(e,t)&&i.push(t);return i};function O(e,t,i){var n=""+Math.abs(e),a=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var k=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},P={};function F(e,t,i,n){var a=n;"string"==typeof n&&(a=function(){return this[n]()}),e&&(P[e]=a),t&&(P[t[0]]=function(){return O(a.apply(this,arguments),t[1],t[2])}),i&&(P[i]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function I(e,t){return e.isValid()?(t=U(t,e.localeData()),G[t]=G[t]||function(e){var t,i,n,a=e.match(k);for(t=0,i=a.length;t<i;t++)P[a[t]]?a[t]=P[a[t]]:a[t]=(n=a[t]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(t){var n,s="";for(n=0;n<i;n++)s+=C(a[n])?a[n].call(t,e):a[n];return s}}(t),G[t](e)):e.localeData().invalidDate()}function U(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(E.lastIndex=0;i>=0&&E.test(e);)e=e.replace(E,n),E.lastIndex=0,i-=1;return e}var L={};function N(e,t){var i=e.toLowerCase();L[i]=L[i+"s"]=L[t]=e}function V(e){return"string"==typeof e?L[e]||L[e.toLowerCase()]:void 0}function B(e){var t,i,n={};for(i in e)o(e,i)&&(t=V(i))&&(n[t]=e[i]);return n}var z={};function j(e,t){z[e]=t}function $(e){return e%4==0&&e%100!=0||e%400==0}function Y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function W(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=Y(t)),i}function H(e,t){return function(i){return null!=i?(Q(this,e,i),n.updateOffset(this,t),this):J(this,e)}}function J(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&$(e.year())&&1===e.month()&&29===e.date()?(i=W(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Oe(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}var K,q=/\d/,X=/\d\d/,Z=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ie=/\d\d?/,ne=/\d\d\d\d?/,ae=/\d\d\d\d\d\d?/,se=/\d{1,3}/,oe=/\d{1,4}/,re=/[+-]?\d{1,6}/,le=/\d+/,de=/[+-]?\d+/,ce=/Z|[+-]\d\d:?\d\d/gi,ue=/Z|[+-]\d\d(?::?\d\d)?/gi,pe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function he(e,t,i){K[e]=C(t)?t:function(e,n){return e&&i?i:t}}function me(e,t){return o(K,e)?K[e](t._strict,t._locale):new RegExp(be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,n,a){return t||i||n||a}))))}function be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var fe={};function ge(e,t){var i,n,a=t;for("string"==typeof e&&(e=[e]),d(t)&&(a=function(e,i){i[t]=W(e)}),n=e.length,i=0;i<n;i++)fe[e[i]]=a}function ve(e,t){ge(e,(function(e,i,n,a){n._w=n._w||{},t(e,n._w,n,a)}))}function Se(e,t,i){null!=t&&o(fe,e)&&fe[e](t,i._a,i,e)}var Me,ye=0,Te=1,we=2,xe=3,Ae=4,Re=5,Ce=6,De=7,_e=8;function Oe(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,n=(t%(i=12)+i)%i;return e+=(t-n)/12,1===n?$(e)?29:28:31-n%7%2}Me=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),F("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),N("month","M"),j("month",8),he("M",ie),he("MM",ie,X),he("MMM",(function(e,t){return t.monthsShortRegex(e)})),he("MMMM",(function(e,t){return t.monthsRegex(e)})),ge(["M","MM"],(function(e,t){t[Te]=W(e)-1})),ge(["MMM","MMMM"],(function(e,t,i,n){var a=i._locale.monthsParse(e,n,i._strict);null!=a?t[Te]=a:m(i).invalidMonth=e}));var ke="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ge=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe=pe,Fe=pe;function Ie(e,t,i){var n,a,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(a=Me.call(this._shortMonthsParse,o))?a:null:-1!==(a=Me.call(this._longMonthsParse,o))?a:null:"MMM"===t?-1!==(a=Me.call(this._shortMonthsParse,o))||-1!==(a=Me.call(this._longMonthsParse,o))?a:null:-1!==(a=Me.call(this._longMonthsParse,o))||-1!==(a=Me.call(this._shortMonthsParse,o))?a:null}function Ue(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=W(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),Oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Le(e){return null!=e?(Ue(this,e),n.updateOffset(this,!0),this):J(this,"Month")}function Ne(){function e(e,t){return t.length-e.length}var t,i,n=[],a=[],s=[];for(t=0;t<12;t++)i=h([2e3,t]),n.push(this.monthsShort(i,"")),a.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(e),a.sort(e),s.sort(e),t=0;t<12;t++)n[t]=be(n[t]),a[t]=be(a[t]);for(t=0;t<24;t++)s[t]=be(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ve(e){return $(e)?366:365}F("Y",0,0,(function(){var e=this.year();return e<=9999?O(e,4):"+"+e})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),N("year","y"),j("year",1),he("Y",de),he("YY",ie,X),he("YYYY",oe,ee),he("YYYYY",re,te),he("YYYYYY",re,te),ge(["YYYYY","YYYYYY"],ye),ge("YYYY",(function(e,t){t[ye]=2===e.length?n.parseTwoDigitYear(e):W(e)})),ge("YY",(function(e,t){t[ye]=n.parseTwoDigitYear(e)})),ge("Y",(function(e,t){t[ye]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return W(e)+(W(e)>68?1900:2e3)};var Be=H("FullYear",!0);function ze(e,t,i,n,a,s,o){var r;return e<100&&e>=0?(r=new Date(e+400,t,i,n,a,s,o),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,i,n,a,s,o),r}function je(e){var t,i;return e<100&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function $e(e,t,i){var n=7+t-i;return-(7+je(e,0,n).getUTCDay()-t)%7+n-1}function Ye(e,t,i,n,a){var s,o,r=1+7*(t-1)+(7+i-n)%7+$e(e,n,a);return r<=0?o=Ve(s=e-1)+r:r>Ve(e)?(s=e+1,o=r-Ve(e)):(s=e,o=r),{year:s,dayOfYear:o}}function We(e,t,i){var n,a,s=$e(e.year(),t,i),o=Math.floor((e.dayOfYear()-s-1)/7)+1;return o<1?n=o+He(a=e.year()-1,t,i):o>He(e.year(),t,i)?(n=o-He(e.year(),t,i),a=e.year()+1):(a=e.year(),n=o),{week:n,year:a}}function He(e,t,i){var n=$e(e,t,i),a=$e(e+1,t,i);return(Ve(e)-n+a)/7}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),j("week",5),j("isoWeek",5),he("w",ie),he("ww",ie,X),he("W",ie),he("WW",ie,X),ve(["w","ww","W","WW"],(function(e,t,i,n){t[n.substr(0,1)]=W(e)}));function Je(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("d",0,"do","day"),F("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),F("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),F("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),he("d",ie),he("e",ie),he("E",ie),he("dd",(function(e,t){return t.weekdaysMinRegex(e)})),he("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),he("dddd",(function(e,t){return t.weekdaysRegex(e)})),ve(["dd","ddd","dddd"],(function(e,t,i,n){var a=i._locale.weekdaysParse(e,n,i._strict);null!=a?t.d=a:m(i).invalidWeekday=e})),ve(["d","e","E"],(function(e,t,i,n){t[n]=W(e)}));var Qe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Xe=pe,Ze=pe,et=pe;function tt(e,t,i){var n,a,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(a=Me.call(this._weekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Me.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=Me.call(this._minWeekdaysParse,o))?a:null:"dddd"===t?-1!==(a=Me.call(this._weekdaysParse,o))||-1!==(a=Me.call(this._shortWeekdaysParse,o))||-1!==(a=Me.call(this._minWeekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Me.call(this._shortWeekdaysParse,o))||-1!==(a=Me.call(this._weekdaysParse,o))||-1!==(a=Me.call(this._minWeekdaysParse,o))?a:null:-1!==(a=Me.call(this._minWeekdaysParse,o))||-1!==(a=Me.call(this._weekdaysParse,o))||-1!==(a=Me.call(this._shortWeekdaysParse,o))?a:null}function it(){function e(e,t){return t.length-e.length}var t,i,n,a,s,o=[],r=[],l=[],d=[];for(t=0;t<7;t++)i=h([2e3,1]).day(t),n=be(this.weekdaysMin(i,"")),a=be(this.weekdaysShort(i,"")),s=be(this.weekdays(i,"")),o.push(n),r.push(a),l.push(s),d.push(n),d.push(a),d.push(s);o.sort(e),r.sort(e),l.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function nt(){return this.hours()%12||12}function at(e,t){F(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function st(e,t){return t._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,nt),F("k",["kk",2],0,(function(){return this.hours()||24})),F("hmm",0,0,(function(){return""+nt.apply(this)+O(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+nt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+O(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)})),at("a",!0),at("A",!1),N("hour","h"),j("hour",13),he("a",st),he("A",st),he("H",ie),he("h",ie),he("k",ie),he("HH",ie,X),he("hh",ie,X),he("kk",ie,X),he("hmm",ne),he("hmmss",ae),he("Hmm",ne),he("Hmmss",ae),ge(["H","HH"],xe),ge(["k","kk"],(function(e,t,i){var n=W(e);t[xe]=24===n?0:n})),ge(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e})),ge(["h","hh"],(function(e,t,i){t[xe]=W(e),m(i).bigHour=!0})),ge("hmm",(function(e,t,i){var n=e.length-2;t[xe]=W(e.substr(0,n)),t[Ae]=W(e.substr(n)),m(i).bigHour=!0})),ge("hmmss",(function(e,t,i){var n=e.length-4,a=e.length-2;t[xe]=W(e.substr(0,n)),t[Ae]=W(e.substr(n,2)),t[Re]=W(e.substr(a)),m(i).bigHour=!0})),ge("Hmm",(function(e,t,i){var n=e.length-2;t[xe]=W(e.substr(0,n)),t[Ae]=W(e.substr(n))})),ge("Hmmss",(function(e,t,i){var n=e.length-4,a=e.length-2;t[xe]=W(e.substr(0,n)),t[Ae]=W(e.substr(n,2)),t[Re]=W(e.substr(a))}));var ot=H("Hours",!0);var rt,lt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ke,monthsShort:Ee,week:{dow:0,doy:6},weekdays:Qe,weekdaysMin:qe,weekdaysShort:Ke,meridiemParse:/[ap]\.?m?\.?/i},dt={},ct={};function ut(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function pt(e){return e?e.toLowerCase().replace("_","-"):e}function ht(t){var i=null;if(void 0===dt[t]&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{i=rt._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mt(i)}catch(e){dt[t]=null}return dt[t]}function mt(e,t){var i;return e&&((i=l(t)?ft(e):bt(e,t))?rt=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rt._abbr}function bt(e,t){if(null!==t){var i,n=lt;if(t.abbr=e,null!=dt[e])R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=dt[e]._config;else if(null!=t.parentLocale)if(null!=dt[t.parentLocale])n=dt[t.parentLocale]._config;else{if(null==(i=ht(t.parentLocale)))return ct[t.parentLocale]||(ct[t.parentLocale]=[]),ct[t.parentLocale].push({name:e,config:t}),null;n=i._config}return dt[e]=new _(D(n,t)),ct[e]&&ct[e].forEach((function(e){bt(e.name,e.config)})),mt(e),dt[e]}return delete dt[e],null}function ft(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rt;if(!a(e)){if(t=ht(e))return t;e=[e]}return function(e){for(var t,i,n,a,s=0;s<e.length;){for(t=(a=pt(e[s]).split("-")).length,i=(i=pt(e[s+1]))?i.split("-"):null;t>0;){if(n=ht(a.slice(0,t).join("-")))return n;if(i&&i.length>=t&&ut(a,i)>=t-1)break;t--}s++}return rt}(e)}function gt(e){var t,i=e._a;return i&&-2===m(e).overflow&&(t=i[Te]<0||i[Te]>11?Te:i[we]<1||i[we]>Oe(i[ye],i[Te])?we:i[xe]<0||i[xe]>24||24===i[xe]&&(0!==i[Ae]||0!==i[Re]||0!==i[Ce])?xe:i[Ae]<0||i[Ae]>59?Ae:i[Re]<0||i[Re]>59?Re:i[Ce]<0||i[Ce]>999?Ce:-1,m(e)._overflowDayOfYear&&(t<ye||t>we)&&(t=we),m(e)._overflowWeeks&&-1===t&&(t=De),m(e)._overflowWeekday&&-1===t&&(t=_e),m(e).overflow=t),e}var vt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,St=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Tt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,xt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,At={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Rt(e){var t,i,n,a,s,o,r=e._i,l=vt.exec(r)||St.exec(r),d=yt.length,c=Tt.length;if(l){for(m(e).iso=!0,t=0,i=d;t<i;t++)if(yt[t][1].exec(l[1])){a=yt[t][0],n=!1!==yt[t][2];break}if(null==a)return void(e._isValid=!1);if(l[3]){for(t=0,i=c;t<i;t++)if(Tt[t][1].exec(l[3])){s=(l[2]||" ")+Tt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!n&&null!=s)return void(e._isValid=!1);if(l[4]){if(!Mt.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=a+(s||"")+(o||""),kt(e)}else e._isValid=!1}function Ct(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dt(e){var t,i,n,a,s,o,r,l,d=xt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(d){if(i=d[4],n=d[3],a=d[2],s=d[5],o=d[6],r=d[7],l=[Ct(i),Ee.indexOf(n),parseInt(a,10),parseInt(s,10),parseInt(o,10)],r&&l.push(parseInt(r,10)),t=l,!function(e,t,i){return!e||Ke.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(i).weekdayMismatch=!0,i._isValid=!1,!1)}(d[1],t,e))return;e._a=t,e._tzm=function(e,t,i){if(e)return At[e];if(t)return 0;var n=parseInt(i,10),a=n%100;return(n-a)/100*60+a}(d[8],d[9],d[10]),e._d=je.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function _t(e,t,i){return null!=e?e:null!=t?t:i}function Ot(e){var t,i,a,s,o,r=[];if(!e._d){for(a=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[we]&&null==e._a[Te]&&function(e){var t,i,n,a,s,o,r,l,d;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,o=4,i=_t(t.GG,e._a[ye],We(Pt(),1,4).year),n=_t(t.W,1),((a=_t(t.E,1))<1||a>7)&&(l=!0)):(s=e._locale._week.dow,o=e._locale._week.doy,d=We(Pt(),s,o),i=_t(t.gg,e._a[ye],d.year),n=_t(t.w,d.week),null!=t.d?((a=t.d)<0||a>6)&&(l=!0):null!=t.e?(a=t.e+s,(t.e<0||t.e>6)&&(l=!0)):a=s),n<1||n>He(i,s,o)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(r=Ye(i,n,a,s,o),e._a[ye]=r.year,e._dayOfYear=r.dayOfYear)}(e),null!=e._dayOfYear&&(o=_t(e._a[ye],a[ye]),(e._dayOfYear>Ve(o)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),i=je(o,0,e._dayOfYear),e._a[Te]=i.getUTCMonth(),e._a[we]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[xe]&&0===e._a[Ae]&&0===e._a[Re]&&0===e._a[Ce]&&(e._nextDay=!0,e._a[xe]=0),e._d=(e._useUTC?je:ze).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[xe]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(m(e).weekdayMismatch=!0)}}function kt(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],m(e).empty=!0;var t,i,a,s,o,r,l,d=""+e._i,c=d.length,u=0;for(l=(a=U(e._f,e._locale).match(k)||[]).length,t=0;t<l;t++)s=a[t],(i=(d.match(me(s,e))||[])[0])&&((o=d.substr(0,d.indexOf(i))).length>0&&m(e).unusedInput.push(o),d=d.slice(d.indexOf(i)+i.length),u+=i.length),P[s]?(i?m(e).empty=!1:m(e).unusedTokens.push(s),Se(s,i,e)):e._strict&&!i&&m(e).unusedTokens.push(s);m(e).charsLeftOver=c-u,d.length>0&&m(e).unusedInput.push(d),e._a[xe]<=12&&!0===m(e).bigHour&&e._a[xe]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[xe]=function(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[xe],e._meridiem),null!==(r=m(e).era)&&(e._a[ye]=e._locale.erasConvertYear(r,e._a[ye])),Ot(e),gt(e)}else Dt(e);else Rt(e)}function Et(e){var t=e._i,i=e._f;return e._locale=e._locale||ft(e._l),null===t||void 0===i&&""===t?f({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new M(gt(t)):(c(t)?e._d=t:a(i)?function(e){var t,i,n,a,s,o,r=!1,l=e._f.length;if(0===l)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<l;a++)s=0,o=!1,t=S({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],kt(t),b(t)&&(o=!0),s+=m(t).charsLeftOver,s+=10*m(t).unusedTokens.length,m(t).score=s,r?s<n&&(n=s,i=t):(null==n||s<n||o)&&(n=s,i=t,o&&(r=!0));p(e,i||t)}(e):i?kt(e):function(e){var t=e._i;l(t)?e._d=new Date(n.now()):c(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=wt.exec(e._i);null===t?(Rt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):a(t)?(e._a=u(t.slice(0),(function(e){return parseInt(e,10)})),Ot(e)):s(t)?function(e){if(!e._d){var t=B(e._i),i=void 0===t.day?t.date:t.day;e._a=u([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Ot(e)}}(e):d(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),b(e)||(e._d=null),e))}function Gt(e,t,i,n,o){var l,d={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==i&&!1!==i||(n=i,i=void 0),(s(e)&&r(e)||a(e)&&0===e.length)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=o,d._l=i,d._i=e,d._f=t,d._strict=n,(l=new M(gt(Et(d))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Pt(e,t,i,n){return Gt(e,t,i,n,!1)}n.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Ft=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Pt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:f()})),It=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Pt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:f()}));function Ut(e,t){var i,n;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Pt();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}var Lt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nt(e){var t=B(e),i=t.year||0,n=t.quarter||0,a=t.month||0,s=t.week||t.isoWeek||0,r=t.day||0,l=t.hour||0,d=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,i,n=!1,a=Lt.length;for(t in e)if(o(e,t)&&(-1===Me.call(Lt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<a;++i)if(e[Lt[i]]){if(n)return!1;parseFloat(e[Lt[i]])!==W(e[Lt[i]])&&(n=!0)}return!0}(t),this._milliseconds=+u+1e3*c+6e4*d+1e3*l*60*60,this._days=+r+7*s,this._months=+a+3*n+12*i,this._data={},this._locale=ft(),this._bubble()}function Vt(e){return e instanceof Nt}function Bt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function zt(e,t){F(e,0,0,(function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+O(~~(e/60),2)+t+O(~~e%60,2)}))}zt("Z",":"),zt("ZZ",""),he("Z",ue),he("ZZ",ue),ge(["Z","ZZ"],(function(e,t,i){i._useUTC=!0,i._tzm=$t(ue,e)}));var jt=/([\+\-]|\d\d)/gi;function $t(e,t){var i,n,a=(t||"").match(e);return null===a?null:0===(n=60*(i=((a[a.length-1]||[])+"").match(jt)||["-",0,0])[1]+W(i[2]))?0:"+"===i[0]?n:-n}function Yt(e,t){var i,a;return t._isUTC?(i=t.clone(),a=(y(e)||c(e)?e.valueOf():Pt(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+a),n.updateOffset(i,!1),i):Pt(e).local()}function Wt(e){return-Math.round(e._d.getTimezoneOffset())}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Qt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Kt(e,t){var i,n,a,s,r,l,c=e,u=null;return Vt(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(c={},t?c[t]=+e:c.milliseconds=+e):(u=Jt.exec(e))?(i="-"===u[1]?-1:1,c={y:0,d:W(u[we])*i,h:W(u[xe])*i,m:W(u[Ae])*i,s:W(u[Re])*i,ms:W(Bt(1e3*u[Ce]))*i}):(u=Qt.exec(e))?(i="-"===u[1]?-1:1,c={y:qt(u[2],i),M:qt(u[3],i),w:qt(u[4],i),d:qt(u[5],i),h:qt(u[6],i),m:qt(u[7],i),s:qt(u[8],i)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(s=Pt(c.from),r=Pt(c.to),a=s.isValid()&&r.isValid()?(r=Yt(r,s),s.isBefore(r)?l=Xt(s,r):((l=Xt(r,s)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=a.milliseconds,c.M=a.months),n=new Nt(c),Vt(e)&&o(e,"_locale")&&(n._locale=e._locale),Vt(e)&&o(e,"_isValid")&&(n._isValid=e._isValid),n}function qt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Xt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Zt(e,t){return function(i,n){var a;return null===n||isNaN(+n)||(R(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=i,i=n,n=a),ei(this,Kt(i,n),e),this}}function ei(e,t,i,a){var s=t._milliseconds,o=Bt(t._days),r=Bt(t._months);e.isValid()&&(a=null==a||a,r&&Ue(e,J(e,"Month")+r*i),o&&Q(e,"Date",J(e,"Date")+o*i),s&&e._d.setTime(e._d.valueOf()+s*i),a&&n.updateOffset(e,o||r))}Kt.fn=Nt.prototype,Kt.invalid=function(){return Kt(NaN)};var ti=Zt(1,"add"),ii=Zt(-1,"subtract");function ni(e){return"string"==typeof e||e instanceof String}function ai(e){return y(e)||c(e)||ni(e)||d(e)||function(e){var t=a(e),i=!1;return t&&(i=0===e.filter((function(t){return!d(t)&&ni(e)})).length),t&&i}(e)||function(e){var t,i,n=s(e)&&!r(e),a=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d=l.length;for(t=0;t<d;t+=1)i=l[t],a=a||o(e,i);return n&&a}(e)||null==e}function si(e,t){if(e.date()<t.date())return-si(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ft(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ri=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var di=1e3,ci=6e4,ui=36e5,pi=126227808e5;function hi(e,t){return(e%t+t)%t}function mi(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-pi:new Date(e,t,i).valueOf()}function bi(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-pi:Date.UTC(e,t,i)}function fi(e,t){return t.erasAbbrRegex(e)}function gi(){var e,t,i=[],n=[],a=[],s=[],o=this.eras();for(e=0,t=o.length;e<t;++e)n.push(be(o[e].name)),i.push(be(o[e].abbr)),a.push(be(o[e].narrow)),s.push(be(o[e].name)),s.push(be(o[e].abbr)),s.push(be(o[e].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function vi(e,t){F(0,[e,e.length],0,t)}function Si(e,t,i,n,a){var s;return null==e?We(this,n,a).year:(t>(s=He(e,n,a))&&(t=s),Mi.call(this,e,t,i,n,a))}function Mi(e,t,i,n,a){var s=Ye(e,t,i,n,a),o=je(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),he("N",fi),he("NN",fi),he("NNN",fi),he("NNNN",(function(e,t){return t.erasNameRegex(e)})),he("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ge(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,i,n){var a=i._locale.erasParse(e,n,i._strict);a?m(i).era=a:m(i).invalidEra=e})),he("y",le),he("yy",le),he("yyy",le),he("yyyy",le),he("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),ge(["y","yy","yyy","yyyy"],ye),ge(["yo"],(function(e,t,i,n){var a;i._locale._eraYearOrdinalRegex&&(a=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[ye]=i._locale.eraYearOrdinalParse(e,a):t[ye]=parseInt(e,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),vi("gggg","weekYear"),vi("ggggg","weekYear"),vi("GGGG","isoWeekYear"),vi("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),he("G",de),he("g",de),he("GG",ie,X),he("gg",ie,X),he("GGGG",oe,ee),he("gggg",oe,ee),he("GGGGG",re,te),he("ggggg",re,te),ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,n){t[n.substr(0,2)]=W(e)})),ve(["gg","GG"],(function(e,t,i,a){t[a]=n.parseTwoDigitYear(e)})),F("Q",0,"Qo","quarter"),N("quarter","Q"),j("quarter",7),he("Q",q),ge("Q",(function(e,t){t[Te]=3*(W(e)-1)})),F("D",["DD",2],"Do","date"),N("date","D"),j("date",9),he("D",ie),he("DD",ie,X),he("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ge(["D","DD"],we),ge("Do",(function(e,t){t[we]=W(e.match(ie)[0])}));var yi=H("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),j("dayOfYear",4),he("DDD",se),he("DDDD",Z),ge(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=W(e)})),F("m",["mm",2],0,"minute"),N("minute","m"),j("minute",14),he("m",ie),he("mm",ie,X),ge(["m","mm"],Ae);var Ti=H("Minutes",!1);F("s",["ss",2],0,"second"),N("second","s"),j("second",15),he("s",ie),he("ss",ie,X),ge(["s","ss"],Re);var wi,xi,Ai=H("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),N("millisecond","ms"),j("millisecond",16),he("S",se,q),he("SS",se,X),he("SSS",se,Z),wi="SSSS";wi.length<=9;wi+="S")he(wi,le);function Ri(e,t){t[Ce]=W(1e3*("0."+e))}for(wi="S";wi.length<=9;wi+="S")ge(wi,Ri);xi=H("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var Ci=M.prototype;function Di(e){return e}Ci.add=ti,Ci.calendar=function(e,t){1===arguments.length&&(arguments[0]?ai(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,i=s(e)&&!r(e),n=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=n||o(e,a[t]);return i&&n}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Pt(),a=Yt(i,this).startOf("day"),l=n.calendarFormat(this,a)||"sameElse",d=t&&(C(t[l])?t[l].call(this,i):t[l]);return this.format(d||this.localeData().calendar(l,this,Pt(i)))},Ci.clone=function(){return new M(this)},Ci.diff=function(e,t,i){var n,a,s;if(!this.isValid())return NaN;if(!(n=Yt(e,this)).isValid())return NaN;switch(a=6e4*(n.utcOffset()-this.utcOffset()),t=V(t)){case"year":s=si(this,n)/12;break;case"month":s=si(this,n);break;case"quarter":s=si(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-a)/864e5;break;case"week":s=(this-n-a)/6048e5;break;default:s=this-n}return i?s:Y(s)},Ci.endOf=function(e){var t,i;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?bi:mi,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ui-hi(t+(this._isUTC?0:this.utcOffset()*ci),ui)-1;break;case"minute":t=this._d.valueOf(),t+=ci-hi(t,ci)-1;break;case"second":t=this._d.valueOf(),t+=di-hi(t,di)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},Ci.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=I(this,e);return this.localeData().postformat(t)},Ci.from=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||Pt(e).isValid())?Kt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ci.fromNow=function(e){return this.from(Pt(),e)},Ci.to=function(e,t){return this.isValid()&&(y(e)&&e.isValid()||Pt(e).isValid())?Kt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ci.toNow=function(e){return this.to(Pt(),e)},Ci.get=function(e){return C(this[e=V(e)])?this[e]():this},Ci.invalidAt=function(){return m(this).overflow},Ci.isAfter=function(e,t){var i=y(e)?e:Pt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},Ci.isBefore=function(e,t){var i=y(e)?e:Pt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},Ci.isBetween=function(e,t,i,n){var a=y(e)?e:Pt(e),s=y(t)?t:Pt(t);return!!(this.isValid()&&a.isValid()&&s.isValid())&&("("===(n=n||"()")[0]?this.isAfter(a,i):!this.isBefore(a,i))&&(")"===n[1]?this.isBefore(s,i):!this.isAfter(s,i))},Ci.isSame=function(e,t){var i,n=y(e)?e:Pt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},Ci.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Ci.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Ci.isValid=function(){return b(this)},Ci.lang=ri,Ci.locale=oi,Ci.localeData=li,Ci.max=It,Ci.min=Ft,Ci.parsingFlags=function(){return p({},m(this))},Ci.set=function(e,t){if("object"==typeof e){var i,n=function(e){var t,i=[];for(t in e)o(e,t)&&i.push({unit:t,priority:z[t]});return i.sort((function(e,t){return e.priority-t.priority})),i}(e=B(e)),a=n.length;for(i=0;i<a;i++)this[n[i].unit](e[n[i].unit])}else if(C(this[e=V(e)]))return this[e](t);return this},Ci.startOf=function(e){var t,i;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?bi:mi,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hi(t+(this._isUTC?0:this.utcOffset()*ci),ui);break;case"minute":t=this._d.valueOf(),t-=hi(t,ci);break;case"second":t=this._d.valueOf(),t-=hi(t,di)}return this._d.setTime(t),n.updateOffset(this,!0),this},Ci.subtract=ii,Ci.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Ci.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Ci.toDate=function(){return new Date(this.valueOf())},Ci.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?I(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",I(i,"Z")):I(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Ci.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n="moment",a="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+n+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",i=a+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+i)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Ci[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Ci.toJSON=function(){return this.isValid()?this.toISOString():null},Ci.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Ci.unix=function(){return Math.floor(this.valueOf()/1e3)},Ci.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Ci.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Ci.eraName=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].name;if(n[e].until<=i&&i<=n[e].since)return n[e].name}return""},Ci.eraNarrow=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].narrow;if(n[e].until<=i&&i<=n[e].since)return n[e].narrow}return""},Ci.eraAbbr=function(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].abbr;if(n[e].until<=i&&i<=n[e].since)return n[e].abbr}return""},Ci.eraYear=function(){var e,t,i,a,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=s[e].since<=s[e].until?1:-1,a=this.clone().startOf("day").valueOf(),s[e].since<=a&&a<=s[e].until||s[e].until<=a&&a<=s[e].since)return(this.year()-n(s[e].since).year())*i+s[e].offset;return this.year()},Ci.year=Be,Ci.isLeapYear=function(){return $(this.year())},Ci.weekYear=function(e){return Si.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Ci.isoWeekYear=function(e){return Si.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Ci.quarter=Ci.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Ci.month=Le,Ci.daysInMonth=function(){return Oe(this.year(),this.month())},Ci.week=Ci.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Ci.isoWeek=Ci.isoWeeks=function(e){var t=We(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Ci.weeksInYear=function(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)},Ci.weeksInWeekYear=function(){var e=this.localeData()._week;return He(this.weekYear(),e.dow,e.doy)},Ci.isoWeeksInYear=function(){return He(this.year(),1,4)},Ci.isoWeeksInISOWeekYear=function(){return He(this.isoWeekYear(),1,4)},Ci.date=yi,Ci.day=Ci.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Ci.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Ci.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Ci.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Ci.hour=Ci.hours=ot,Ci.minute=Ci.minutes=Ti,Ci.second=Ci.seconds=Ai,Ci.millisecond=Ci.milliseconds=xi,Ci.utcOffset=function(e,t,i){var a,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=$t(ue,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(a=Wt(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),s!==e&&(!t||this._changeInProgress?ei(this,Kt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Wt(this)},Ci.utc=function(e){return this.utcOffset(0,e)},Ci.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Wt(this),"m")),this},Ci.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=$t(ce,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Ci.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Pt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Ci.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Ci.isLocal=function(){return!!this.isValid()&&!this._isUTC},Ci.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Ci.isUtc=Ht,Ci.isUTC=Ht,Ci.zoneAbbr=function(){return this._isUTC?"UTC":""},Ci.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Ci.dates=w("dates accessor is deprecated. Use date instead.",yi),Ci.months=w("months accessor is deprecated. Use month instead",Le),Ci.years=w("years accessor is deprecated. Use year instead",Be),Ci.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),Ci.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return S(t,this),(t=Et(t))._a?(e=t._isUTC?h(t._a):Pt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,i){var n,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(n=0;n<a;n++)(i&&e[n]!==t[n]||!i&&W(e[n])!==W(t[n]))&&o++;return o+s}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var _i=_.prototype;function Oi(e,t,i,n){var a=ft(),s=h().set(n,t);return a[i](s,e)}function ki(e,t,i){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return Oi(e,t,i,"month");var n,a=[];for(n=0;n<12;n++)a[n]=Oi(e,n,i,"month");return a}function Ei(e,t,i,n){"boolean"==typeof e?(d(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,d(t)&&(i=t,t=void 0),t=t||"");var a,s=ft(),o=e?s._week.dow:0,r=[];if(null!=i)return Oi(t,(i+o)%7,n,"day");for(a=0;a<7;a++)r[a]=Oi(t,(a+o)%7,n,"day");return r}_i.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return C(n)?n.call(t,i):n},_i.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(k).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},_i.invalidDate=function(){return this._invalidDate},_i.ordinal=function(e){return this._ordinal.replace("%d",e)},_i.preparse=Di,_i.postformat=Di,_i.relativeTime=function(e,t,i,n){var a=this._relativeTime[i];return C(a)?a(e,t,i,n):a.replace(/%d/i,e)},_i.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return C(i)?i(t):i.replace(/%s/i,t)},_i.set=function(e){var t,i;for(i in e)o(e,i)&&(C(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},_i.eras=function(e,t){var i,a,s,o=this._eras||ft("en")._eras;for(i=0,a=o.length;i<a;++i)switch("string"==typeof o[i].since&&(s=n(o[i].since).startOf("day"),o[i].since=s.valueOf()),typeof o[i].until){case"undefined":o[i].until=1/0;break;case"string":s=n(o[i].until).startOf("day").valueOf(),o[i].until=s.valueOf()}return o},_i.erasParse=function(e,t,i){var n,a,s,o,r,l=this.eras();for(e=e.toUpperCase(),n=0,a=l.length;n<a;++n)if(s=l[n].name.toUpperCase(),o=l[n].abbr.toUpperCase(),r=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[n];break;case"NNNN":if(s===e)return l[n];break;case"NNNNN":if(r===e)return l[n]}else if([s,o,r].indexOf(e)>=0)return l[n]},_i.erasConvertYear=function(e,t){var i=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*i},_i.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||gi.call(this),e?this._erasAbbrRegex:this._erasRegex},_i.erasNameRegex=function(e){return o(this,"_erasNameRegex")||gi.call(this),e?this._erasNameRegex:this._erasRegex},_i.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||gi.call(this),e?this._erasNarrowRegex:this._erasRegex},_i.months=function(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ge).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone},_i.monthsShort=function(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ge.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},_i.monthsParse=function(e,t,i){var n,a,s;if(this._monthsParseExact)return Ie.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=h([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_i.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Fe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},_i.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Pe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},_i.week=function(e){return We(e,this._week.dow,this._week.doy).week},_i.firstDayOfYear=function(){return this._week.doy},_i.firstDayOfWeek=function(){return this._week.dow},_i.weekdays=function(e,t){var i=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Je(i,this._week.dow):e?i[e.day()]:i},_i.weekdaysMin=function(e){return!0===e?Je(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},_i.weekdaysShort=function(e){return!0===e?Je(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},_i.weekdaysParse=function(e,t,i){var n,a,s;if(this._weekdaysParseExact)return tt.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=h([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},_i.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Xe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},_i.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ze),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},_i.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=et),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},_i.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},_i.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},mt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===W(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=w("moment.lang is deprecated. Use moment.locale instead.",mt),n.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ft);var Gi=Math.abs;function Pi(e,t,i,n){var a=Kt(t,i);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function Fi(e){return e<0?Math.floor(e):Math.ceil(e)}function Ii(e){return 4800*e/146097}function Ui(e){return 146097*e/4800}function Li(e){return function(){return this.as(e)}}var Ni=Li("ms"),Vi=Li("s"),Bi=Li("m"),zi=Li("h"),ji=Li("d"),$i=Li("w"),Yi=Li("M"),Wi=Li("Q"),Hi=Li("y");function Ji(e){return function(){return this.isValid()?this._data[e]:NaN}}var Qi=Ji("milliseconds"),Ki=Ji("seconds"),qi=Ji("minutes"),Xi=Ji("hours"),Zi=Ji("days"),en=Ji("months"),tn=Ji("years");var nn=Math.round,an={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function sn(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}var on=Math.abs;function rn(e){return(e>0)-(e<0)||+e}function ln(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,a,s,o,r,l=on(this._milliseconds)/1e3,d=on(this._days),c=on(this._months),u=this.asSeconds();return u?(e=Y(l/60),t=Y(e/60),l%=60,e%=60,i=Y(c/12),c%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",a=u<0?"-":"",s=rn(this._months)!==rn(u)?"-":"",o=rn(this._days)!==rn(u)?"-":"",r=rn(this._milliseconds)!==rn(u)?"-":"",a+"P"+(i?s+i+"Y":"")+(c?s+c+"M":"")+(d?o+d+"D":"")+(t||e||l?"T":"")+(t?r+t+"H":"")+(e?r+e+"M":"")+(l?r+n+"S":"")):"P0D"}var dn=Nt.prototype;return dn.isValid=function(){return this._isValid},dn.abs=function(){var e=this._data;return this._milliseconds=Gi(this._milliseconds),this._days=Gi(this._days),this._months=Gi(this._months),e.milliseconds=Gi(e.milliseconds),e.seconds=Gi(e.seconds),e.minutes=Gi(e.minutes),e.hours=Gi(e.hours),e.months=Gi(e.months),e.years=Gi(e.years),this},dn.add=function(e,t){return Pi(this,e,t,1)},dn.subtract=function(e,t){return Pi(this,e,t,-1)},dn.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+Ii(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Ui(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},dn.asMilliseconds=Ni,dn.asSeconds=Vi,dn.asMinutes=Bi,dn.asHours=zi,dn.asDays=ji,dn.asWeeks=$i,dn.asMonths=Yi,dn.asQuarters=Wi,dn.asYears=Hi,dn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*W(this._months/12):NaN},dn._bubble=function(){var e,t,i,n,a,s=this._milliseconds,o=this._days,r=this._months,l=this._data;return s>=0&&o>=0&&r>=0||s<=0&&o<=0&&r<=0||(s+=864e5*Fi(Ui(r)+o),o=0,r=0),l.milliseconds=s%1e3,e=Y(s/1e3),l.seconds=e%60,t=Y(e/60),l.minutes=t%60,i=Y(t/60),l.hours=i%24,o+=Y(i/24),r+=a=Y(Ii(o)),o-=Fi(Ui(a)),n=Y(r/12),r%=12,l.days=o,l.months=r,l.years=n,this},dn.clone=function(){return Kt(this)},dn.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},dn.milliseconds=Qi,dn.seconds=Ki,dn.minutes=qi,dn.hours=Xi,dn.days=Zi,dn.weeks=function(){return Y(this.days()/7)},dn.months=en,dn.years=tn,dn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,a=!1,s=an;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(a=e),"object"==typeof t&&(s=Object.assign({},an,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),n=function(e,t,i,n){var a=Kt(e).abs(),s=nn(a.as("s")),o=nn(a.as("m")),r=nn(a.as("h")),l=nn(a.as("d")),d=nn(a.as("M")),c=nn(a.as("w")),u=nn(a.as("y")),p=s<=i.ss&&["s",s]||s<i.s&&["ss",s]||o<=1&&["m"]||o<i.m&&["mm",o]||r<=1&&["h"]||r<i.h&&["hh",r]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(p=p||c<=1&&["w"]||c<i.w&&["ww",c]),(p=p||d<=1&&["M"]||d<i.M&&["MM",d]||u<=1&&["y"]||["yy",u])[2]=t,p[3]=+e>0,p[4]=n,sn.apply(null,p)}(this,!a,s,i=this.localeData()),a&&(n=i.pastFuture(+this,n)),i.postformat(n)},dn.toISOString=ln,dn.toString=ln,dn.toJSON=ln,dn.locale=oi,dn.localeData=li,dn.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ln),dn.lang=ri,F("X",0,0,"unix"),F("x",0,0,"valueOf"),he("x",de),he("X",/[+-]?\d+(\.\d{1,3})?/),ge("X",(function(e,t,i){i._d=new Date(1e3*parseFloat(e))})),ge("x",(function(e,t,i){i._d=new Date(W(e))})),n.version="2.29.4",t=Pt,n.fn=Ci,n.min=function(){return Ut("isBefore",[].slice.call(arguments,0))},n.max=function(){return Ut("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=h,n.unix=function(e){return Pt(1e3*e)},n.months=function(e,t){return ki(e,t,"months")},n.isDate=c,n.locale=mt,n.invalid=f,n.duration=Kt,n.isMoment=y,n.weekdays=function(e,t,i){return Ei(e,t,i,"weekdays")},n.parseZone=function(){return Pt.apply(null,arguments).parseZone()},n.localeData=ft,n.isDuration=Vt,n.monthsShort=function(e,t){return ki(e,t,"monthsShort")},n.weekdaysMin=function(e,t,i){return Ei(e,t,i,"weekdaysMin")},n.defineLocale=bt,n.updateLocale=function(e,t){if(null!=t){var i,n,a=lt;null!=dt[e]&&null!=dt[e].parentLocale?dt[e].set(D(dt[e]._config,t)):(null!=(n=ht(e))&&(a=n._config),t=D(a,t),null==n&&(t.abbr=e),(i=new _(t)).parentLocale=dt[e],dt[e]=i),mt(e)}else null!=dt[e]&&(null!=dt[e].parentLocale?(dt[e]=dt[e].parentLocale,e===mt()&&mt(e)):null!=dt[e]&&delete dt[e]);return dt[e]},n.locales=function(){return x(dt)},n.weekdaysShort=function(e,t,i){return Ei(e,t,i,"weekdaysShort")},n.normalizeUnits=V,n.relativeTimeRounding=function(e){return void 0===e?nn:"function"==typeof e&&(nn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==an[e]&&(void 0===t?an[e]:(an[e]=t,"s"===e&&(an.ss=t-1),!0))},n.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},n.prototype=Ci,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()},4889:function(e,t,i){!function(e,t){"use strict";if(!e.setImmediate){var i,n,a,s,o,r=1,l={},d=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?i=function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),i=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},i=function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,i=function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return l[r]=a,i(r),r++},u.clearImmediate=p}function p(e){delete l[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(undefined,i)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===i.g?this:i.g:self)},1491:(e,t,i)=>{const{Timer:n}=i(7241);t.Timer=n},7241:(e,t)=>{class i{constructor(e={}){const{label:t,startTimestamp:i,endTimestamp:n,currentStartTimestamp:a,pauseCount:s,accumulatedMs:o}=e,r=i>=0&&i<Date.now()?i:void 0,l=r>=0&&n>0&&n>r?n:void 0,d=a>=r&&(!l||a<l)?a:r,c=i>=0&&!(void 0!==a)&&s>0;this._label=t||"",this._startTimestamp=r,this._currentStartTimestamp=c?void 0:d,this._endTimestamp=l,this._pauseCount=s||0,this._accumulatedMs=o||0}getLabel(){return this._label}isStarted(){return this._startTimestamp>=0}isPaused(){return this.isStarted()&&void 0===this._currentStartTimestamp}isStopped(){return this._endTimestamp>0}isRunning(){return this.isStarted()&&!this.isPaused()&&!this.isStopped()}start(){return this.isStarted()&&!this.isStopped()||(this.clear(),this._startTimestamp=Date.now(),this._currentStartTimestamp=this._startTimestamp),this}pause(){return this.isPaused()||!this.isStarted()||this.isStopped()||(this._pauseCount+=1,this._accumulatedMs+=Date.now()-this._currentStartTimestamp,this._currentStartTimestamp=void 0),this}resume(){return!this.isPaused()||this.isStopped()||(this._currentStartTimestamp=Date.now()),this}stop(){return this.isStarted()?(this._endTimestamp=Date.now(),this):this}ms(){return this.isStarted()?this.isPaused()?this._accumulatedMs:(this._endTimestamp||Date.now())-this._currentStartTimestamp+this._accumulatedMs:0}pauseMs(){return this.isStarted()?(this._endTimestamp||Date.now())-this._startTimestamp-this.ms():0}_getTime(e){const t=Math.floor(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60);return{ms:e%1e3,s:t%60,m:i%60,h:n%24,d:Math.floor(n/24)}}time(){return this._getTime(this.ms())}pauseTime(){return this._getTime(this.pauseMs())}pauseCount(){return this._pauseCount}startedAt(){return this._startTimestamp}stoppedAt(){return this._endTimestamp}format(e="%label%d d, %h h, %m m, %s s, %ms ms"){const t=this.time();return e.replace("%label",this._label?`${this._label}: `:"").replace("%ms",t.ms).replace("%s",t.s).replace("%m",t.m).replace("%h",t.h).replace("%d",t.d)}clear(){return this._startTimestamp=void 0,this._currentStartTimestamp=void 0,this._endTimestamp=void 0,this._accumulatedMs=0,this._pauseCount=0,this}serialize(){return JSON.stringify({startTimestamp:this._startTimestamp,currentStartTimestamp:this._currentStartTimestamp,endTimestamp:this._endTimestamp,accumulatedMs:this._accumulatedMs,pauseCount:this._pauseCount,label:this._label})}static deserialize(e){return new i(JSON.parse(e))}static benchmark(e){if("function"!=typeof e)throw new Error("Timer.benchmark expects a function");const t=new i({label:e.name}).start();return e(),t.stop()}}t.Timer=i},5475:function(e,t,i){var n=void 0!==i.g&&i.g||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(4889),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==i.g&&i.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==i.g&&i.g.clearImmediate||this&&this.clearImmediate},9061:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SMAddRecipientComponent=t.SMAddRecipientViewModel=void 0;var s=i(1032),o=i(6853),r=i(3720),l=i(2617),d=i(2958),c=i(7883),u=i(8076),p=i(2372),h=function(){function e(e){var t;this.id="addRecipientDialog",this.isMeeting=s.observable(!1),this.title=s.observable(),this.selecting=!1,this.recipients=s.observableArray(),this.auditAdmin=!1,this.allowNonStaffRecipients=!0,this.tabDataSource=s.observableArray([]),this.selectedTab=s.observable(null),this.organizationData=s.observableArray(),this.selectedOrganization=s.observable(),this.sectionData=s.observableArray(),this.selectedSection=s.observable(),this.studentGroupData=s.observableArray(),this.selectedStudentGroup=s.observable(),this.teacherGroupScope=s.observable(0),this.showAdvanced=s.observable(!l.SM.useNewTVUECommunication),this.dummyRecipient=new o.Recipient({contactDetails1:"Animation",contactDetails2:"Dummy",id:"3",recipientList:o.RecipientList.Teachers}),this.staffSearch=s.observable(),this.parentSearch=s.observable(),this.studentSearch=s.observable(),this.classSearch=s.observable(),this.teacherSearch=s.observable(),this.counselorSearch=s.observable(),this.studentGroupSearch=s.observable(),this.massStudentGroupSearch=s.observable(),this.userGroupSearch=s.observable(),this.massEmailSearch=s.observable(),this.contactGroupSearch=s.observable(),this.contactGroupScope=s.observable(0),this.massStudentGroupScope=s.observable(0),this.classScope=s.observable(0),this.modalInitialized=!1,this.loadComplete=!1,this.id=e.options.id,this.auditAdmin=e.options.auditAdmin||!1,this.allowNonStaffRecipients=null!==(t=e.options.allowNonStaffRecipients)&&void 0!==t?t:l.SM.allowNonStaffRecipients,this.showContactGroups=void 0===e.options.showContactGroups||e.options.showContactGroups,this.init(),e.options.onInitialized(this)}return e.instantiate=function(e){var t=l.SM.$("#".concat(e.id));t[0]&&t.parent().remove(),t=$('<sm-add-recipient params="options: addRecipientOptions"></sm-add-recipient>'),l.SM.$("body").append(t),s.applyBindings({addRecipientOptions:e},t[0])},e.prototype.open=function(e,t,i,n,a){var s=this;this.loadComplete=!0,this.isMeeting(i),0===this.organizationData().length?r.OrganizationService.getOrganizations().then((function(e){s.organizationData(e),s.updateOrganizationDistrict(),s.selectCurrentOrganization()})):(this.updateOrganizationDistrict(),this.selectCurrentOrganization()),this.updateTabDataSource(),this.selectedTab(this.tabDataSource()[0]),l.SM.userType!==o.UserType.Staff&&this.teacherSearch().loadData(),this.modalInitialized?l.SM.topWindow().$("#".concat(this.id)).modal("show"):(l.SM.topWindow().$("#".concat(this.id)).stModal({customDialog:!0,keepOnHide:!0,allowClose:!1,draggable:!l.SM.isMobile()}),this.modalInitialized=!0),this.onSave=n,this.onCancel=a,this.title(e),this.recipients(t.slice(0)),setTimeout((function(){s.loadComplete=!0,s.loadRecipientSearchData(),s.recipientTab.focus()}),500)},e.prototype.removeDialog=function(){var e=this;l.SM.topWindow().$("#".concat(this.id)).modal("hide"),setTimeout((function(){l.SM.topWindow().$("#".concat(e.id)).parent().remove()}),200)},e.prototype.init=function(){var e=this;this.filteredOrganizationData=s.pureComputed((function(){return e.organizationData().filter((function(t){var i,n;return l.SM.userType===o.UserType.Staff||l.SM.userType===o.UserType.Student&&(null===(i=e.selectedTab())||void 0===i?void 0:i.id)===o.RecipientList.Students&&l.SM.studentRecipientAccess===o.StudentRecipientAccess.SchoolStaffDistrictStudents||l.SM.userType===o.UserType.Parent&&(null===(n=e.selectedTab())||void 0===n?void 0:n.id)===o.RecipientList.Staff&&l.SM.parentRecipientAccess===o.ParentRecipientAccess.DistrictStaff||t.currentSchool()}))})),this.selectedSection.subscribe((function(t){e.loadRecipientSearchData()})),this.selectSectionOptions={displayExpr:function(e){return e?""===e.id()?e.course():"".concat(e.course()," (ID: ").concat(e.sectionId(),", Term: ").concat(e.term(),", ")+"Period: ".concat(e.period(),", Room: ").concat(e.room(),")"):""},items:this.sectionData,value:this.selectedSection},this.selectedStudentGroup.subscribe((function(t){e.loadRecipientSearchData()})),this.selectStudentGroupOptions={displayExpr:function(e){return e?e.groupName():""},items:this.studentGroupData,value:this.selectedStudentGroup},this.teacherGroupScope.subscribe((function(t){e.loadRecipientSearchData()})),this.teacherGroupScopeOptions={dataSource:[{id:0,text:"Section"},{id:1,text:"Student Group"}],displayExpr:"text",layout:"horizontal",valueExpr:"id",value:this.teacherGroupScope},this.selectedOrganization.subscribe((function(t){(null===l.SM||void 0===l.SM?void 0:l.SM.isTeacher)?(r.RecipientService.getSections({orgFilter:e.selectedOrganization().id(),staffOnly:!0}).then((function(t){e.sectionData(t),l.SM.teacherStudentAccess===o.TeacherStudentAccess.All&&e.sectionData.unshift(new o.Section({id:"",course:"All Sections"}));var i=e.sectionData()[0],n=window.TXP&&TXP.CurrentSectionGUs[0];if(n){var a=e.sectionData().filter((function(e){return e.id()===n}))[0];a&&(i=a)}e.selectedSection(i)})),r.RecipientService.getMassStudentGroups({orgFilter:e.selectedOrganization().id(),ownerOnly:!0}).then((function(t){e.studentGroupData(t),l.SM.teacherStudentAccess===o.TeacherStudentAccess.All&&e.studentGroupData.unshift(new o.StudentGroup({id:"",groupName:"All Groups"}));var i=e.studentGroupData()[0];e.selectedStudentGroup(i)}))):e.selectedTab().recipientSearch().loadData()})),this.selectOrganizationOptions={onContentReady:function(t){0===e.filteredOrganizationData().filter((function(t){return t.id()===e.selectedOrganization().id()})).length&&e.selectedOrganization(e.filteredOrganizationData()[0])},displayExpr:"name",items:this.filteredOrganizationData,value:this.selectedOrganization},this.contactGroupScope.subscribe((function(t){e.loadRecipientSearchData()})),this.contactGroupScopeOptions={dataSource:[{id:0,text:"Show My Contact Lists"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",valueExpr:"id",value:this.contactGroupScope},this.massStudentGroupScope.subscribe((function(t){e.loadRecipientSearchData()})),this.massStudentGroupScopeOptions={dataSource:[{id:0,text:"Show My Student Groups"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",valueExpr:"id",value:this.massStudentGroupScope},this.classScope.subscribe((function(t){e.loadRecipientSearchData()})),this.classScopeOptions={dataSource:[{id:0,text:"Show My Classes"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",valueExpr:"id",value:this.classScope},this.selectedTab.subscribe((function(t){e.updateOrganizationDistrict(),e.selectedTab()&&(e.selectedTab().recipientSearch().repaintGrid(),e.loadRecipientSearchData())})),this.recipientTabOptions={dataSource:this.tabDataSource,itemTemplate:function(e,t,i){i.append('<img src="'.concat(e.icon,'" style="padding-right: 5px;"> ').concat(e.text))},onContentReady:function(t){e.recipientTab=t.component},scrollByContent:!1,scrollingEnabled:!1,showNavButtons:!1,selectedItem:this.selectedTab},this.selectTabOptions={dataSource:this.tabDataSource,fieldTemplate:function(e,t){var i=$('<div style="display: flex; padding: .5rem; align-items: center;"><img src="'.concat(e?e.icon:"",'" style="padding-right: 5px;"> ').concat(e?e.text:"","<div class='text-box'></div></div>"));i.find(".text-box").dxTextBox({value:e&&e.Name,readOnly:!0}),t.append(i)},itemTemplate:function(e,t,i){i.append('<img src="'.concat(e.icon,'" style="padding-right: 5px;"> ').concat(e.text))},onContentReady:function(t){e.selectTab=t.component},value:this.selectedTab},this.staffSearchOptions={onInitialized:function(t){e.staffSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Staff,addRecipientVM:this},this.parentSearchOptions={onInitialized:function(t){e.parentSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Parents,isMeeting:this.isMeeting,addRecipientVM:this},this.studentSearchOptions={onInitialized:function(t){e.studentSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Students,isMeeting:this.isMeeting,addRecipientVM:this},this.classSearchOptions={onInitialized:function(t){e.classSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Classes,addRecipientVM:this},this.teacherSearchOptions={onAddAll:function(t){e.recipientsSelected(t)},onInitialized:function(t){e.teacherSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Teachers,addRecipientVM:this},this.counselorSearchOptions={onInitialized:function(t){e.counselorSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.Counselors,addRecipientVM:this},this.studentGroupSearchOptions={onInitialized:function(t){e.studentGroupSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.StudentGroups,addRecipientVM:this},this.massStudentGroupSearchOptions={onInitialized:function(t){e.massStudentGroupSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.MassStudentGroups,addRecipientVM:this},this.userGroupSearchOptions={onInitialized:function(t){e.userGroupSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.UserGroups,addRecipientVM:this},this.massEmailSearchOptions={onInitialized:function(t){e.massEmailSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.MassEmail,addRecipientVM:this},this.contactGroupSearchOptions={onInitialized:function(t){e.contactGroupSearch(t)},onSelect:function(t,i,n){e.recipientSelected(t,i,n)},onExitGrid:function(){return e.exitGrid()},recipientList:o.RecipientList.ContactGroups,addRecipientVM:this},this.animationBoxOptions={onInitialized:function(t){e.animationBox=t},readOnly:!1,recipient:this.dummyRecipient}},e.prototype.loadRecipientSearchData=function(){var e;null===(e=this.selectedTab())||void 0===e||e.recipientSearch().loadData()},Object.defineProperty(e.prototype,"showPasteStudentIds",{get:function(){var e;return(null===(e=this.selectedTab())||void 0===e?void 0:e.id)===o.RecipientList.Students&&l.SM.currentWebPortal!==o.CurrentWebPortal.ParentVUE&&l.SM.currentWebPortal!==o.CurrentWebPortal.StudentVUE},enumerable:!1,configurable:!0}),e.prototype.pasteStudentIds=function(){return n(this,void 0,void 0,(function(){var e,t,i,n=this;return a(this,(function(a){switch(a.label){case 0:e="",t=!1,a.label=1;case 1:return a.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:return[4,a.sent()[0].getType("text/plain")];case 3:return[4,a.sent().text()];case 4:return e=a.sent(),t=!0,[3,6];case 5:return a.sent(),u.SMDialog.showMessage(u.SMDialogButtons.Ok,"Unable to access the clipboard.","Please ensure that clipboard permissions are allowed for this site and that you are browsing in a secure (HTTPS) mode."),[3,6];case 6:return t&&(1===(i=e.split(",")).length&&(i=e.split(/\r?\n/)),(i=i.filter((function(e){return e}))).length>2e3?u.SMDialog.showMessage(u.SMDialogButtons.Ok,"Exceeded max number of allowed student IDs.","Only 2,000 student IDs are allowed."):r.RecipientService.getRecipients({recipientList:o.RecipientList.Students,sisNumbers:i}).then((function(e){var t=o.Recipient.loadRecipients(e);u.SMDialog.showDialog({message:"Who would you like to address this message to?",onDismissed:function(e){if("Students"===e)n.addRecipients(t,"Student");else if("Parents"===e||"Both"===e){var i=t.map((function(e){return e.id()}));r.RecipientService.getRecipients({recipientList:o.RecipientList.Parents,studentIds:i}).then((function(i){var a=o.Recipient.loadRecipients(i);"Parents"===e?n.addRecipients(a,"Parent"):n.addRecipients(t.concat(a),"Student/Parent")}))}},rightButtons:[{label:"Students",value:"Students",css:"btn btn-primary"},{label:"Parents",value:"Parents",css:"btn btn-primary"},{label:"Both",value:"Both",css:"btn btn-primary"},{label:"Cancel",value:"Cancel",css:"btn btn-secondary"}],title:"Compose From Action Results",type:p.SMDialogType.Message})}))),[2]}}))}))},e.prototype.addRecipients=function(e,t){var i,n=this.recipients().map((function(e){return e.id()})),a=e.filter((function(e){return!n.includes(e.id())}));a.length>0?((i=this.recipients).push.apply(i,a),$.pnotify_success("Added ".concat(a.length," ").concat(t).concat(1===a.length?"":"s","."))):e.length>0?$.pnotify_error("All ".concat(t,"s already added.")):$.pnotify_error("No ".concat(t,"s found."))},e.prototype.updateTabDataSource=function(){if(this.tabDataSource.removeAll(),this.auditAdmin)l.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:l.SM.translation.staff(),id:o.RecipientList.Staff,recipientSearch:this.staffSearch}),l.SM.parentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Parent_s.gif",text:l.SM.translation.parents(),id:o.RecipientList.Parents,recipientSearch:this.parentSearch}),l.SM.studentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Student_s.gif",text:l.SM.translation.students(),id:o.RecipientList.Students,recipientSearch:this.studentSearch});else{switch(l.SM.userType){case o.UserType.Staff:var e={icon:"images/ST_GENESIS/Staff_s.gif",text:l.SM.translation.staff(),id:o.RecipientList.Staff,recipientSearch:this.staffSearch},t={icon:"images/ST_GENESIS/Parent_s.gif",text:l.SM.translation.parents(),id:o.RecipientList.Parents,recipientSearch:this.parentSearch},i={icon:"images/ST_GENESIS/Student_s.gif",text:l.SM.isTeacher&&l.SM.useNewTVUECommunication?"Students/Parents":l.SM.translation.students(),id:o.RecipientList.Students,recipientSearch:this.studentSearch};l.SM.isTeacher&&l.SM.useNewTVUECommunication?(this.allowNonStaffRecipients&&(l.SM.studentsTabVisible&&this.tabDataSource.push(i),l.SM.parentsTabVisible&&this.tabDataSource.push(t)),l.SM.staffTabVisible&&this.tabDataSource.push(e)):(l.SM.staffTabVisible&&this.tabDataSource.push(e),this.allowNonStaffRecipients&&(l.SM.parentsTabVisible&&this.tabDataSource.push(t),l.SM.studentsTabVisible&&this.tabDataSource.push(i))),this.allowNonStaffRecipients&&(l.SM.isTeacher&&!this.showAdvanced()||l.SM.classesTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:l.SM.translation.classes(),id:o.RecipientList.Classes,recipientSearch:this.classSearch})),l.SM.isTeacher&&!this.showAdvanced()||(l.SM.userGroupsTabVisible&&this.tabDataSource.push({icon:"images/ST_REVELATION/UserGroup_s.gif",text:l.SM.translation.userGroups(),id:o.RecipientList.UserGroups,recipientSearch:this.userGroupSearch}),l.SM.studentGroupsTabVisible&&this.allowNonStaffRecipients&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:l.SM.translation.studentGroups(),id:o.RecipientList.MassStudentGroups,recipientSearch:this.massStudentGroupSearch}),l.SM.massEmailTabVisible&&this.allowNonStaffRecipients&&this.tabDataSource.push({icon:"images/ST_GENESIS/SIS_MassEmail_S.gif",text:l.SM.translation.massEmail(),id:o.RecipientList.MassEmail,recipientSearch:this.massEmailSearch}));break;case o.UserType.Parent:l.SM.teachersTabVisible&&l.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:"".concat(l.SM.childName,"'s ").concat(l.SM.translation.teachers()),id:o.RecipientList.Teachers,recipientSearch:this.teacherSearch}),l.SM.counselorsTabVisible&&l.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/User_s.gif",text:"".concat(l.SM.childName,"'s ").concat(l.SM.translation.counselor()),id:o.RecipientList.Counselors,recipientSearch:this.counselorSearch}),l.SM.studentGroupsTabVisible&&l.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:"".concat(l.SM.childName,"'s ").concat(l.SM.translation.groups()),id:o.RecipientList.StudentGroups,recipientSearch:this.studentGroupSearch}),l.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:l.SM.translation.staff(),id:o.RecipientList.Staff,recipientSearch:this.staffSearch});break;case o.UserType.Student:l.SM.teachersTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:l.SM.translation.myTeachers(),id:o.RecipientList.Teachers,recipientSearch:this.teacherSearch}),l.SM.counselorsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/User_s.gif",text:l.SM.translation.myCounselor(),id:o.RecipientList.Counselors,recipientSearch:this.counselorSearch}),l.SM.studentGroupsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:l.SM.translation.myGroups(),id:o.RecipientList.StudentGroups,recipientSearch:this.studentGroupSearch}),l.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:l.SM.translation.staff(),id:o.RecipientList.Staff,recipientSearch:this.staffSearch}),l.SM.studentRecipientAccess!==o.StudentRecipientAccess.SchoolStaff&&l.SM.studentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Student_s.gif",text:l.SM.translation.students(),id:o.RecipientList.Students,recipientSearch:this.studentSearch})}this.showContactGroups&&l.SM.contactListsTabVisible&&this.allowNonStaffRecipients&&(l.SM.isTeacher&&!this.showAdvanced()||this.tabDataSource.push({icon:"images/ST_GENESIS/Parent_s.gif",text:l.SM.translation.contactGroups(),id:o.RecipientList.ContactGroups,recipientSearch:this.contactGroupSearch}))}},e.prototype.updateOrganizationDistrict=function(){var e,t;if(!1===l.SM.allowEmailAtDistrict&&l.SM.staffRecipientAccess===o.StaffRecipientAccess.District){var i=this.organizationData().filter((function(e){return""===e.id()}))[0];i&&this.organizationData.remove(i),(null===(e=this.selectedOrganization())||void 0===e?void 0:e.id())||this.selectCurrentOrganization()}else this.organizationData().filter((function(e){return""===e.id()}))[0]||(l.SM.userType===o.UserType.Staff||(null===(t=this.selectedTab())||void 0===t?void 0:t.recipientList)===o.RecipientList.Students&&l.SM.userType===o.UserType.Student&&l.SM.studentRecipientAccess===o.StudentRecipientAccess.SchoolStaffDistrictStudents||l.SM.userType===o.UserType.Parent&&l.SM.parentRecipientAccess===o.ParentRecipientAccess.DistrictStaff)&&this.organizationData.unshift(new o.Organization({id:"",name:l.SM.translation.district()}))},e.prototype.selectCurrentOrganization=function(){var e,t=l.SM.focusOrgYearId||(null===(e=this.filteredOrganizationData()[0])||void 0===e?void 0:e.id()),i=this.filteredOrganizationData().filter((function(e){return e.id()===t}))[0];i&&this.selectedOrganization(i),l.SM.userType===o.UserType.Staff?this.staffSearch().loadData():l.SM.userType===o.UserType.Student&&l.SM.studentRecipientAccess!==o.StudentRecipientAccess.SchoolStaff&&this.studentSearch().loadData()},e.prototype.recipientsSelected=function(e){for(var t=function(e){i.recipients().filter((function(t){return t.id()===e.id()}))[0]||i.recipients.push(e)},i=this,n=0,a=e;n<a.length;n++)t(a[n]);setTimeout((function(){var e=$("#composeRecipients").prop("scrollHeight");$("#composeRecipients").scrollTop(e)}),0)},e.prototype.exitGrid=function(){$("#".concat(this.id," #cancelAddRecipients")).focus()},e.prototype.recipientSelected=function(e,t,i){e.recipientList()===o.RecipientList.MassEmail&&(e.id("".concat(this.selectedOrganization().id(),",").concat(e.grades().join())),e.organizationYearId(this.selectedOrganization().id()),e.organizationName(this.selectedOrganization().name())),l.SM.addRecipients(this.recipients,[e],{animationBox:l.SM.$("#animationBox"),recipientBox:l.SM.$("#composeRecipients"),newRecipientDummy:l.SM.$("#toDummy".concat(this.id)),startLeft:t,startTop:i})},e.prototype.cancel=function(){l.SM.$("#".concat(this.id)).modal("hide"),this.onCancel&&this.onCancel()},e.prototype.removeRecipient=function(e){this.recipients.remove(e)},e.prototype.save=function(){this.onSave&&this.onSave(this.recipients().slice(0)),l.SM.$("#".concat(this.id)).modal("hide")},e.prototype.newContactGroup=function(){var e=this;d.SMEditContactGroupViewModel.instantiate({onInitialized:function(t){t.show(),e.editContactGroupVM=t},onDialogClosed:function(){e.selectedTab().recipientSearch().refreshGrid()}})},e.prototype.toggleAdvanced=function(){this.showAdvanced(!this.showAdvanced()),this.updateTabDataSource(),this.selectedTab(this.tabDataSource()[0])},e.prototype.showResolvedRecipientList=function(e){l.SM.topWindow().SM.showResolvedRecipientList([e])},e}();t.SMAddRecipientViewModel=h,t.SMAddRecipientComponent={template:c,viewModel:h}},9079:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAudioPlayerComponent=void 0;var n=i(1032),a=i(8520),s=i(6605),o=function(){function e(e){var t=this;this.self=this,this.audioSrc=n.observable(),this.audioChunks=[],this.audioPlayer=new Audio,this.audioPlayerCurrentTime=n.observable(0),this.audioPlayerState=n.observable(s.AudioPlayerStates.NoMediaLoaded),this.audioVolume=n.observable(50),this.dummyObservable=n.observable(!1),this.preloadAudio=!1,this.audioLoaded=!1,this.playPauseIconClass=n.computed((function(){var e="fa-solid fa-pause fa-3x";return t&&t.audioPlayerState()!==s.AudioPlayerStates.Play&&(e="fa-solid fa-play fa-3x"),e})),this.getAudioSource=e.getAudioSource,this.initAudioPlayerEventListeners(),this.audioPlayerCurrentTimeAndDuration=n.computed(function(){this.dummyObservable();var e=Number.isNaN(this.audioPlayer.duration)?null:this.audioPlayer.duration;return"".concat(r(this.audioPlayerCurrentTime()),"/").concat(r(e))}.bind(this)),this.audioPlayerCurrentAmount=n.computed(function(){var e=this.audioPlayerCurrentTime()/this.audioPlayer.duration*100;return Number.isNaN(e)?0:e}.bind(this)),this.audioVolume.subscribe((function(e){t.audioPlayer.volume=e/100})),e.preloadAudio&&this.loadAudio()}return e.prototype.loadAudio=function(){var e=this;return this.getAudioSource().then((function(t){e.audioPlayer.src=t,e.audioPlayer.load(),e.audioLoaded=!0}))},e.prototype.initAudioPlayerEventListeners=function(){this.audioPlayer.onplay=function(){this.audioPlayerState(s.AudioPlayerStates.Play)}.bind(this),this.audioPlayer.onpause=function(){this.audioPlayerState(s.AudioPlayerStates.Pause)}.bind(this),this.audioPlayer.onended=function(){this.audioPlayerCurrentTime(0)}.bind(this),this.audioPlayer.onloadedmetadata=function(e){this.audioPlayer.currentTime=0,this.audioPlayerCurrentTime(this.audioPlayer.currentTime),this.dummyObservable.notifySubscribers()}.bind(this),this.audioPlayer.ontimeupdate=function(){this.audioPlayerCurrentTime(this.audioPlayer.currentTime)}.bind(this)},e.prototype.playAudio=function(){var e=this;this.audioLoaded?this.audioPlayer.play():this.loadAudio().then((function(){return e.audioPlayer.play()}))},e.prototype.pauseAudio=function(){this.audioPlayer.pause()},e.prototype.handlePlayPauseClick=function(){this.audioPlayer.paused?this.playAudio():this.pauseAudio()},e.prototype.handleAmountPlayedChange=function(e,t){this.audioPlayer.currentTime=parseInt(t.target.value,10)/this.audioPlayer.duration},e}();function r(e){if(null===e)return"--:--";e=Math.trunc(e||0);var t=Math.trunc(e/60);e-=60*t;var i=t<10?"0".concat(t.toString()):t.toString(),n=e<10?"0".concat(e.toString()):e.toString();return"".concat(i,":").concat(n)}t.SMAudioPlayerComponent={template:a,viewModel:o}},5513:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAudioRecorderComponent=void 0;var n=i(1032),a=i(9),s=i(1491),o=i(6605),r=function(){function e(e){var t=this;this.audioSrc=n.observable(),this.audioChunks=[],this.mediaRecorderState=n.observable(o.MediaRecorderStates.Inactive),this.timer=new s.Timer({label:"recordingTimer"}),this.mediaRecorderDurationMS=n.observable(0),this.mediaRecorderDuration=n.computed((function(){return e=(e=t.mediaRecorderDurationMS())||0,l(Math.trunc(e/1e3));var e})),this.audioPlayer=new Audio,this.audioPlayerCurrentTime=n.observable(0),this.audioPlayerState=n.observable(o.AudioPlayerStates.NoMediaLoaded),this.audioVolume=n.observable(50),this.audioPlayerCurrentTimeAndDuration=n.computed((function(){return"".concat(l(t.audioPlayerCurrentTime()),"/").concat(l(t.audioPlayer.duration))})),this.audioPlayerCurrentAmount=n.computed((function(){return t.audioPlayerCurrentTime()/t.audioPlayer.duration*100})),this.recordingStartStopIconClass=n.computed((function(){var e="fa-solid fa-circle-stop fa-3x";return t.mediaRecorderState()!==o.MediaRecorderStates.Recording&&(e="fa-solid fa-circle fa-3x"),e})),this.playPauseIconClass=n.computed((function(){var e="fa-solid fa-play fa-3x";return t&&t.audioPlayerState()!==o.AudioPlayerStates.Pause&&(e="fa-solid fa-pause fa-3x"),e})),this.audioPlayer.onplay=function(){t.audioPlayerState(o.AudioPlayerStates.Play)},this.audioPlayer.onpause=function(){t.audioPlayerState(o.AudioPlayerStates.Pause)},this.audioPlayer.onended=function(){t.audioPlayerCurrentTime(0)},this.audioVolume.subscribe((function(e){t.audioPlayer.volume=e/100})),this.saveRecording=e.saveRecording}return e.prototype.startRecording=function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.setupMediaRecorder(t),e.mediaRecorder.start()}))},e.prototype.setupMediaRecorder=function(e){var t=this;this.mediaRecorder=new MediaRecorder(e,{mimeType:"audio/webm"}),this.mediaRecorder.onstart=function(){t.mediaRecorderState(o.MediaRecorderStates.Recording),t.timer.start(),t.intervalID=window.setInterval((function(){t.mediaRecorderDurationMS(t.timer.ms())}),100)},this.mediaRecorder.ondataavailable=function(e){t.audioChunks.push(e.data)},this.mediaRecorder.onstop=function(e){t.timer.stop(),t.mediaRecorderDurationMS(t.timer.ms()),window.clearInterval(t.intervalID),t.mediaRecorderState(o.MediaRecorderStates.Inactive),t.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()}));var i=new Blob(t.audioChunks,{type:"audio/webm"});t.saveRecording(i),t.audioChunks=[],t.audioSrc(window.URL.createObjectURL(i)),t.audioPlayer.src=t.audioSrc(),t.audioPlayer.onloadedmetadata=function(){t.audioPlayerState(o.AudioPlayerStates.Pause),t.audioPlayer.duration===1/0&&(t.audioPlayer.currentTime=1e11,t.audioPlayer.ontimeupdate=function(){t.audioPlayer.currentTime=0,t.audioPlayer.ontimeupdate=function(){t.audioPlayerCurrentTime(t.audioPlayer.currentTime)}}),t.audioPlayerCurrentTime(t.audioPlayer.currentTime)},t.audioPlayer.load()}},e.prototype.stopRecording=function(){this.mediaRecorder.stop()},e.prototype.handleRecordStartStop=function(){this.mediaRecorderState()!==o.MediaRecorderStates.Recording?this.startRecording():this.stopRecording()},e.prototype.playRecording=function(){this.audioPlayer.play()},e.prototype.pauseRecording=function(){this.audioPlayer.pause(),this.audioPlayerState(o.AudioPlayerStates.Pause)},e.prototype.handlePlayPauseClick=function(){!1===this.audioPlayer.paused?this.pauseRecording():this.playRecording()},e.prototype.handleAmountPlayedChange=function(e,t){this.audioPlayer.currentTime=parseInt(t.target.value,10)/this.audioPlayer.duration},e}();function l(e){e=Math.trunc(e||0);var t=Math.trunc(e/60);e-=60*t;var i=t<10?"0".concat(t.toString()):t.toString(),n=e<10?"0".concat(e.toString()):e.toString();return"".concat(i,":").concat(n)}t.SMAudioRecorderComponent={template:a,viewModel:r}},4780:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAuditReportComponent=t.SMAuditReportViewModel=void 0;var n=i(1032),a=i(6853),s=i(3720),o=i(6885),r=i(8076),l=i(2617),d=i(605),c=function(){function e(e){this.addRecipient=n.observable(),this.recipients=n.observableArray(),this.messageRelationship=n.observable(),this.keywords=n.observable(""),this.searchSubject=n.observable(!1),this.searchBody=n.observable(!1),this.searchSMSText=n.observable(!1),this.searchVoiceText=n.observable(!1),this.searchAttachmentNames=n.observable(!1),this.fromDate=n.observable(new Date((new Date).setDate((new Date).getDate()-1))),this.toDate=n.observable(new Date),this.limitResults=n.observable(!1),this.requiredFieldValidator={validationRules:[{type:"required"}]},this.fromDateOptions={type:"datetime",value:this.fromDate,displayFormat:"M/d/yyyy h:mm a",onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.toDateOptions={type:"datetime",value:this.toDate,displayFormat:"M/d/yyyy h:mm a",onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.renderGrid=n.observable(!0),e.options.renderGrid&&this.renderGrid("true"===e.options.renderGrid.toLowerCase()),this.init()}return e.prototype.init=function(){var e=this;this.toRecipientListOptions={addRecipient:this.addRecipient,recipients:this.recipients,title:"Contacts"},this.addRecipientOptions={id:"auditReportAddRecipients",auditAdmin:!0,onInitialized:function(t){e.addRecipient(t)}},l.SM.topWindow().SM.instantiateAddRecipients(this.addRecipientOptions);var t=[{name:"To any of these individuals",value:a.MessageRelationship.To},{name:"From any of these individuals",value:a.MessageRelationship.From},{name:"To or From any of these individuals",value:a.MessageRelationship.ToOrFrom}];this.messageRelationshipOptions={displayExpr:"name",items:t,value:this.messageRelationship},this.messageRelationship(t[0]),this.messageGridOptions={columns:[{headerCellTemplate:function(e,t){$('<span class="fa fa-envelope"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.sendEmail()&&$('<span class="fa fa-envelope"></span>').appendTo(e)},dataType:"string",width:40,alignment:"center",dataField:"sendEmail",visible:!1},{headerCellTemplate:function(e,t){$('<span class="fa fa-sms"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.sendSMS()&&$('<span class="fa fa-sms"></span>').appendTo(e)},dataType:"string",width:40,alignment:"center",dataField:"sendSMS",visible:!1},{headerCellTemplate:function(e,t){$('<span class="fa fa-phone"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.sendVoice()&&$('<span class="fa fa-phone"></span>').appendTo(e)},dataType:"string",width:40,alignment:"center",dataField:"sendVoice",visible:!1},{headerCellTemplate:function(e,t){$('<span class="fa fa-paperclip"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.hasAttachments()&&$('<span class="fa fa-paperclip"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center"},{headerCellTemplate:function(e,t){$('<span class="fa fa-video"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.isMeeting()&&$('<span class="fa fa-video"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center",dataField:"videoConference",visible:!1},{caption:l.SM.translation.status(),width:120,dataField:"messageStatusFormatted"},{caption:l.SM.translation.from(),cellTemplate:function(e,t){var i=t.data;$("<span>".concat(i.from().contactDetails1(),"</span>")).appendTo(e)},cssClass:"message-name",dataField:"from"},{caption:l.SM.translation.to(),cssClass:"message-name",dataField:"recipientsFormatted"},{caption:l.SM.translation.subject(),cellTemplate:function(e,t){t.data.translationComplete()?$("<span>".concat(t.data.subject(),"</span>")).appendTo(e):($('<div id="waiting'.concat(t.data.messagePersonId(),'" class="translate-subject">\n                                ').concat(l.SM.translation.waitingToLoadTranslation(),"...</div>")).appendTo(e),$('<div id="subject'.concat(t.data.messagePersonId(),'"\n                                class="collapse translate-subject"><img src="images/ST/FormSubmit.gif" />\n                                ').concat(l.SM.translation.loadingTranslation(),"...</div>")).appendTo(e))},cssClass:"message-subject",dataField:"subject",width:300},{caption:"Content",cellTemplate:function(e,t){var i=t.data,n=(i.sendEmail()?i.messageText():i.sendSMS()?i.smsMessage():i.sendVoice()?i.voiceText():"").replace(/<\/p>/g," ").replace(/<br>/g," "),a=$("<div>").append(n).text().replace(/<script([^>]*)>/g,"&lt;script$1&gt;").replace(/<\/script>/g,"&lt;/script&gt;");e.append(a)},dataField:"messageText"},{caption:l.SM.translation.date(),cssClass:"message-date",dataField:"sendDateTimeFormattedLong",width:250}],dataSource:[],filterRow:{applyFilter:"auto",visible:!1},hoverStateEnabled:!0,noDataText:l.SM.translation.noMessages(),onInitialized:function(t){e.messageGrid=t.component,l.SM.isSynergyMessageEnabled&&(e.messageGrid.columnOption("sendEmail","visible",!0),e.messageGrid.columnOption("sendSMS","visible",!0),e.messageGrid.columnOption("sendVoice","visible",!0)),l.SM.vidConfEnabled&&e.messageGrid.columnOption("videoConference","visible",!0)},onRowClick:function(t){l.SM.topWindow().SM.instantiateViewMessage(t.data.messageId(),{isAuditAdmin:!0,onDelete:e.messageGrid.refresh})},onRowPrepared:function(e){e.rowElement.addClass("message-text")},pager:{allowedPageSizes:[5,10,20],showInfo:!0,showPageSizeSelector:!0},paging:{enabled:!0,pageSize:10},remoteOperations:!0,sorting:{mode:"none"}}},e.prototype.search=function(){this.messageGrid.option("dataSource",this.getCustomStore())},e.prototype.print=function(e,t){s.MessageService.printAuditReport(this.recipients(),this.messageRelationship().value,this.keywords(),this.searchSubject(),this.searchBody(),this.searchSMSText(),this.searchVoiceText(),this.searchAttachmentNames(),this.fromDate(),this.toDate()).catch((function(e){return r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Unable to Print Audit Report",e)}))},e.prototype.createRetentionSet=function(){var e=this;r.SMDialog.showInput("Create Retention Set","Enter retention set name","New Retention Set","You must enter a Retention Set Name.",(function(t,i){"Save"===t&&s.MessageService.createRetentionSet(i,e.recipients(),e.messageRelationship().value,e.keywords(),e.searchSubject(),e.searchBody(),e.searchSMSText(),e.searchVoiceText(),e.searchAttachmentNames(),e.fromDate(),e.toDate()).then((function(e){var t=e?"Retention Set successfully created.":"Unable to create Retention Set.";r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Create Retention Set",t)}))}))},e.prototype.getCustomStore=function(){var e=this,t=0;return new o.DevExpress.data.CustomStore({key:"messagePersonId",load:function(i){return new Promise((function(n,a){(i=s.DBService.formatOptions(i)).take=e.messageGrid.pageSize(),s.MessageService.getAuditReportMessages(e.recipients(),e.messageRelationship().value,e.keywords(),e.searchSubject(),e.searchBody(),e.searchSMSText(),e.searchVoiceText(),e.searchAttachmentNames(),e.fromDate(),e.toDate(),i).then((function(i){t=i.totalCount,e.limitResults(t>=1e3),n(i)}))}))},totalCount:function(e){return new Promise((function(e,i){e(t)}))}})},e}();t.SMAuditReportViewModel=c,t.SMAuditReportComponent={template:d,viewModel:c}},3946:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMComposeComponent=t.SMComposeViewModel=void 0;var n=i(1032),a=i(8076),s=i(2617),o=i(867),r=function(){function e(e){this.windowSize=n.observable(s.SMWindowSize.Normal),this.windowNormalX=0,this.windowNormalY=0,this.messageSent=!1,this.suppressUi=!1,this.modalInitialized=!1,this.composing=!1,this.titleText=n.observable(""),this.recipientCountText=n.observable(""),this.init()}return e.prototype.init=function(){var e=this;this.editorOptions={onInitialized:function(t){e.editor=t},onTitleUpdated:function(t){return e.titleText(t)},onMessageAction:function(t){e.close(),e.onAction&&e.onAction(t)},isEmbedded:!1}},e.prototype.setOnAction=function(e){this.onAction=e},e.prototype.toggleWindowSize=function(){var e=$("#composeDialogDrag");this.windowSize()===s.SMWindowSize.Normal?(this.windowNormalX=e.position().left,this.windowNormalY=e.position().top,e.css({top:0,left:0}),this.windowSize(s.SMWindowSize.Maximized),e.draggable("disable")):(e.css({top:this.windowNormalY,left:this.windowNormalX}),this.windowSize(s.SMWindowSize.Normal),e.draggable("enable"))},e.prototype.open=function(e,t,i){this.messageSent=!1,this.suppressUi=e.suppressUi,this.message=t,e.onSend&&(this.onAction=e.onSend),this.composing?a.SMDialog.showMessage(a.SMDialogButtons.Ok,s.SM.translation.unableToCompose(),s.SM.translation.unableToComposeWhileComposing()):(this.editor.setup(e),this.editor.initEditor(e,t,i),e.suppressUi||(window.onbeforeunload=function(){return"Changes you made may not be saved."},this.composing=!0,this.modalInitialized||($("#composeDialog").stModal({show:!1,allowClose:!1,customDialog:!0,keepOnHide:!0,draggable:!s.SM.isMobile()}),this.modalInitialized=!0),setTimeout((function(){return $("#composeDialog").modal("show")}),200)))},e.prototype.close=function(){window.onbeforeunload=null,$("#composeDialog").modal("hide"),this.composing=!1,this.editor&&this.editor.disableCompose()},e}();t.SMComposeViewModel=r,t.SMComposeComponent={template:o,viewModel:r}},8420:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMConversationComponent=t.SMConversationViewModel=void 0;var n=i(3720),a=i(5204),s=i(2617),o=i(5180),r=i(6853),l=function(){function e(e){var t=this;this.conversation=ko.observable(),this.newMessageText=ko.observable(""),this.isPXP=s.SM.currentWebPortal===r.CurrentWebPortal.ParentVUE||s.SM.currentWebPortal===r.CurrentWebPortal.StudentVUE,this.isTXP=s.SM.currentWebPortal===r.CurrentWebPortal.TeacherVUE,this.handleScroll=s.SM.debounce((function(){var e=$("#messages-list")[0];e.scrollHeight-(e.clientHeight-e.scrollTop)<=10&&t.conversation().loadMessages()})),this.conversation=e.conversation,this.init()}return e.prototype.init=function(){var e=this;s.SM.topWindow().SM.conversation=this,s.SM.conversation=this,this.conversation.subscribe((function(){e.conversation()&&(e.conversation().messages.removeAll(),e.conversation().nextPageToLoad=0,e.conversation().isLastPageLoaded=!1,e.conversation().loadMessages())}))},e.prototype.checkForSubmit=function(e,t){if(13!==t.keyCode)return!0;this.sendMessage()},e.prototype.sendMessage=function(){var e=new o.ConversationMessage;e.smsMessage(this.newMessageText()),e.conversationGU(this.conversation().conversationGU()),n.ConversationService.sendConversationMessage(e),this.newMessageText("")},e}();t.SMConversationViewModel=l,t.SMConversationComponent={template:a,viewModel:l}},2372:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMDialogComponent=t.SMDialogViewModel=t.SMDialogType=void 0;var n,a=i(1032),s=i(2617),o=i(5733);!function(e){e[e.Input=0]="Input",e[e.Message=1]="Message"}(n=t.SMDialogType||(t.SMDialogType={}));var r=function(){function e(e){var t=this;this.title=a.observable(),this.message=a.observable(),this.leftButtons=a.observableArray(),this.rightButtons=a.observableArray(),this.dialogId=a.observable("smDialog"),this.type=a.observable(n.Input),this.input=a.observable(""),this.validationMessage=a.observable(),this.inputHasFocus=a.observable(!1),this.modalInitialized=!1;var i=e.options;this.title(i.title),this.message(i.message),this.type(i.type),this.input(i.initialValue),this.validationMessage(i.validationMessage),this.leftButtons(i.leftButtons),this.rightButtons(i.rightButtons),this.dialogId(i.dialogId),this.formValid=a.pureComputed((function(){return t.input()&&0!==t.input().length})),i.onInitialized(this)}return e.prototype.show=function(e){var t=this;e&&(this.onDismissed=e),this.modalInitialized?s.SM.topWindow().$("#".concat(this.dialogId())).modal("show"):(s.SM.topWindow().$("#".concat(this.dialogId())).stModal({customDialog:!0,keepOnHide:!0,allowClose:!1}),this.modalInitialized=!0),setTimeout((function(){t.inputHasFocus(!0)}),50)},e.prototype.hide=function(){s.SM.topWindow().$("#".concat(this.dialogId())).modal("hide"),s.SM.topWindow().$("#".concat(this.dialogId())).remove()},e.prototype.inputFocused=function(e,t){$(t.target).select()},e.prototype.buttonPressed=function(e){this.hide(),this.onDismissed&&this.onDismissed(e,this.input())},e}();t.SMDialogViewModel=r,t.SMDialogComponent={template:o,viewModel:r}},2958:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditContactGroupComponent=t.SMEditContactGroupViewModel=void 0;var n=i(1032),a=i(6853),s=i(3720),o=i(2617),r=i(9061),l=i(7319),d=function(){function e(e){this.modalInitialized=!1,this.recipients=n.observableArray(),this.addRecipient=n.observable(),this.nameHasFocus=n.observable(!1),this.nameValid=n.observable(!0),this.descriptionValid=n.observable(!0),this.formError=n.observable(),this.organizationData=n.observableArray(),this.selectedOrganizationId=n.observable(),this.editMode=n.observable(!1),this.contactGroup=n.observable(new a.ContactGroup({isPublic:!1,isEditableByStaff:!1}));var t=e.options;this.onDialogClosed=t.onDialogClosed,this.init(),t.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-contact-group").remove();var t=$('<sm-edit-contact-group params="options: editContactGroupOptions"></sm-edit-contact-group>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({editContactGroupOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.editMode(!!e),0===this.organizationData().length?s.OrganizationService.getOrganizations().then((function(i){t.organizationData(i),(o.SM.userType===a.UserType.Staff||o.SM.userType===a.UserType.Student&&o.SM.studentRecipientAccess===a.StudentRecipientAccess.SchoolStaffDistrictStudents)&&t.organizationData.unshift(new a.Organization({id:"",name:o.SM.translation.district()})),t.selectCurrentOrganization(),t.load(e)})):(this.selectCurrentOrganization(),this.load(e)),this.modalInitialized?o.SM.topWindow().$("#editContactGroupDialog").modal("show"):(o.SM.topWindow().$("#editContactGroupDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){t.nameHasFocus(!0)}),50)},e.prototype.load=function(e){var t=this;e?s.RecipientService.getContactGroup(e).then((function(e){t.contactGroup(e),t.selectedOrganizationId(t.contactGroup().organizationYearId()),t.recipients(t.contactGroup().recipients())})):(this.contactGroup(new a.ContactGroup({name:o.SM.translation.newContactGroup(),isPublic:!1})),this.recipients(this.contactGroup().recipients()),this.selectCurrentOrganization())},e.prototype.title=function(){return this.editMode()?o.SM.translation.editContactGroup():o.SM.translation.newContactGroup()},e.prototype.nameFocused=function(e,t){$(t.target).select()},e.prototype.init=function(){var e=this;r.SMAddRecipientViewModel.instantiate({id:"editContactGroupAddRecipient",onInitialized:function(t){e.addRecipient(t)},showContactGroups:!1,allowNonStaffRecipients:!0}),this.selectOrganizationOptions={onContentReady:function(t){0!==e.organizationData().filter((function(t){return t.id()===e.selectedOrganizationId()})).length&&e.selectedOrganizationId(e.organizationData()[0].id())},displayExpr:"name",items:this.organizationData,value:this.selectedOrganizationId,valueExpr:"id"},this.recipientListOptions={addRecipient:this.addRecipient,recipients:this.recipients,title:o.SM.translation.contacts(),contactGroupName:this.contactGroup().name}},e.prototype.selectCurrentOrganization=function(){var e=o.SM.focusOrgYearId||this.organizationData()[0].id(),t=this.organizationData().filter((function(t){return t.id()===e}))[0];t&&this.selectedOrganizationId(t.id())},e.prototype.save=function(){var e=this;this.contactGroup().organizationYearId(this.selectedOrganizationId()),this.contactGroup().recipients(this.recipients()),this.contactGroup().id()?s.RecipientService.updateContactGroup(this.contactGroup()).then((function(){e.close(),e.onDialogClosed&&e.onDialogClosed()})):s.RecipientService.addContactGroup(this.contactGroup()).then((function(){e.close(),e.onDialogClosed&&e.onDialogClosed()}))},e.prototype.close=function(){this.addRecipient().removeDialog(),this.dialog.modal("hide")},e}();t.SMEditContactGroupViewModel=d,t.SMEditContactGroupComponent={template:l,viewModel:d}},6086:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditFolderComponent=t.SMEditFolderViewModel=void 0;var n=i(1032),a=i(6853),s=i(3031),o=i(2617),r=i(2509),l=function(){function e(e){this.title=n.observable(),this.folder=n.observable(new a.Folder),this.folderNameHasFocus=n.observable(!1),this.modalInitialized=!1,this.formError=n.observable();var t=e.options;this.init(),t.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-folder").remove();var t=$('<sm-edit-folder params="options: editFolderOptions"></sm-edit-folder>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({editFolderOptions:e},t[0])},e.prototype.create=function(e,t){this.onDismissed=t,this.title(o.SM.translation.newFolder()),this.folder(new a.Folder({name:o.SM.translation.newFolder()})),this.show()},e.prototype.edit=function(e,t){this.originalName=e.name(),this.onDismissed=t,this.title(o.SM.translation.editFolder()),this.folder(new a.Folder({folderId:e.folderId(),name:e.name()})),this.show()},e.prototype.init=function(){var e=this;this.formValid=n.pureComputed((function(){return e.folder().name()&&0!==e.folder().name().length}))},e.prototype.show=function(){var e=this;this.formError(""),this.folder().name.subscribe((function(){e.formError("")})),this.modalInitialized?o.SM.topWindow().$("#editFolderDialog").modal("show"):(o.SM.topWindow().$("#editFolderDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){e.folderNameHasFocus(!0)}),50)},e.prototype.folderNameFocused=function(e,t){$(t.target).select()},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){var e=this;this.folder().name()===this.originalName?(this.hide(),this.onDismissed&&this.onDismissed(null)):this.formValid()&&(this.folder().folderId()?s.FolderService.updateFolder(this.folder()).then((function(t){t.successful?(e.hide(),e.onDismissed&&e.onDismissed(null)):e.formError(t.errorMessage)})):s.FolderService.addFolder(this.folder()).then((function(t){t.successful?(e.hide(),e.onDismissed&&e.onDismissed(t.data)):e.formError(t.errorMessage)})))},e}();t.SMEditFolderViewModel=l,t.SMEditFolderComponent={template:r,viewModel:l}},6326:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditSignatureComponent=t.SMEditSignatureViewModel=void 0;var n=i(1032),a=i(6853),s=i(6174),o=i(2617),r=i(7935),l=function(){function e(e){this.title=n.observable(),this.signature=n.observable(new a.Signature),this.modalInitialized=!1,e.options.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-signature").remove();var t=$('<sm-edit-signature params="options: editSignatureOptions"></sm-edit-signature>');$(document.body).append(t),n.applyBindings({editSignatureOptions:e},t[0])},e.prototype.show=function(e,t){var i=this;this.onDismissed=t,this.classicEditorNewSignature?this.classicEditorNewSignature.setData(e.newMessages()):o.SM.createEditor({element:$("#newSignature")[0],showViewTemplates:!1,showInsertToken:!1}).then((function(t){i.classicEditorNewSignature=t,i.classicEditorNewSignature.setData(e.newMessages())})),this.classicEditorNewSignature?this.classicEditorReplySignature.setData(e.replies()):o.SM.createEditor({element:$("#repliesSignature")[0],showViewTemplates:!1,showInsertToken:!1}).then((function(t){i.classicEditorReplySignature=t,i.classicEditorReplySignature.setData(e.replies())})),this.modalInitialized?$("#editSignatureDialog").modal("show"):($("#editSignatureDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){i.dialog=e},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){var e=this,t=this.classicEditorNewSignature.getData(),i=this.classicEditorReplySignature.getData();s.MiscService.updateSignature(t,i).then((function(){e.hide(),(null===o.SM||void 0===o.SM?void 0:o.SM.editorVM)&&(null===o.SM||void 0===o.SM||o.SM.editorVM.updateSignature(new a.Signature({newMessages:t,replies:i}))),e.onDismissed&&e.onDismissed(new a.Signature({newMessages:t,replies:i}))}))},e}();t.SMEditSignatureViewModel=l,t.SMEditSignatureComponent={template:r,viewModel:l}},7279:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditTemplateComponent=t.SMEditTemplateViewModel=void 0;var n=i(1032),a=i(6853),s=i(2449),o=i(2617),r=i(6224),l=function(){function e(e){this.template=n.observable(new a.UserTemplate),this.originalTemplate=n.observable(),this.modalInitialized=!1,this.templateNameHasFocus=n.observable(!1),e.options.onInitialized(this),this.init()}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-template").remove();var t=$('<sm-edit-template params="options: editTemplateOptions"></sm-edit-template>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({editTemplateOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.originalTemplate(e),this.template().userTemplateId(e.userTemplateId()),this.template().name(e.name()),this.template().messageText(e.messageText()),this.template(new a.UserTemplate({messageText:e.messageText(),name:e.name(),userTemplateId:e.userTemplateId()})),o.SM.createEditor({element:$("#template")[0],showViewTemplates:!1,showInsertToken:!0}).then((function(e){t.classicEditor=e,t.classicEditor.setData(t.template().messageText())})),this.modalInitialized?o.SM.topWindow().$("#editTemplateDialog").modal("show"):(o.SM.topWindow().$("#editTemplateDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){t.templateNameHasFocus(!0)}),50)},e.prototype.init=function(){var e=this;this.formValid=n.pureComputed((function(){return e.template().name()&&0!==e.template().name().length}))},e.prototype.hide=function(){this.dialog.modal("hide"),this.classicEditor.destroy()},e.prototype.save=function(){var e=this;this.formValid()&&(this.template().messageText(this.classicEditor.getData()),s.UserTemplateService.updateUserTemplate(this.template()).then((function(){e.originalTemplate().name(e.template().name()),e.originalTemplate().messageText(e.template().messageText()),e.hide()})))},e.prototype.templateNameFocused=function(e,t){$(t.target).select()},e}();t.SMEditTemplateViewModel=l,t.SMEditTemplateComponent={template:r,viewModel:l}},5956:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditorComponent=t.SMEditorViewModel=t.SMEditorType=t.SMEditorAction=void 0;var o,r,l,d=i(1032),c=i(6853),u=i(3720),p=i(6885),h=i(8076),m=i(2617),b=i(9061),f=i(2372),g=i(7279),v=i(1953),S=i(6197),M=i(3298);!function(e){e[e.Send=0]="Send",e[e.SaveDraft=1]="SaveDraft",e[e.DiscardDraft=2]="DiscardDraft",e[e.SaveTemplate=3]="SaveTemplate"}(o=t.SMEditorAction||(t.SMEditorAction={})),function(e){e[e.New=0]="New",e[e.EditDraft=1]="EditDraft"}(r=t.SMEditorType||(t.SMEditorType={})),function(e){e[e.None=0]="None",e[e.Saving=1]="Saving",e[e.Successful=2]="Successful",e[e.Failed=3]="Failed"}(l||(l={}));var y=function(){function e(e){var t=this;this.message=d.observable(new c.Message),this.messageSent=!1,this.addRecipientVM=d.observable(),this.recipientCountText=d.observable(""),this.toVisible=d.observable(!1),this.ccVisible=d.observable(!1),this.bccVisible=d.observable(!1),this.showToVisible=d.observable(!0),this.showCcVisible=d.observable(!0),this.showBccVisible=d.observable(!0),this.isDirty=d.observable(!1),this.isDirtyCounter=d.observable(0),this.autoSaveDate=d.observable(),this.autoSaveState=d.observable(l.None),this.isUploadingAttachmentDragDrop=!1,this.isUploadingAttachment=d.observable(!1),this.topicHasFocus=d.observable(!1),this.subjectHasFocus=d.observable(!1),this.originalMessageText=d.observable(""),this.replyResponses=d.observableArray([]),this.showGenerator=d.observable(!1),this.responsesLoading=d.observable(!1),this.templateData=d.observableArray(),this.templateDataFiltered=d.observableArray(),this.modalInitialized=!1,this.fromOptionsInternal=d.observableArray(),this.editTemplate=d.observable(),this.loading=d.observable(!1),this.loadMessage=d.observable(),this.addressToTeacher=d.observable(!1),this.addressToParents=d.observable(!0),this.addressToStudents=d.observable(!0),this.contactCategoriesInternal=d.observableArray(),this.voiceTTSLanguagesInternal=d.observableArray(),this.draggingFiles=d.observable(!1),this.uploadCancelled=!1,this.isEmbedded=d.observable(!0),this.allowSend=d.observable(!0),this.allowAttachments=d.observable(!0),this.allowDraft=d.observable(!0),this.allowSelectSender=d.observable(!0),this.allowNonStaffRecipients=d.observable(m.SM.allowNonStaffRecipients),this.includeSignature=d.observable(!1),this.studentGU=d.observable(),this.previewTTSLanguage=d.observable(),this.surveyBeginDateOptions={type:"date",value:this.message().surveyInfo().startDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.surveyBeginDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.surveyBeginTimeOptions={type:"time",value:this.message().surveyInfo().startDate,displayFormat:"h:mm a",onContentReady:function(e){t.surveyBeginTimeControl=e.component}},this.surveyEndDateOptions={type:"date",value:this.message().surveyInfo().endDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.surveyEndDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.surveyEndTimeOptions={type:"time",value:this.message().surveyInfo().endDate,displayFormat:"h:mm a",onContentReady:function(e){t.surveyEndTimeControl=e.component}},this.meetingDate=d.observable(),this.meetingStartTime=d.observable(),this.meetingDateOptions={type:"date",value:this.meetingDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.meetingDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.meetingStartTimeOptions={type:"time",value:this.meetingStartTime,displayFormat:"h:mm a",onContentReady:function(e){t.meetingStartTimeControl=e.component}},this.meetingEndTimeOptions={type:"time",value:this.message().meetingEndDate,displayFormat:"h:mm a"},this.hours=d.observable(1),this.hourOptions={displayExpr:"text",valueExpr:"value",items:[{value:0,text:"0 hours"},{value:1,text:"1 hour"},{value:2,text:"2 hours"},{value:3,text:"3 hours"},{value:4,text:"4 hours"},{value:5,text:"5 hours"},{value:6,text:"6 hours"},{value:7,text:"7 hours"},{value:8,text:"8 hours"},{value:9,text:"9 hours"},{value:10,text:"10 hours"},{value:11,text:"11 hours"},{value:12,text:"12 hours"},{value:13,text:"13 hours"},{value:14,text:"14 hours"},{value:15,text:"15 hours"},{value:16,text:"16 hours"},{value:17,text:"17 hours"},{value:18,text:"18 hours"},{value:19,text:"19 hours"},{value:20,text:"20 hours"},{value:21,text:"21 hours"},{value:22,text:"22 hours"},{value:23,text:"23 hours"},{value:24,text:"24 hours"}],onInitialized:function(e){t.hourSelectBox=e.component},value:this.hours},this.minutes=d.observable(0),this.minuteOptions={displayExpr:"text",valueExpr:"value",items:[{value:0,text:"0 minutes"},{value:15,text:"15 minutes"},{value:30,text:"30 minutes"},{value:45,text:"45 minutes"}],onInitialized:function(e){t.minuteSelectBox=e.component},value:this.minutes},this.selectedTab=d.observable({id:0}),this.composeOptions=d.observable(),this.template=new c.Template,this.templatePriorityOptions={displayExpr:"text",valueExpr:"value",items:[{value:"NRM",text:"Normal"},{value:"URG",text:"Urgent"}],value:this.template.priority},this.allowSMS=d.observable(!1),this.allowVoice=d.observable(!1),this.allowSocial=d.observable(!1),this.sendAllStaff=d.observable(!0),this.sendAllParents=d.observable(!0),this.sendAllStudents=d.observable(!1);var i=e&&e.options;i&&(this.onTitleUpdated=i.onTitleUpdated,this.onMessageAction=i.onMessageAction,void 0!==i.isEmbedded&&this.isEmbedded(i.isEmbedded)),this.init(),this.isEmbedded()&&this.initEditor({editorType:r.New},new c.Message),i&&i.onInitialized&&i.onInitialized(this)}return e.prototype.focusedOrganization=function(){return void 0===ST.FocusOrganizations?"":ST.FocusOrganizations.filter((function(e){return e.Value===ST.FocusOrgGU}))[0].InputDisp},Object.defineProperty(e.prototype,"showVoiceTextToSpeechTextArea",{get:function(){return this.message().voiceType()===c.VoiceType.TextToSpeech},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showVoiceAudioRecorder",{get:function(){return this.message().voiceType()===c.VoiceType.Audio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTVUECommunication",{get:function(){return window.isTVUECommunication},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showRecipientCount",{get:function(){return m.SM.currentWebPortal!==c.CurrentWebPortal.ParentVUE&&m.SM.currentWebPortal!==c.CurrentWebPortal.StudentVUE},enumerable:!1,configurable:!0}),e.prototype.unloadEvent=function(){return"Changes you made may not be saved."},e.prototype.setMessage=function(e){var t=new c.Message(JSON.parse(e));this.initEditor({editorType:r.EditDraft},t)},e.prototype.getMessage=function(){return this.message().messageText(encodeURIComponent(this.classicEditor.getData())),d.toJSON(this.message())},e.prototype.setup=function(e){var t,i=this;this.isEmbedded(!1),this.allowSend(!0),this.allowAttachments(!0),this.allowDraft(!0),this.allowSelectSender(!0),this.allowNonStaffRecipients(null===(t=null==e?void 0:e.allowNonStaffRecipients)||void 0===t||t),this.includeSignature(!0),this.studentGU(e.studentGU),this.defaultCommunicationType=e.defaultCommunicationType,b.SMAddRecipientViewModel.instantiate({id:"composeAddRecipients",allowNonStaffRecipients:this.allowNonStaffRecipients(),onInitialized:function(e){i.addRecipientVM(e)}})},e.prototype.setupEmbedded=function(e){var t,i,n,a,s,o,r=this;this.isEmbedded(!0),this.allowSend(null!==(t=null==e?void 0:e.allowSend)&&void 0!==t&&t),this.allowAttachments(null!==(i=null==e?void 0:e.allowAttachments)&&void 0!==i&&i),this.allowDraft(null!==(n=null==e?void 0:e.allowDraft)&&void 0!==n&&n),this.allowSelectSender(null!==(a=null==e?void 0:e.allowSelectSender)&&void 0!==a&&a),this.allowNonStaffRecipients(null===(s=null==e?void 0:e.allowNonStaffRecipients)||void 0===s||s),this.includeSignature(null===(o=null==e?void 0:e.includeSignature)||void 0===o||o),this.studentGU(e.studentGU),b.SMAddRecipientViewModel.instantiate({id:"composeAddRecipientsEmbedded",allowNonStaffRecipients:this.allowNonStaffRecipients(),onInitialized:function(e){r.addRecipientVM(e)}})},Object.defineProperty(e.prototype,"allowScheduleSend",{get:function(){return!this.message().isMeeting()&&!this.message().surveyGU()&&m.SM.currentWebPortal!==c.CurrentWebPortal.StudentVUE&&m.SM.currentWebPortal!==c.CurrentWebPortal.ParentVUE},enumerable:!1,configurable:!0}),e.prototype.stopDragging=function(e){e.preventDefault(),e.stopImmediatePropagation(),this.draggingFiles(!1)},e.prototype.onChildrenComplete=function(){var e=this;m.SM.isAdvancedUpload()&&this.allowAttachments()&&$("sm-editor .modal-body, #attachmentDropBox").on("dragover",this.bodyDragOver.bind(this)).on("dragleave",(function(t){null!==t.relatedTarget&&"attachmentDropBox"===t.relatedTarget.id||e.stopDragging(t)})).on("drop",(function(t){e.stopDragging(t);var i=t.originalEvent.dataTransfer.files;e.uploadAttachments(i)}))},e.prototype.initEditor=function(e,t,i){var n,a,s,o=this;this.messageSent=!1,this.selectedTab({id:0}),this.replyResponses([]),m.SM.editorVM=this,this.isEmbedded()?(this.allowSMS(!1),this.allowVoice(!1),this.allowSocial(!1)):(this.allowSMS(null===(n=e.allowSMS)||void 0===n||n),this.allowVoice(null===(a=e.allowVoice)||void 0===a||a),this.allowSocial(null===(s=e.allowSocial)||void 0===s||s)),this.communicationTab&&this.communicationTab.getDataSource().reload(),this.isDirtyCounterSub=this.isDirtyCounter.extend({rateLimit:{timeout:m.SM.autoSaveTimeout,method:"notifyWhenChangesStop"}}).subscribe((function(t){!o.allowDraft()||!o.isDirty()||o.isUploadingAttachment()||e.isEditingTemplate||o.isUploadingAttachmentDragDrop||o.loading()||o.autoSave().catch((function(){}))})),e.suppressUi||this.isEmbedded()||(window.onbeforeunload=function(){return"Changes you made may not be saved."},this.autoSaveState(l.None)),this.settings.then((function(n){o.signature.then((function(n){o.fromOptions.then((function(a){o.meetingDate(new Date);var s=new Date;s.setHours(s.getHours()+1),s.setMinutes(0),s.setSeconds(0),o.meetingStartTime(s),o.message().to.removeAll(),o.message().cc.removeAll(),o.message().bcc.removeAll(),o.message().attachments.removeAll(),o.message().subject(""),o.message().messageText(""),o.message().smsMessage(""),o.message().voiceText(""),o.message().socialText(""),o.message().sendEmail(!1),o.message().sendSMS(!1),o.message().sendVoice(!1),o.message().sendSocial(!1),o.message().updateContactLog(!1),o.message().meetingStartDate(o.meetingDate()),o.message().isMeeting(!1),o.message().recurrence(null),o.message().vidConfId(null),o.message().bccSender(!1),o.message().shouldTranslate(!0),o.message().scheduleSendDate(null),o.message().isNewMessage(!0),o.template.templateId(""),o.template.organizationId(e.templateOrgGU),o.template.name("New Template"),o.template.priority("NRM");var l=m.SM.defaultDuration%60;if(l=l<15?0:l<30?15:l<45?30:45,o.minutes(l),o.hours(Math.floor(m.SM.defaultDuration/60)),o.originalMessageText(""),t&&(t=new c.Message(t.getData()),o.originalMessageText(t.messageText())),m.SM.contactCategoriesEnabled&&o.contactCategories.then((function(){o.message().contactCategory(m.SM.defaultContactLogCategory),t&&t.isMeeting()?o.message().contactCategory(m.SM.vidConfDefaultContactLogCategory):m.SM.currentWebPortal===c.CurrentWebPortal.TeacherVUE&&o.message().contactCategory(m.SM.tvueCommunicationDefaultContactCategory)})),o.loadTTSLanguages(),e.editorType===r.New){o.message().messageId(null),o.message().messagePersonId(null),t&&(o.message().to(t.to()),o.message().cc(t.cc()),o.message().bcc(t.bcc()),o.message().subject(t.subject()||""),o.message().messageText(t.messageText()||""),o.message().smsMessage(t.smsMessage()||""),o.message().voiceText(t.voiceText()||""),o.message().socialText(t.socialText()||""),o.message().sendEmail(t.sendEmail()||!1),o.message().sendSMS(t.sendSMS()||!1),o.message().sendVoice(t.sendVoice()||!1),o.message().sendSocial(t.sendSocial()||!1),o.message().isMeeting(t.isMeeting()),o.message().bccSender(t.bccSender()),o.message().shouldTranslate(t.shouldTranslate()),o.message().surveyGU(t.surveyGU()),o.message().scheduleSendDate(t.scheduleSendDate()),t.meetingStartDate()&&o.message().meetingStartDate(t.meetingStartDate()),t.meetingEndDate()&&o.message().meetingEndDate(t.meetingEndDate()),o.message().recurrence(t.recurrence()));var p=o.message().messageText();if(o.includeSignature()&&(p+="<p>".concat(n.newMessages(),"</p>")),o.message().messageText(p),o.message().surveyGU()){var h=new c.Attachment;h.name(o.message().subject()||"Survey"),h.attachmentType(c.AttachmentType.Survey),t.attachments=d.observableArray([h])}}else if(e.editorType===r.EditDraft){o.message().messageId(t.messageId()),o.message().messagePersonId(t.messagePersonId()),o.message().to(t.to()),o.message().cc(t.cc()),o.message().bcc(t.bcc()),o.message().subject(t.subject()),o.message().messageText(t.messageText()),o.message().smsMessage(t.smsMessage()),o.message().voiceText(t.voiceText()),o.message().socialText(t.socialText()),o.message().sendEmail(t.sendEmail()),o.message().sendSMS(t.sendSMS()),o.message().sendVoice(t.sendVoice()),o.message().sendSocial(t.sendSocial()),o.message().attachments(t.attachments()),o.message().updateContactLog(t.updateContactLog()),o.message().contactCategory(t.contactCategory()),o.message().isMeeting(t.isMeeting()),o.message().meetingStartDate(t.meetingStartDate()),o.message().meetingEndDate(t.meetingEndDate()),o.message().vidConfId(t.vidConfId()),o.message().surveyGU(t.surveyGU()),o.message().recurrence(t.recurrence()),o.message().bccSender(t.bccSender()),o.message().shouldTranslate(t.shouldTranslate()),o.message().scheduleSendDate(t.scheduleSendDate()),o.message().isNewMessage(t.isNewMessage());var b=moment(t.meetingStartDate()),f=moment(t.meetingEndDate()),g=moment.duration(f.diff(b));o.meetingDate(b.toDate()),o.meetingStartTime(b.toDate()),o.hours(g.hours()),o.minutes(g.minutes());var v=o.fromOptionsInternal().filter((function(e){var i,n;return e.id()===(null===(i=t.fromOption())||void 0===i?void 0:i.id())&&e.fromType()===(null===(n=null==t?void 0:t.fromOption())||void 0===n?void 0:n.fromType())}))[0];v&&o.message().fromOption(v)}switch(o.message().bccSender(o.settingsInternal.autoBccSender()),m.SM.contactLogOption){case c.ContactLogOption.NoLogging:o.message().updateContactLog(!1);break;case c.ContactLogOption.AlwaysLog:o.message().updateContactLog(!0)}o.composeOptions(e),o.onTitleUpdated&&o.onTitleUpdated(o.titleText()),m.SM.createEditor({element:$("#editor-"+o.instanceId)[0],showViewTemplates:m.SM.userType===c.UserType.Staff,showInsertToken:m.SM.userType===c.UserType.Staff,onChange:function(){o.incrementIsDirty(),o.message().sendEmail(!0),o.message().voiceType(c.VoiceType.TextToSpeech)},onPaste:function(e){u.MiscService.getAttachmentsFromLinks([e]).then((function(e){var t=e[0];o.message().messagePersonId()?o.addLinkAttachment(t):o.saveMessage().then((function(){o.addLinkAttachment(t)}))}))}}).then((function(i){o.classicEditor=i,o.classicEditor.setData(unescape(o.message().messageText())),e.editorType===r.New&&t&&t.attachments().length>0&&o.saveMessage().then((function(){for(var e=0,i=t.attachments();e<i.length;e++){var n=i[e];o.addLinkAttachment(n)}}))})),setTimeout((function(){if(e.scTemplateGU&&(o.template.templateId(i.templateId()),o.template.organizationId(i.organizationId()),o.template.name(i.name()),o.template.priority(i.priority()),o.message().sendEmail(i.sendEmail()),o.message().sendSMS(i.sendSMS()),o.message().sendVoice(i.sendVoice()),o.message().sendSocial(i.sendSocial())),o.autoSaveDate(""),o.clearIsDirty(),o.showTo(o.message().to().length>0||!m.SM.isTeacher),o.showCc(o.message().cc().length>0),o.showBcc(o.message().bcc().length>0||m.SM.isTeacher),e.suppressUi?o.preSendMessage():o.isEmbedded()||(o.message().isMeeting()?o.topicHasFocus(!0):o.subjectHasFocus(!0)),m.SM.aiEnabled){var t=ST.dataFor($("#smGenerator")[0]);t.events.onReplace=function(e){return o.createMessage(e)},t.events.onClose=function(){return o.showGenerator(!1)}}}),100)}))}))}))},e.prototype.createMessage=function(e){var t,i=e.split("\n").join("</br>");this.classicEditor.setData(unescape(i+(null!==(t=this.originalMessageText())&&void 0!==t?t:"")))},e.prototype.generateResponses=function(){var e=this;this.responsesLoading(!0),u.MiscService.getResponses(this.message().messagePersonId()).then((function(t){e.replyResponses(t),e.responsesLoading(!1)}))},e.prototype.generateReply=function(e){var t=this;u.MiscService.getReplyFromResponse(this.message().messagePersonId(),e).then((function(e){t.createMessage(e)}))},e.prototype.toggleGenerator=function(){this.showGenerator(!this.showGenerator())},e.prototype.addLinkAttachment=function(e){var t=this;this.message().attachments().filter((function(t){return t.link()===e.link()})).length>0||u.MessageService.addAttachment(this.message().messagePersonId(),e).then((function(){t.message().attachments.push(e)})).catch((function(){$.pnotify_error("Unable to add link: ".concat(e.name()))}))},e.prototype.setMeetingStartTimeNow=function(){this.meetingDate(new Date),this.meetingStartTime(new Date)},e.prototype.send=function(){this.message().isMeeting()?this.validateMeeting():this.validateMessage()},e.prototype.validateMeeting=function(){if(!this.composeOptions().suppressUi){var e=this.meetingDate();e.setHours(this.meetingStartTime().getHours()),e.setMinutes(this.meetingStartTime().getMinutes()),e.setSeconds(0),this.message().meetingStartDate(e);var t=new Date(this.meetingDate().getTime()+6e4*this.hours()*60+6e4*this.minutes());this.message().meetingEndDate(t)}var i=new Date;i.setHours(0,0,0,0),this.message().meetingStartDate()<i?h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.meetingStartDate(),m.SM.translation.meetingStartDateInPast()):this.validateMessage()},e.prototype.validateSurveyInfo=function(){return this.surveyBeginDateControl.option("isValid")?this.surveyBeginTimeControl.option("isValid")?this.surveyEndDateControl.option("isValid")?this.surveyEndTimeControl.option("isValid")?void 0:["End Time","You must enter a valid end time."]:["End Date","You must enter a valid end date."]:["Begin Time","You must enter a valid start time."]:["Begin Date","You must enter a valid start date."]},e.prototype.validateMessage=function(){var e=this.message().surveyGU()&&this.validateSurveyInfo(),t=this.message().to().length+this.message().cc().length+this.message().bcc().length;this.composeOptions().isCommunication?this.confirmCommunication():e?h.SMDialog.showMessage(h.SMDialogButtons.Ok,e[0],e[1]):this.message().isMeeting()&&!this.meetingDateControl.option("isValid")?h.SMDialog.showMessage(h.SMDialogButtons.Ok,"Start Date","You must enter a valid start date."):this.message().isMeeting()&&!this.meetingStartTimeControl.option("isValid")?h.SMDialog.showMessage(h.SMDialogButtons.Ok,"Start Time","You must enter a valid start time."):0===t?h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.noRecipientsTitle(),m.SM.translation.noRecipientsText()):this.message().subject()||this.message().messageText()?this.confirmMessage():h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.blankSubjectAndBodyTitle(),m.SM.translation.blankSubjectAndBodyText())},e.prototype.confirmMessage=function(){return n(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.totalResolvedRecipientCount()>10?[4,h.SMDialog.showMessageAsync(h.SMDialogButtons.YesNo,m.SM.translation.format(m.SM.translation.recipientCountWarningTitle(),{recipientCount:this.totalResolvedRecipientCount()}),m.SM.translation.format(m.SM.translation.recipientCountWarningText(),{recipientCount:this.totalResolvedRecipientCount()}))]:[3,2];case 1:if("No"===e.sent())return[2];e.label=2;case 2:return this.preSendMessage(),[2]}}))}))},e.prototype.confirmCommunication=function(){var e=this;if(this.composeOptions().isCommunication){var t=[];this.message().sendEmail()&&t.push("Email"),this.message().sendSMS()&&t.push("Text"),this.message().sendVoice()&&t.push("Voice"),this.message().sendSocial()&&t.push("Social");var i=[];this.sendAllStaff()&&i.push("Staff"),this.sendAllParents()&&i.push("Parents"),this.sendAllStudents()&&i.push("Students");var n=this.combineWords(t),a=this.composeOptions().isUrgent?this.combineWords(i):"Selected Recipients",s="<p>Are you sure you would like to send the following message?</p>";this.composeOptions().isUrgent&&(s+="<p><strong>Focus:</strong> ".concat(this.focusedOrganization(),"</p>")),s+="<p><strong>Type:</strong> ".concat(n,"</p>\n                <p><strong>To:</strong> ").concat(a,"</p>"),h.SMDialog.showMessage(h.SMDialogButtons.YesNo,"Confirm Message",s,(function(t){"Yes"===t&&e.preSendMessage()}))}else this.preSendMessage()},e.prototype.combineWords=function(e){return e.slice(0,-1).join(", ")+(e.length<=1?"":" and ")+e.slice(-1)},e.prototype.preSendMessage=function(){var e,t,i=this;if(this.message().messageText(encodeURIComponent(this.classicEditor.getData())),this.composeOptions().suppressUi&&this.classicEditor.destroy(),this.composeOptions().isUrgent&&(this.message().isUrgent(!0),this.addUrgentRecipients()),!this.composeOptions().isCommunication)switch(this.message().sendEmail(!1),this.message().sendSMS(!1),this.message().sendVoice(!1),this.message().sendSocial(!1),this.selectedTab().id){case 0:this.message().sendEmail(!0);break;case 1:this.message().sendSMS(!0);break;case 2:this.message().sendVoice(!0);break;case 4:this.message().sendSocial(!0)}if(this.message().isMeeting()){var n=m.SM.meetingAuth&&!this.message().hasParentRecipients;this.message().vidConfId()?VideoConferenceAPI.Update({vidConfGU:this.message().vidConfId(),name:this.message().subject(),startDate:this.message().meetingStartDate(),endDate:this.message().meetingEndDate(),recurOptions:null===(e=this.message().recurrence())||void 0===e?void 0:e.getDataUpperCase(),meetingAuth:n,success:function(e){i.message().meetingStartDate()<=new Date&&VideoConferenceAPI.JoinStartMeeting({vidConfGU:i.message().vidConfId()}),i.sendMessage()}}):VideoConferenceAPI.Create({name:this.message().subject(),startDate:this.message().meetingStartDate(),endDate:this.message().meetingEndDate(),recurOptions:null===(t=this.message().recurrence())||void 0===t?void 0:t.getDataUpperCase(),meetingAuth:n,success:function(e){var t=e.VidConfGU;t?(i.message().meetingStartDate()<=new Date&&VideoConferenceAPI.JoinStartMeeting({vidConfGU:t}),i.message().vidConfId(t),i.sendMessage()):m.SM.handleError(null,"Unable to create meeting")}})}else this.message().surveyGU()?this.sendMessage().then((function(){var e=$("#PrimaryView").viewData().FindControl("SURVEY_COLLECTORS");e&&e.Refresh(!0)})):this.sendMessage()},e.prototype.addUrgentRecipients=function(){var e=c.GroupUserType.None;this.sendAllStaff()&&(e|=c.GroupUserType.Staff),this.sendAllParents()&&(e|=c.GroupUserType.Parent),this.sendAllStudents()&&(e|=c.GroupUserType.Student),e!==c.GroupUserType.None&&this.addMassRecipient(e)},e.prototype.addMassRecipient=function(e){var t=new c.Recipient;t.recipientList(c.RecipientList.MassEmail),t.id(crypto.randomUUID()),t.grades(null),t.groupUserTypes(e),t.organizationYearId(ST.FocusOrgYearGU),this.message().to().push(t)},e.prototype.sendMessage=function(){var e=this;this.composeOptions().suppressUi||(this.loadMessage("Sending"),this.loading(!0)),this.settingsInternal.autoBccSender(this.message().bccSender());var t=new c.Message(this.message().getData());return u.MessageService.sendMessage(t).then((function(t){if(e.clearIsDirty(),e.messageSent=!0,e.composeOptions().suppressUi||e.loading(!1),e.isEmbedded()?(e.initEditor({editorType:r.New},new c.Message),$.pnotify_success("Message sent!")):e.disableCompose(),m.SM.showUndoSend(t),e.onMessageAction)try{e.onMessageAction(o.Send)}catch(e){}})).catch((function(){e.loading(!1)}))},e.prototype.disableCompose=function(){window.onbeforeunload=null,this.isDirtyCounterSub.dispose(),this.disableDragAndDrop(),m.SM.$(".ck-editor__editable")[0]&&this.classicEditor.destroy()},e.prototype.autoSave=function(){var e=this;return new Promise((function(t,i){e.autoSaveState(l.Saving),e.saveMessage().then((function(){e.autoSaveDate(moment(Date.now()).format("h:mm:ss A")),e.autoSaveState(l.Successful),t()})).catch((function(t){e.autoSaveState(l.Failed),i(t)}))}))},e.prototype.close=function(){var e=this;this.isUploadingAttachment()||this.isUploadingAttachmentDragDrop?h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.attachmentsUploading(),m.SM.translation.attachmentsUploadingWaitOrCancel()):this.message().isMeeting()&&!this.messageSent?h.SMDialog.showDialog({message:"Are you sure you want to discard your changes?",onDismissed:function(t){"Discard"===t&&(e.message().messagePersonId()&&u.MessageService.discardDraft(e.message().messagePersonId()),e.disableCompose(),e.onMessageAction&&e.onMessageAction(o.DiscardDraft))},rightButtons:[{label:"Discard Changes",value:"Discard",css:"btn btn-danger"},{label:"Return to Meeting Request",value:"Return",css:"btn btn-primary"}],title:"Meeting Request",type:f.SMDialogType.Message}):this.isDirty()?(this.loadMessage("Saving"),this.loading(!0),this.saveMessage().then((function(){e.autoSaveState(l.Successful),e.onMessageAction&&e.onMessageAction(o.SaveDraft),e.loading(!1),e.disableCompose()})).catch((function(t){e.loading(!1),h.SMDialog.showDialog({message:"How would you like to proceed?",onDismissed:function(t){"Discard"===t&&(e.disableCompose(),e.onMessageAction&&e.onMessageAction(o.SaveDraft))},rightButtons:[{label:"Discard Changes",value:"Discard",css:"btn btn-danger"},{label:"Return to Message",value:"Return",css:"btn btn-primary"}],title:"Unable to Save Message",type:f.SMDialogType.Message})}))):(this.disableCompose(),this.onMessageAction&&this.onMessageAction(o.SaveDraft))},e.prototype.saveMessage=function(){var e=this;return new Promise((function(t,i){e.message().messageText(encodeURIComponent(e.classicEditor.getData())),e.composeOptions().isEditingTemplate?(e.template.organizationId(e.composeOptions().templateOrgGU),e.template.emailSubject(e.message().subject()),e.template.emailBody(e.message().messageText()),e.template.smsMessage(e.message().smsMessage()),e.template.voiceText(e.message().voiceText()),e.template.socialText(e.message().socialText()),e.template.sendEmail(e.message().sendEmail()),e.template.sendSMS(e.message().sendSMS()),e.template.sendVoice(e.message().sendVoice()),e.template.sendSocial(e.message().sendSocial()),u.TemplateService.saveTemplate(e.template).then((function(i){e.template.templateId(i),e.clearIsDirty(),t()})).catch((function(e){i(e)}))):u.MessageService.saveDraft(e.message()).then((function(i){e.message().messagePersonId(i),e.clearIsDirty(),t()})).catch((function(e){i(e)}))}))},e.prototype.openAttachment=function(e){switch(e.attachmentType()){case c.AttachmentType.File:e.status()===c.AttachmentStatus.Complete&&(window.ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(e.attachmentId()),$("#openAttachmentForm").submit());break;case c.AttachmentType.Survey:break;case c.AttachmentType.STQuery:ST.OpenViewWindow("E51430E2-DFD1-4348-9266-BDCFB437820D",null,null,{SERVER_STATE:{D:[{"@K":"SM_ATTACH_GU","@V":e.attachmentId()},{"@K":"SM_QUERY_XML","@V":e.queryXml()}]}});break;default:ST.OpenViewWindow(e.viewGU(),e.tabGU(),e.identityGU())}},e.prototype.showTemplateDropDown=function(e){this.templatePopoverSettings.visible()?this.templatePopover.hide():this.templatePopover.show($(e))},e.prototype.updateSignature=function(e){this.signatureInternal=e},e.prototype.init=function(){var e=this;this.instanceId=ST.UUIDv4(),$("#uploadFrame").on("load",this.uploadFrameLoaded.bind(this)),S.SMScheduleSendViewModel.instantiate({onInitialized:function(t){e.scheduleSend=t}}),v.SMRecurrenceViewModel.instantiate({onInitialized:function(t){e.recurrence=t},onUpdate:function(t){e.message().recurrence(t)}}),g.SMEditTemplateViewModel.instantiate({onInitialized:function(t){e.editTemplate(t)}}),this.loadPanelSettings={message:this.loadMessage,position:{of:"#composeDialogDrag .modal-content"},shading:!0,shadingColor:"rgba(0, 0, 0, 0.4)",visible:this.loading},this.toRecipientListOptions={addRecipient:this.addRecipientVM,recipients:this.message().to,title:m.SM.translation.to(),isMeeting:this.message().isMeeting,studentGU:this.studentGU},this.ccRecipientListOptions={addRecipient:this.addRecipientVM,recipients:this.message().cc,title:m.SM.translation.cc(),isMeeting:this.message().isMeeting,studentGU:this.studentGU},this.bccRecipientListOptions={addRecipient:this.addRecipientVM,recipients:this.message().bcc,title:m.SM.translation.bcc(),isMeeting:this.message().isMeeting,studentGU:this.studentGU,showQuickAddDefault:!0},this.fromSettings={displayExpr:"description",items:this.fromOptionsInternal,onInitialized:function(t){e.fromSelectBox=t.component},value:this.message().fromOption},this.contactCategorySettings={displayExpr:"name",items:this.contactCategoriesInternal,onInitialized:function(t){e.contactCategorySelectBox=t.component},valueExpr:"id",value:this.message().contactCategory,disabled:d.pureComputed((function(){return!e.message().updateContactLog()}))},this.voiceTTSLanguagesSettings={displayExpr:"description",items:this.voiceTTSLanguagesInternal,onInitialized:function(t){e.voiceTTSLanguagesSelectBox=t.component},value:this.previewTTSLanguage},this.message().to.subscribe((function(){e.incrementIsDirty()})),this.message().cc.subscribe((function(){e.incrementIsDirty()})),this.message().bcc.subscribe((function(t){e.incrementIsDirty(),t.length&&e.showBcc(!0)})),this.message().subject.subscribe((function(){e.incrementIsDirty(),e.message().sendEmail(!0)})),this.message().attachments.subscribe((function(){e.incrementIsDirty(),e.message().sendEmail(!0)})),this.message().smsMessage.subscribe((function(){e.incrementIsDirty(),e.message().sendSMS(!0)})),this.message().voiceText.subscribe((function(){e.incrementIsDirty(),e.message().sendVoice(!0)})),this.message().socialText.subscribe((function(){e.incrementIsDirty(),e.message().sendSocial(!0)})),this.template.name.subscribe((function(){e.incrementIsDirty()})),this.template.priority.subscribe((function(){e.incrementIsDirty()})),this.sendAllStaff.subscribe((function(){e.incrementIsDirty()})),this.sendAllParents.subscribe((function(){e.incrementIsDirty()})),this.sendAllStudents.subscribe((function(){e.incrementIsDirty()})),this.message().sendEmail.subscribe((function(){e.incrementIsDirty()})),this.message().sendSMS.subscribe((function(){e.incrementIsDirty()})),this.message().sendVoice.subscribe((function(){e.incrementIsDirty()})),this.message().sendSocial.subscribe((function(){e.incrementIsDirty()})),this.templatePopoverSettings={deferRendering:!1,onContentReady:function(t){e.templatePopover=t.component},shading:!1,visible:d.observable(!1),width:275},this.templateSearchSettings={mode:"search",onValueChanged:function(t){e.filterTemplateData()},placeholder:"Search",value:d.observable(""),valueChangeEvent:"keyup"},this.templateListSettings={dataSource:this.templateDataFiltered,height:"100%",onContentReady:function(t){e.templateList=t.component},onItemClick:function(t){var i=t.itemData,n=i.messageText(),a=e.message().to()[0];if(a){var s="",o="";switch(a.recipientList()){case c.RecipientList.Parents:s=a.associatedStudentId(),o=a.id();break;case c.RecipientList.Students:s=a.id()}s||o?u.UserTemplateService.getUserTemplateMerged(i.userTemplateId(),s,o).then((function(t){e.classicEditor.setData(t,e.classicEditor.model.document.selection.getFirstPosition())})):e.classicEditor.setData(n,e.classicEditor.model.document.selection.getFirstPosition())}else e.classicEditor.setData(n,e.classicEditor.model.document.selection.getFirstPosition());e.templatePopover.hide()}},this.showAutoSaving=d.pureComputed((function(){return e.autoSaveState()===l.Saving})),this.autoSaveResults=d.pureComputed((function(){switch(e.autoSaveState()){case l.Successful:return"".concat(m.SM.translation.autosavedAt()," ").concat(e.autoSaveDate());case l.Failed:return"Autosave Failed";default:return null}})),this.recurrenceText=d.pureComputed((function(){return e.message().recurrence()?(e.message().recurrence().startDate(e.meetingDate()),e.message().recurrence().startTime(e.meetingStartTime()),e.message().recurrence().stopDate(new Date(e.message().recurrence().stopDate())),VideoConferenceAPI.RecurText(e.message().recurrence().getDataUpperCase())):"None"})),this.sendText=d.pureComputed((function(){return e.message().isMeeting()?e.message().vidConfId()?"Send Updated Meeting Request":"Send Meeting Request":m.SM.translation.send()})),this.totalResolvedRecipientCount=d.computed((function(){var t=0;e.message().to().forEach((function(e){return t+=e.personCount()})),e.message().cc().forEach((function(e){return t+=e.personCount()})),e.message().bcc().forEach((function(e){return t+=e.personCount()}));var i=t>0?"".concat(t," Recipients"):"";return e.recipientCountText(i),t})),this.communicationTabOptions={dataSource:this.getCustomStore(),itemTemplate:function(t,i,n){if(n.append('<span class="'.concat(t.icon,'" style="font-size: 2rem; padding-right: 5px;"></span>\n                    <span style="padding-right: 20px;">').concat(t.text,"</span>")),e.composeOptions().isCommunication){var a=$("<span/>").addClass(t.toggle()?"fa-regular fa-square-check":"fa-regular fa-square").on("click",(function(e){t.toggle(!t.toggle())}));t.toggle.subscribe((function(e){a.attr("class",e?"fa-regular fa-square-check":"fa-regular fa-square")})),n.append(a)}},onContentReady:function(t){var i;void 0===e.communicationTab&&(e.communicationTab=t.component),e.selectedTab({id:null!==(i=e.defaultCommunicationType)&&void 0!==i?i:c.CommunicationType.Email})},scrollByContent:!1,scrollingEnabled:!1,showNavButtons:!1,selectedItem:this.selectedTab},this.voiceTypeOptions={dataSource:[{id:0,text:"Text To Speech",type:c.VoiceType.TextToSpeech},{id:1,text:"Record My Message",type:c.VoiceType.Audio}],displayExpr:"text",layout:"horizontal",valueExpr:"type",value:this.message().voiceType},this.loadTemplateData()},e.prototype.getCustomStore=function(){var e=this;return new p.DevExpress.data.CustomStore({key:"id",load:function(t){return e.getCommunicationData()}})},e.prototype.getCommunicationData=function(){var e=this;return new Promise((function(t,i){var n=[{icon:"fas fa-envelope",text:"Email",id:c.CommunicationType.Email,toggle:e.message().sendEmail}];e.allowSMS()&&m.SM.smsTabVisible&&n.push({icon:"fas fa-sms",text:"Text",id:c.CommunicationType.Text,toggle:e.message().sendSMS}),e.allowVoice()&&m.SM.voiceTabVisible&&n.push({icon:"fas fa-phone",text:"Voice",id:c.CommunicationType.Voice,toggle:e.message().sendVoice}),e.allowSocial()&&m.SM.socialTabVisible&&n.push({icon:"fa-regular fa-share-nodes",text:"Social",id:c.CommunicationType.Social,toggle:e.message().sendSocial}),t(n)}))},Object.defineProperty(e.prototype,"titleText",{get:function(){var e=this;return d.pureComputed((function(){return e.message().isMeeting()?e.message().vidConfId()?"Update Meeting Request":"New Meeting Request":e.composeOptions().isEditingTemplate?"Edit Template":m.SM.translation.newMessage()}))},enumerable:!1,configurable:!0}),e.prototype.bodyDragOver=function(e){e.preventDefault(),e.stopPropagation(),this.draggingFiles(!0)},e.prototype.disableDragAndDrop=function(){m.SM.isAdvancedUpload()&&$("sm-editor .modal-body").off("dragover",this.bodyDragOver.bind(this)).off("dragleave").off("drop")},e.prototype.openScheduleSend=function(){var e=this;this.scheduleSend.create((function(t){e.message().scheduleSendDate(t),e.send()}))},e.prototype.filterTemplateData=function(){var e=this.templateSearchSettings.value().toLowerCase(),t=this.templateData().filter((function(t){return t.name().toLowerCase().indexOf(e)>-1}));this.templateDataFiltered(t)},e.prototype.loadTemplateData=function(){var e=this;u.UserTemplateService.getUserTemplates().then((function(t){e.templateData(t),e.filterTemplateData()}))},e.prototype.newTemplate=function(){var e=this;this.templatePopover.hide(),h.SMDialog.showInput("New Template From Message","Enter template name","New Template","You must enter a valid name.",(function(t,i){"Save"===t&&u.UserTemplateService.addUserTemplate(new c.UserTemplate({messageText:e.classicEditor.getData(),name:i})).then((function(){e.loadTemplateData()}))}))},e.prototype.addDialogClosed=function(){},e.prototype.incrementIsDirty=function(){this.isDirty(!0),this.isDirtyCounter(this.isDirtyCounter()+1)},e.prototype.clearIsDirty=function(){this.isDirty(!1)},e.prototype.showTo=function(e){void 0===e&&(e=!0),this.toVisible(e),this.showToVisible(!e)},e.prototype.showCc=function(e){void 0===e&&(e=!0),this.ccVisible(e),this.showCcVisible(!e)},e.prototype.showBcc=function(e){void 0===e&&(e=!0),this.bccVisible(e),this.showBccVisible(!e)},e.prototype.addAttachment=function(){$("#uploadFile").click()},e.prototype.removeAttachment=function(e){var t=this;e.status()===c.AttachmentStatus.UploadFailed||e.status()===c.AttachmentStatus.WaitingToUpload||e.attachmentType()===c.AttachmentType.Link||e.attachmentType()===c.AttachmentType.Survey?this.message().attachments.remove(e):(e.status()===c.AttachmentStatus.Uploading&&(this.uploadCancelled=!0,this.currentXhr.abort()),e.attachmentId()?u.MessageService.deleteAttachment(this.message().messagePersonId(),e.attachmentId()).then((function(i){t.message().attachments.remove(e)})):this.message().attachments.remove(e))},e.prototype.uploadAttachments=function(e,t){var i=this;void 0===t&&(t=!1);var n=[],a=[],s=1048576,o="";if(m.SM.isAdvancedUpload()){for(var r=function(e){var i=!0,o=e.name.split(".").pop().toUpperCase();if(m.SM.blockedExtensions.filter((function(e){return e.toUpperCase()===o})).length>0?(a.push(e),i=!1):e.size>=m.SM.maxAttachmentSizeMB*s&&(n.push(e),i=!1),i){var r=new c.Attachment;r.name(e.name),r.status(c.AttachmentStatus.WaitingToUpload),r.file(e),t&&"boolean"==typeof t&&r.attachmentType(c.AttachmentType.Voice),l.message().attachments.push(r)}},l=this,d=0,u=e;d<u.length;d++)r(M=u[d]);if(a.length>0){o+="<strong>".concat(m.SM.translation.attachmentExtensionBlocked(),"</strong>"),o+="<ul>";for(var p=0,b=a;p<b.length;p++){var f=(M=b[p]).name.split(".").pop().toUpperCase();o+="<li>".concat(M.name," (").concat(f,")</li>")}o+="</ul>"}if(n.length>0){var g=m.SM.translation.format(m.SM.translation.attachmentTooLarge(),{maxAttachmentSizeMB:m.SM.maxAttachmentSizeMB});o+="<strong>".concat(g,"</strong>"),o+="<ul>";for(var v=0,S=n;v<S.length;v++){var M=S[v];o+="<li>".concat(M.name," (").concat((M.size/s).toFixed(0)," MB)</li>")}o+="</ul>"}o.length>0&&h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.unableToAddAttachment(),o)}else{var y=$("#uploadFile").val().toString();if(0===y.length)return;var T=y.indexOf("\\")>=0?y.lastIndexOf("\\"):y.lastIndexOf("/"),w=y.substring(T);0!==w.indexOf("\\")&&0!==w.indexOf("/")||(w=w.substring(1));var x=new c.Attachment;x.name(w),x.attachmentId("-1"),x.status(c.AttachmentStatus.Uploading),this.message().attachments.push(x)}$("#uploadFile").val(""),this.message().messagePersonId()?this.submitAttachments():this.saveMessage().then((function(){i.submitAttachments()}))},e.prototype.submitAttachments=function(){m.SM.isAdvancedUpload()?(this.uploadErrors=[],this.uploadNextAttachment()):($("#messagePersonId").val(this.message().messagePersonId()),$("#uploadRequest").val('\n                <REV_REQUEST>\n                    <EVENT NAME="Rev_Upload">\n                        <REQUEST DA_OBJ_ID="A59FEDA5-5C90-4452-B91F-51E09FC3747D"></REQUEST>\n                    </EVENT>\n                </REV_REQUEST>'),this.isUploadingAttachment(!0),$("#uploadForm").submit(),setTimeout((function(){$("#uploadFile").val("")}),500))},e.prototype.uploadNextAttachment=function(){var e=this;if(!this.isUploadingAttachmentDragDrop){this.uploadCancelled=!1;var t=this.message().attachments().filter((function(e){return e.status()===c.AttachmentStatus.WaitingToUpload}))[0];if(t){t.status(c.AttachmentStatus.Uploading),this.isUploadingAttachmentDragDrop=!0;var i=this.composeOptions().isEditingTemplate,n=this.template.templateId();u.MessageService.addAttachment(this.message().messagePersonId(),t,(function(e){t.progress(e)}),(function(t){return e.currentXhr=t}),i,n).then((function(i){if(i.successful){var n=i.data;t.attachmentId(n),t.status(c.AttachmentStatus.Complete),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()}else t.status(c.AttachmentStatus.UploadFailed),e.uploadErrors.push(i.errorMessage),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()})).catch((function(){e.uploadCancelled||t.status(c.AttachmentStatus.UploadFailed),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()}))}else if(this.uploadErrors.length>0){var a=this.uploadErrors.map((function(e){return"<li>".concat(e,"</li>")})).join("");h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.unableToAddAttachment(),"<ul>".concat(a,"</ul>"))}}},e.prototype.uploadFrameLoaded=function(){if(this.isUploadingAttachment()){this.isUploadingAttachment(!1);var e=$($("#uploadFrame")[0].contentDocument),t=this.message().attachments().filter((function(e){return"-1"===e.attachmentId()}))[0];if(e.find("MANUAL_FILE").length>0){var i=e.find("MANUAL_FILE").attr("UPLOADED_FILE_GU");t.attachmentId(i),t.status(c.AttachmentStatus.Complete)}else{this.message().attachments.remove(t);var n;n=e.find("ERROR").length>0?e.find("ERROR").text():e.find("title").text(),h.SMDialog.showMessage(h.SMDialogButtons.Ok,m.SM.translation.unableToAddAttachment(),n)}}},e.prototype.removeTemplate=function(e){var t=this;this.templatePopover.hide(),h.SMDialog.showMessage(h.SMDialogButtons.YesNo,"Delete Template","Are you sure you want to delete the template '".concat(e.name(),"'?"),(function(i){"Yes"===i&&u.UserTemplateService.deleteUserTemplate(e.userTemplateId()).then((function(){t.loadTemplateData()}))}))},e.prototype.doEditTemplate=function(e){this.templatePopover.hide(),this.editTemplate().show(e)},Object.defineProperty(e.prototype,"fromOptions",{get:function(){var e=this;return new Promise((function(t,i){m.SM.userType!==c.UserType.Staff?t(null):e.fromOptionsInternal.length>0?(e.message().fromOption(e.fromOptionsInternal()[0]),t(e.fromOptionsInternal)):u.MiscService.getFromOptions().then((function(i){e.fromOptionsInternal(i),e.message().fromOption(e.fromOptionsInternal()[0]),t(e.fromOptionsInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signature",{get:function(){var e=this;return new Promise((function(t,i){e.signatureInternal?t(e.signatureInternal):u.MiscService.getSignature().then((function(i){e.signatureInternal=i,t(e.signatureInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){var e=this;return new Promise((function(t,i){e.settingsInternal?t(e.settingsInternal):u.MiscService.getSettings().then((function(i){e.settingsInternal=i,m.SM.undoSendSeconds=i.undoSendSeconds(),t(e.settingsInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contactCategories",{get:function(){var e=this;return new Promise((function(t,i){e.contactCategoriesInternal.length>0?t(e.contactCategoriesInternal):u.MiscService.getContactCategories().then((function(i){i.unshift(new c.ContactCategory({id:"-1",name:""})),e.contactCategoriesInternal(i),t(e.contactCategoriesInternal)}))}))},enumerable:!1,configurable:!0}),e.prototype.loadTTSLanguages=function(){var e=this;return new Promise((function(t,i){e.voiceTTSLanguagesInternal.length>0?t(e.voiceTTSLanguagesInternal):u.MiscService.getRevLanguages().then((function(i){e.voiceTTSLanguagesInternal(i),t(e.voiceTTSLanguagesInternal)}))}))},Object.defineProperty(e.prototype,"currentContactLogOption",{get:function(){return this.message().isMeeting()?m.SM.vidConfContactLogOption:m.SM.contactLogOption},enumerable:!1,configurable:!0}),e.prototype.editRecurrence=function(){this.recurrence.show(this.message().recurrence())},e.prototype.removeRecurrence=function(){this.message().recurrence(null)},e.prototype.addVoiceRecording=function(e){var t=new File([e],"VoiceRecording.mp3");this.uploadAttachments([t],!0)},e.prototype.handleVoiceTTSPreviewClick=function(){u.MiscService.getVoiceTTSPreview(this.message().voiceText(),this.previewTTSLanguage().code()).then((function(e){var t=window.URL.createObjectURL(m.SM.Base64ToBlob(e)),i=new Audio(t);i.onloadedmetadata=function(){i.play()},i.load()}))},e.prototype.updateResolvedRecipientCount=function(e,t,i){var n,a,o,r,l,d,c,u,p,h,m,b;this.message()&&s(s(s(s(s(s(s(s([],this.message().to(),!0),this.message().cc(),!0),this.message().bcc(),!0),this.addRecipientVM().recipients(),!0),null!==(a=null===(n=this.addRecipientVM().editContactGroupVM)||void 0===n?void 0:n.recipients())&&void 0!==a?a:[],!0),null!==(l=null===(r=null===(o=this.addRecipientVM().editContactGroupVM)||void 0===o?void 0:o.addRecipient())||void 0===r?void 0:r.recipients())&&void 0!==l?l:[],!0),null!==(u=null===(c=null===(d=this.addRecipientVM().contactGroupSearch())||void 0===d?void 0:d.editContactGroupVM)||void 0===c?void 0:c.recipients())&&void 0!==u?u:[],!0),null!==(b=null===(m=null===(h=null===(p=this.addRecipientVM().contactGroupSearch())||void 0===p?void 0:p.editContactGroupVM)||void 0===h?void 0:h.addRecipient())||void 0===m?void 0:m.recipients())&&void 0!==b?b:[],!0).map((function(n){n.id()===e&&n.lastRecipientCountRequestId===t&&(n.loadingRecipientCount(!1),n.personCount(i))}))},e}();t.SMEditorViewModel=y,t.SMEditorComponent={template:M,viewModel:y}},114:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SMMessageComponent=t.SMMessageViewModel=void 0;var o=i(1032),r=i(6853),l=i(3720),d=i(6885),c=i(2617),u=i(4827),p=function(){function e(e){var t,i;this.message=o.observable(),this.printLayout=!1,this.recipientsVisible=o.observable(!1),this.selectedTab=o.observable({id:0}),this.originalTextVisible=o.observable(!1);var n=e.options;this.message=n.message,this.printLayout=null!==(t=n.printLayout)&&void 0!==t&&t,this.isAuditAdmin=null!==(i=n.isAuditAdmin)&&void 0!==i&&i,this.init(),c.SM.messageVM=this}return Object.defineProperty(e.prototype,"recipientBadgeType",{get:function(){return this.message().messageStatus()===r.MessageStatus.Scheduled?r.RecipientBoxBadgeType.ResolvedRecipientCount:this.isAuditAdmin||this.message().messageStatus()===r.MessageStatus.Sent&&this.message().isSender()?r.RecipientBoxBadgeType.ReadStatus:r.RecipientBoxBadgeType.Hidden},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showAudioPlayer",{get:function(){return this.message().sendVoice()&&this.message().voiceType()===r.VoiceType.Audio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCommunicationTabs",{get:function(){var e=0;return this.message().sendEmail()&&e++,this.message().sendSMS()&&e++,this.message().sendVoice()&&e++,this.message().sendPushNotification()&&e++,e>1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showEmailTab",{get:function(){var e;return(null===(e=this.selectedTab())||void 0===e?void 0:e.id)===r.CommunicationType.Email},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSMSTab",{get:function(){var e;return(null===(e=this.selectedTab())||void 0===e?void 0:e.id)===r.CommunicationType.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showVoiceTab",{get:function(){var e;return(null===(e=this.selectedTab())||void 0===e?void 0:e.id)===r.CommunicationType.Voice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPushNoteTab",{get:function(){var e;return(null===(e=this.selectedTab())||void 0===e?void 0:e.id)===r.CommunicationType.PushNote},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;this.message.subscribe((function(){if(!1===e.printLayout&&e.recipientsVisible(!1),e.message()&&e.message().isMeeting()&&e.message().meetingStartDate()){var t=new Date(e.message().meetingStartDate()),i=new Date(t.getTime()-9e5);c.SM.openVidConfId&&new Date>=i&&(VideoConferenceAPI.JoinStartMeeting({vidConfGU:c.SM.openVidConfId}),c.SM.openVidConfId=null)}})),this.communicationTabOptions={dataSource:this.getCustomStore(),itemTemplate:function(e,t,i){i.append('<span class="'.concat(e.icon,'" style="font-size: 2rem; padding-right: 5px;"></span>\n                    <span style="padding-right: 20px;">').concat(e.text,"</span>"))},onContentReady:function(t){void 0===e.communicationTab&&(e.communicationTab=t.component);var i=e.message().sendEmail()?r.CommunicationType.Email:e.message().sendSMS()?r.CommunicationType.Text:e.message().sendVoice()?r.CommunicationType.Voice:e.message().sendPushNotification()?r.CommunicationType.PushNote:r.CommunicationType.Email;e.selectedTab({id:i})},scrollByContent:!1,scrollingEnabled:!1,showNavButtons:!1,selectedItem:this.selectedTab}},e.prototype.toggleRecipients=function(){this.recipientsVisible(!this.recipientsVisible())},e.prototype.showReadStatus=function(e){var t=null,i=null;e.isGroup()?i=e.id():t=e.id();var n=this.message().to().concat(this.message().cc(),this.message().bcc());c.SM.topWindow().SM.showReadStatus(this.message().messageId(),t,i,n)},e.prototype.getSurveyInfo=function(){var e=this.message().surveyInfo(),t="Survey Details Not Found";if(this.message().isSurvey()&&e.startDate()&&e.endDate()){var i=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit"}),n=i.format(new Date(e.startDate())),a=i.format(new Date(e.endDate()));t="<strong>".concat(e.name(),"</strong>: ").concat(n," - ").concat(a)}return t},e.prototype.openSurvey=function(){var e=this.message().surveyAttachment();e&&l.MessageService.getSurveyLink(e.surveyCollectorGU()).then((function(e){return ST.OpenWindowURL(e)}))},e.prototype.getVideoConferenceInfo=function(){var e="Meeting details not found";if(this.message().isMeeting()&&this.message().meetingStartDate()&&this.message().meetingEndDate()){var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit"}).format(new Date(this.message().meetingStartDate())),i=new Intl.DateTimeFormat("en",{hour:"numeric",minute:"2-digit"}).format(new Date(this.message().meetingEndDate()));e="<strong>".concat(c.SM.translation.meeting(),"</strong>: ").concat(t," - ").concat(i),this.message().recurrence()&&(VideoConferenceAPI.RecurText(this.message().recurrence()),e+="<br><strong>".concat(c.SM.translation.recurrence(),"</strong>: ").concat(this.message().recurrenceText()))}return e},e.prototype.meetingActive=function(){return this.message().meetingEndDate()>new Date},e.prototype.joinMeeting=function(){VideoConferenceAPI.JoinStartMeeting({vidConfGU:this.message().vidConfId()})},e.prototype.toggleOriginalText=function(){this.originalTextVisible(!this.originalTextVisible())},e.prototype.showMessageReadStatus=function(){var e=this.message().to().concat(this.message().cc(),this.message().bcc());c.SM.topWindow().SM.showReadStatus(this.message().messageId(),null,null,e)},e.prototype.getMessageReadText=function(){var e=this.message().readCount(),t=this.message().personCount(),i=t>0?Math.round(e/t*100):0;return"".concat(e," / ").concat(t," (").concat(i,"%) ").concat(c.SM.translation.read())},e.prototype.openAttachment=function(e){switch(e.attachmentType()){case r.AttachmentType.File:ST.GetRootWindow().ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(e.attachmentId()),$("#aID").val(c.SM.auditId),$("#dbID").val(3),$("#openAttachmentForm").submit(),setTimeout((function(){ST.GetRootWindow().ignoreUnloadMessage=!1}),10);break;case r.AttachmentType.Survey:l.MessageService.getSurveyLink(e.surveyCollectorGU()).then((function(e){return ST.OpenWindowURL(e)}));break;case r.AttachmentType.STQuery:ST.OpenViewWindow("E51430E2-DFD1-4348-9266-BDCFB437820D",null,null,{SERVER_STATE:{D:[{"@K":"SM_ATTACH_GU","@V":e.attachmentId()},{"@K":"SM_QUERY_XML","@V":e.queryXml()}]}});break;default:ST.OpenViewWindow(e.viewGU(),e.tabGU(),e.identityGU())}},e.prototype.openICS=function(){ST.GetRootWindow().ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(this.message().messagePersonId()),$("#aID").val(c.SM.auditId),$("#dbID").val(4),$("#openAttachmentForm").submit(),setTimeout((function(){ST.GetRootWindow().ignoreUnloadMessage=!1}),10)},e.prototype.GetAudioPlayerSource=function(){return n(this,void 0,void 0,(function(){var e,t;return a(this,(function(i){switch(i.label){case 0:return[4,l.MessageService.getMessageVoiceAudio(this.message().messageId())];case 1:return e=i.sent(),t=c.SM.Base64ToBlob(e),[2,window.URL.createObjectURL(t)]}}))}))},e.prototype.getCustomStore=function(){var e=this;return new d.DevExpress.data.CustomStore({key:"id",load:function(t){return e.getCommunicationData()}})},e.prototype.getCommunicationData=function(){var e=this;return new Promise((function(t,i){var n=[];e.message().sendEmail()&&n.push({icon:"fas fa-envelope",text:"Email",id:r.CommunicationType.Email,toggle:e.message().sendEmail}),e.message().sendVoice()&&n.push({icon:"fas fa-phone",text:"Voice",id:r.CommunicationType.Voice,toggle:e.message().sendVoice}),e.message().sendPushNotification()&&n.push({icon:"fas fa-mobile",text:"Push Note",id:r.CommunicationType.PushNote,toggle:e.message().sendPushNotification}),t(n)}))},e.prototype.updateResolvedRecipientCount=function(e,t,i){this.message()&&s(s(s([],this.message().to(),!0),this.message().cc(),!0),this.message().bcc(),!0).map((function(n){n.id()===e&&n.lastRecipientCountRequestId===t&&(n.loadingRecipientCount(!1),n.personCount(i))}))},e}();t.SMMessageViewModel=p,t.SMMessageComponent={template:u,viewModel:p}},9204:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMPrintableMessageComponent=t.SMPrintableMessageViewModel=void 0;var n=i(5677),a=function(){function e(e){var t=e.options;this.message=t.message,this.isAuditAdmin=t.isAuditAdmin,t.onInitialized&&t.onInitialized(this)}return e.prototype.print=function(){var e=$(".print-content").html();e='\n            <link rel="stylesheet" href="schemes/PXP2/PXP2_SM.css" type="text/css">\n            <style>\n                body { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 11pt; }\n                .subject { font-size: 150%; }\n                .header-text { font-size: 80%; }\n            </style>'+e;var t=$(".print-frame")[0];t.contentWindow.document.body.innerHTML=e,t.contentWindow.print()},e}();t.SMPrintableMessageViewModel=a,t.SMPrintableMessageComponent={template:n,viewModel:a}},8108:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SMQuickAddRecipientComponent=t.SMQuickAddRecipientViewModel=void 0;var o=i(6853),r=i(4005),l=i(3720),d=i(2617),c=i(6410),u=i(6535),p=function(){function e(e){var t=e.options;this.recipientList=ko.observableArray(),this.addRecipientVM=ko.observable(),this.studentGU=ko.observable(),this.studentStudent=ko.observable(),this.studentParents=ko.observableArray([]),this.studentTeachers=ko.observableArray([]),this.studentStudentGroups=ko.observableArray([]),this.studentCounselor=ko.observable(),this.teacherSections=ko.observableArray([]),this.teacherStudentGroups=ko.observableArray([]),this.teacherAddressToParents=ko.observable(!1),this.teacherAddressToStudents=ko.observable(!1),this.allTeachersSections=ko.observable(new u.GroupSelectObject(null,"All Sections")),this.allTeachersStudentGroups=ko.observable(new u.GroupSelectObject(null,"All Student Groups")),this.allStudentParentsGuardiansStudentSpecific=ko.observable(new r.SelectObject(null,"All Student/Parents/Guardians")),this.allStudentTeachersStudentSpecific=ko.observable(new r.SelectObject(null,"All Teachers")),this.allStudentStudentGroupsStudentSpecific=ko.observable(new r.SelectObject(null,"All Student Groups")),this.recipientListId=ko.observable(),this.recipientList=t.recipientList,t.studentGU&&(this.studentGU=t.studentGU),t.recipientListId&&this.recipientListId(t.recipientListId),this.init()}return Object.defineProperty(e.prototype,"isStudentSpecific",{get:function(){return!!this.studentGU()},enumerable:!1,configurable:!0}),e.prototype.init=function(){return n(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return this.isStudentSpecific?[4,this.loadStudentRecipients()]:[3,2];case 1:return t.sent(),this.studentGU.subscribe((function(t){e.loadStudentRecipients()})),[3,4];case 2:return[4,this.loadTeacherRecipients()];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.loadTeacherRecipients=function(){return n(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,l.RecipientService.getTeacherRecipients()];case 1:return e=t.sent(),this.teacherSections(e.sections().map((function(e){var t="Period "+e.period()+": "+e.course()+" ("+e.sectionId()+")";return new u.GroupSelectObject(e,t)}))),this.teacherStudentGroups(e.studentGroups().map((function(e){return new u.GroupSelectObject(e,e.groupName())}))),this.subscribeRecipientListForGroup(),this.subscribeSetAllCheckboxes(),this.subscribeGroupSelectionCheckboxes(),[2]}}))}))},e.prototype.loadStudentRecipients=function(){var e;return n(this,void 0,void 0,(function(){var t,i,n;return a(this,(function(a){switch(a.label){case 0:return[4,l.RecipientService.getStudentRecipients({studentGU:this.studentGU(),orgFilter:d.SM.focusOrgYearId})];case 1:return t=a.sent(),i="Student: "+t.student().name()+(t.student().noContactReason()?" ("+t.student().noContactReason()+")":""),this.studentStudent(new r.SelectObject(t.student(),i,!1,!1===(null===(e=t.student())||void 0===e?void 0:e.canReceive()))),this.studentParents(t.parents().map((function(e){var t=(e.relationship()?e.relationship()+": "+e.name():e.name())+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new r.SelectObject(e,t,!1,!1===e.canReceive())}))),this.studentTeachers(t.teachers().map((function(e){var t="Period "+e.period()+": "+e.course()+" ("+e.sectionId()+") - "+e.teacher()+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new r.SelectObject(e,t,!1,!1===e.canReceive())}))),this.studentStudentGroups(t.studentGroups().map((function(e){var t=e.groupName()+" "+e.typeValue()+" - "+e.staffName()+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new r.SelectObject(e,t,!1,!1===e.canReceive())}))),t.counselor()?(n=t.counselor().name()+(t.counselor().noContactReason()?" ("+t.counselor().noContactReason()+")":""),this.studentCounselor(new r.SelectObject(t.counselor(),n,!1,!1===t.counselor().canReceive()))):this.studentCounselor(void 0),this.subscribeRecipientListForSpecificStudent(),this.subscribeStudentSpecificCheckboxes(),this.subscribeStudentSpecificSetAllCheckboxes(),this.checkExistingRecipients(),[2]}}))}))},e.prototype.subscribeStudentSpecificSetAllCheckboxes=function(){var e=this;this.allStudentParentsGuardiansStudentSpecific().selected.subscribe((function(t){if(t){var i=o.Recipient.buildStudentRecipient(e.studentStudent().object()),n=e.studentParents().filter((function(e){return!1===e.disabled()})).map((function(e){return o.Recipient.buildParentRecipient(e.object())})),a=s([i],n,!0);!1===a.every((function(t){return e.recipientList().some((function(e){return e.id()===t.id()}))}))&&d.SM.addRecipients(e.recipientList,a,{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(e.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(e.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY,animationRecipientListOverride:o.RecipientList.Students,animationContactDetails1Override:"".concat(a.length," Recipients"),animationContactDetails2Override:"All Student/Parents/Guardians"})}else if(!1===t){var r=s([e.studentStudent()],e.studentParents(),!0).map((function(e){return e.object().id()})),l=e.recipientList().filter((function(e){return r.some((function(t){return t===e.id()}))}));e.recipientList.removeAll(l)}})),this.allStudentTeachersStudentSpecific().selected.subscribe((function(t){if(t){var i=e.studentTeachers().filter((function(e){return!1===e.disabled()})).map((function(e){return o.Recipient.buildTeacherRecipient(e.object())}));!1===i.every((function(t){return e.recipientList().some((function(e){return e.id()===t.id()}))}))&&d.SM.addRecipients(e.recipientList,i,{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(e.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(e.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY,animationRecipientListOverride:o.RecipientList.Teachers,animationContactDetails1Override:"".concat(i.length," Recipients"),animationContactDetails2Override:"Teachers"})}else if(!1===t){var n=e.studentTeachers().map((function(e){return e.object().id()})),a=e.recipientList().filter((function(e){return n.some((function(t){return t===e.id()&&e.recipientList()===o.RecipientList.Teachers}))}));e.recipientList.removeAll(a)}})),this.allStudentStudentGroupsStudentSpecific().selected.subscribe((function(t){if(t){var i=e.studentStudentGroups().filter((function(e){return!1===e.disabled()})).map((function(e){return o.Recipient.buildStudentGroupRecipient(e.object())}));!1===i.every((function(t){return e.recipientList().some((function(e){return e.id()===t.id()}))}))&&d.SM.addRecipients(e.recipientList,i,{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(e.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(e.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY,animationRecipientListOverride:o.RecipientList.StudentGroups,animationContactDetails1Override:"".concat(i.length," Recipients"),animationContactDetails2Override:"Student Groups"})}else if(!1===t){var n=e.studentStudentGroups().map((function(e){return e.object().id()})),a=e.recipientList().filter((function(e){return n.some((function(t){return t===e.id()&&e.recipientList()===o.RecipientList.StudentGroups}))}));e.recipientList.removeAll(a)}}))},e.prototype.checkExistingRecipients=function(){var e=this;this.recipientList().forEach((function(t){var i=e.getAllStudentSpecificCheckboxes().find((function(e){return e.object().id()===t.id()}));i&&i.selected(!0)}))},e.prototype.subscribeRecipientListForSpecificStudent=function(){var e=this;this.recipientList.subscribe((function(t){t.forEach((function(t){var i=t.value;"added"===t.status?e.setSelectionFromRecipient(!0,i):"deleted"===t.status&&e.setSelectionFromRecipient(!1,i)}))}),null,"arrayChange")},e.prototype.setSelectionFromRecipient=function(e,t){var i,n;this.studentStudent().object().id()===t.id()?n=this.studentStudent():void 0===n&&(null===(i=this.studentCounselor())||void 0===i?void 0:i.object().id())===t.id()&&t.recipientList()===o.RecipientList.Staff&&(n=this.studentCounselor()),void 0===n&&(n=this.studentParents().find((function(e){return e.object().id()===t.id()&&t.recipientList()===o.RecipientList.Parents}))),void 0===n&&(n=this.studentTeachers().find((function(e){return e.object().id()===t.id()&&t.recipientList()===o.RecipientList.Teachers}))),void 0===n&&(n=this.studentStudentGroups().find((function(e){return e.object().id()===t.id()&&t.recipientList()===o.RecipientList.StudentGroups}))),n&&n.selected(e)},e.prototype.getAllStudentSpecificCheckboxes=function(){return s(s(s([this.studentStudent(),this.studentCounselor()],this.studentParents(),!0),this.studentTeachers(),!0),this.studentStudentGroups(),!0).filter((function(e){return void 0!==e}))},e.prototype.subscribeRecipientListForGroup=function(){var e=this;this.recipientList.subscribe((function(t){t.forEach((function(t){var i=t.value;"added"===t.status?(e.setGroupSelectionFromRecipient(i,!0),i.groupUserTypes.subscribe((function(t){e.setGroupSelectionFromRecipient(i,!0)}))):e.setGroupSelectionFromRecipient(i,!1)}))}),null,"arrayChange")},e.prototype.subscribeStudentSpecificCheckboxes=function(){var e=this;this.addSubscriptionToStudentSpecificCheckbox(this.studentStudent(),this.allStudentParentsGuardiansStudentSpecific,s([this.studentStudent()],this.studentParents(),!0).filter((function(e){return!1===e.disabled()}))),this.studentParents().forEach((function(t){e.addSubscriptionToStudentSpecificCheckbox(t,e.allStudentParentsGuardiansStudentSpecific,s([e.studentStudent()],e.studentParents(),!0).filter((function(e){return!1===e.disabled()})))})),this.studentTeachers().forEach((function(t){e.addSubscriptionToStudentSpecificCheckbox(t,e.allStudentTeachersStudentSpecific,e.studentTeachers().filter((function(e){return!1===e.disabled()})))})),this.studentStudentGroups().forEach((function(t){e.addSubscriptionToStudentSpecificCheckbox(t,e.allStudentStudentGroupsStudentSpecific,e.studentStudentGroups().filter((function(e){return!1===e.disabled()})))})),this.studentCounselor()&&this.addSubscriptionToStudentSpecificCheckbox(this.studentCounselor())},e.prototype.addSubscriptionToStudentSpecificCheckbox=function(e,t,i){var s=this;void 0===t&&(t=null),void 0===i&&(i=null),e.selected.subscribe((function(o){return n(s,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.handleSelectionChange(o,e)];case 1:return n.sent(),t&&i&&t().selected()!==o&&t().selected(this.calculateSelectAllCheckboxValueStudentSpecific(i)),[2]}}))}))}))},e.prototype.calculateSelectAllCheckboxValueStudentSpecific=function(e){var t=e.every((function(e){return e.selected()})),i=e.every((function(e){return!1===e.selected()}));return!!t||!i&&void 0},e.prototype.handleSelectionChange=function(e,t){return n(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return e?[4,this.addRecipientToRecipientList(t)]:[3,2];case 1:return i.sent(),[3,3];case 2:this.removeRecipientFromRecipientList(t.object().id()),i.label=3;case 3:return[2]}}))}))},e.prototype.addRecipientToRecipientList=function(e){return n(this,void 0,void 0,(function(){var t;return a(this,(function(i){switch(i.label){case 0:return void 0!==this.recipientList().find((function(t){return t.id()===e.object().id()}))?[3,2]:(t=null,e.object()instanceof o.Student?t=o.Recipient.buildStudentRecipient(e.object()):e.object()instanceof o.Parent?t=o.Recipient.buildParentRecipient(e.object()):e.object()instanceof o.Teacher?t=o.Recipient.buildTeacherRecipient(e.object()):e.object()instanceof o.StudentGroup?t=o.Recipient.buildStudentGroupRecipient(e.object()):e.object()instanceof o.Counselor&&(t=o.Recipient.buildCounselorRecipient(e.object())),t?[4,d.SM.addRecipients(this.recipientList,[t],{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(this.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(this.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY})]:[3,2]);case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.removeRecipientFromRecipientList=function(e){this.recipientList.remove((function(t){return t.id()===e}))},e.prototype.subscribeSetAllCheckboxes=function(){this.subscribeGroupListToSetAllCheckbox(this.allTeachersSections(),this.teacherSections(),o.GroupUserType.Student),this.subscribeGroupListToSetAllCheckbox(this.allTeachersSections(),this.teacherSections(),o.GroupUserType.Parent),this.subscribeGroupListToSetAllCheckbox(this.allTeachersSections(),this.teacherSections(),o.GroupUserType.Staff),this.subscribeGroupListToSetAllCheckbox(this.allTeachersStudentGroups(),this.teacherStudentGroups(),o.GroupUserType.Student),this.subscribeGroupListToSetAllCheckbox(this.allTeachersStudentGroups(),this.teacherStudentGroups(),o.GroupUserType.Parent),this.subscribeGroupListToSetAllCheckbox(this.allTeachersStudentGroups(),this.teacherStudentGroups(),o.GroupUserType.Staff)},e.prototype.subscribeGroupSelectionCheckboxes=function(){this.addSubscriptionsToGroupSelectionCheckboxes(this.teacherSections(),this.allTeachersSections()),this.addSubscriptionsToGroupSelectionCheckboxes(this.teacherStudentGroups(),this.allTeachersStudentGroups())},e.prototype.subscribeGroupListToSetAllCheckbox=function(e,t,i){var n=this;(i===o.GroupUserType.Student?e.studentsSelected:i===o.GroupUserType.Parent?e.parentsSelected:e.staffSelected).subscribe((function(e){if(e){var a=t.map((function(e){return e.object()instanceof o.Section?o.Recipient.buildSectionRecipient(e.object(),i):o.Recipient.buildMassStudentGroupRecipient(e.object(),i)}));!1===a.every((function(e){return n.recipientList().some((function(t){return t.id()===e.id()&&t.groupUserTypes()&i}))}))&&d.SM.addRecipients(n.recipientList,a,{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(n.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(n.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY,animationRecipientListOverride:o.RecipientList.Classes,animationContactDetails1Override:"".concat(a.length," Recipients"),animationContactDetails2Override:"Sections"})}else!1===e&&t.map((function(e){return e.object().id()})).forEach((function(e){return n.removeGroupRecipientFromRecipientList(e,i)}))}))},e.prototype.setGroupSelectionFromRecipient=function(e,t){var i=this.getAllGroupCheckboxes().find((function(t){return t.object().id()===e.id()}));i&&(i.studentsSelected(t&&!!(e.groupUserTypes()&o.GroupUserType.Student)),i.parentsSelected(t&&!!(e.groupUserTypes()&o.GroupUserType.Parent)),i.staffSelected(t&&!!(e.groupUserTypes()&o.GroupUserType.Staff)))},e.prototype.getAllGroupCheckboxes=function(){return s(s([],this.teacherSections(),!0),this.teacherStudentGroups(),!0)},e.prototype.addSubscriptionsToGroupSelectionCheckboxes=function(e,t){var i=this;e.forEach((function(n){i.addSubscriptionToGroupSelectCheckbox(n,e,t.studentsSelected,o.GroupUserType.Student),i.addSubscriptionToGroupSelectCheckbox(n,e,t.parentsSelected,o.GroupUserType.Parent),i.addSubscriptionToGroupSelectCheckbox(n,e,t.staffSelected,o.GroupUserType.Staff)}))},e.prototype.addSubscriptionToGroupSelectCheckbox=function(e,t,i,s){var r=this;(s===o.GroupUserType.Student?e.studentsSelected:s===o.GroupUserType.Parent?e.parentsSelected:e.staffSelected).subscribe((function(o){return n(r,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.handleGroupSelectionChange(o,e,s)];case 1:return n.sent(),i()!==o&&i(this.calculateSelectAllCheckboxValue(t,s)),[2]}}))}))}))},e.prototype.handleGroupSelectionChange=function(e,t,i){return n(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e?[4,this.addGroupRecipientToRecipientList(t,i)]:[3,2];case 1:return n.sent(),[3,3];case 2:this.removeGroupRecipientFromRecipientList(t.object().id(),i),n.label=3;case 3:return[2]}}))}))},e.prototype.calculateSelectAllCheckboxValue=function(e,t){var i=!1,n=!1;return t===o.GroupUserType.Student?(i=e.every((function(e){return!0===e.studentsSelected()})),n=e.every((function(e){return!1===e.studentsSelected()}))):t===o.GroupUserType.Parent?(i=e.every((function(e){return!0===e.parentsSelected()})),n=e.every((function(e){return!1===e.parentsSelected()}))):t===o.GroupUserType.Staff&&(i=e.every((function(e){return!0===e.staffSelected()})),n=e.every((function(e){return!1===e.staffSelected()}))),!!i||!n&&void 0},e.prototype.removeGroupRecipientFromRecipientList=function(e,t){var i=this.recipientList().find((function(t){return t.id()===e}));i&&(i.groupUserTypes(i.groupUserTypes()&7-t),i.groupUserTypes()===o.GroupUserType.None&&this.recipientList.remove(i))},e.prototype.addGroupRecipientToRecipientList=function(e,t){return n(this,void 0,void 0,(function(){var i;return a(this,(function(n){switch(n.label){case 0:return void 0!==this.recipientList().find((function(i){return i.id()===e.object().id()&&i.groupUserTypes()&t}))?[3,2]:(i=null,e.object()instanceof o.Section?i=o.Recipient.buildSectionRecipient(e.object(),t):e.object()instanceof o.StudentGroup&&(i=o.Recipient.buildMassStudentGroupRecipient(e.object(),t)),i?[4,d.SM.addRecipients(this.recipientList,[i],{animationBox:d.SM.$("#animationBox"),recipientBox:d.SM.$("#composeTo".concat(this.recipientListId())),newRecipientDummy:d.SM.$("#newRecipientDummy".concat(this.recipientListId())),startLeft:window.event.pageX,startTop:window.event.pageY})]:[3,2]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e}();t.SMQuickAddRecipientViewModel=p,t.SMQuickAddRecipientComponent={template:c,viewModel:p}},6623:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMReadStatusComponent=t.SMReadStatusViewModel=void 0;var n=i(1032),a=i(6853),s=i(3720),o=i(6885),r=i(2617),l=i(5956),d=i(2159),c=function(){function e(e){var t=this;this.modalInitialized=!1,this.countText=n.observable();var i=e.options;this.dataGridOptions={allowColumnReordering:!1,columns:[{alignment:"left",caption:r.SM.translation.read(),dataField:"read",dataType:"boolean",cellTemplate:function(e,t){var i="",n="";t.value?(i="fa fa-envelope-open",n=r.SM.translation.read()):(i="fa fa-envelope",n=r.SM.translation.unread());var a='<span><i class="'.concat(i,'" aria-hidden="true"></i> ').concat(n,"</span>");$(a).appendTo(e)},lookup:{dataSource:[{value:!0,display:r.SM.translation.read()},{value:!1,display:r.SM.translation.unread()}],valueExpr:"value",displayExpr:"display"}},{caption:r.SM.translation.name(),dataField:"name"},{caption:r.SM.translation.group(),dataField:"groupName"},{caption:r.SM.translation.school(),dataField:"organizationName"},{caption:r.SM.translation.status(),dataField:"emailResult"}],filterRow:{applyFilter:"auto",visible:!0},height:350,hoverStateEnabled:!0,onInitialized:function(e){t.dataGrid=e.component,i.onInitialized(t)},remoteOperations:!0,scrolling:{mode:"infinite"},sorting:{mode:"none"}}}return e.instantiate=function(e){$(r.SM.topWindow().document.body).find("sm-read-status").remove();var t=$('<sm-read-status params="options: readStatusOptions"></sm-read-status>');$(r.SM.topWindow().document.body).append(t),n.applyBindings({readStatusOptions:e},t[0])},e.prototype.show=function(e,t,i,n){var a=this;this.recipients=n,this.messageId=e,this.groupId=i,this.modalInitialized?r.SM.topWindow().$("#readStatusDialog").modal("show"):(r.SM.topWindow().$("#readStatusDialog").stModal({allowClose:!1,customDialog:!0,init:function(n){a.dialog=n,a.dataGrid.option("dataSource",new o.DevExpress.data.CustomStore({key:"id",load:function(n){return a.loadData(e,t,i,n)}}))},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.loadData=function(e,t,i,n){var a=this;return new Promise((function(t,o){s.MessageService.getRecipientReadStatus(e,i,s.DBService.formatOptions(n)).then((function(e){var i=e.readCount(),n=e.personCount(),s=n>0?Math.round(i/n*100):0;a.countText("".concat(i," / ").concat(n," (").concat(s,"%)")),t(e.recipients())}))}))},e.prototype.close=function(){this.dialog.modal("hide")},e.prototype.compose=function(){var e=s.DBService.formatOptions({filter:this.dataGrid.getCombinedFilter()});e.skip=null,e.take=null,s.MessageService.getRecipientReadStatus(this.messageId,this.groupId,e).then((function(e){for(var t=new a.Message,i=0,n=e.recipients();i<n.length;i++){var s=n[i],o=new a.Recipient({contactDetails1:"",contactDetails2:"",id:s.id(),recipientList:s.recipientList(),organizationYearId:s.orgYearId(),organizationName:s.organizationName()});o.regenerateDetails(s.name()),t.to.push(o)}r.SM.topWindow().SM.compose({editorType:l.SMEditorType.New},t)}))},e}();t.SMReadStatusViewModel=c,t.SMReadStatusComponent={template:d,viewModel:c}},7449:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientBoxComponent=t.SMRecipientBoxViewModel=void 0;var s=i(1032),o=i(6853),r=i(8240),l=i(2617),d=i(2439),c=function(){function e(e){var t=this;this.recipient=s.observable(new o.Recipient),this.readOnly=s.observable(!0),this.isSender=s.observable(!1),this.recipientBadgeType=s.observable(o.RecipientBoxBadgeType.Hidden),this.teacherSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Staff)>0})),this.parentsSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Parent)>0})),this.studentsSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Student)>0})),this.keepMenuOpen=!1,e.options=s.unwrap(e.options),this.recipient(e.options.recipient),this.onRemove=e.options.onRemove,this.onRecipientCountClick=e.options.onRecipientCountClick,void 0!==e.options.readOnly&&this.readOnly(e.options.readOnly),void 0!==e.options.isSender&&this.isSender(e.options.isSender),void 0!==e.options.recipientBadgeType&&this.recipientBadgeType(e.options.recipientBadgeType),this.id="to".concat(this.recipient().id().split(",").join("-")),!1!==this.readOnly()&&this.recipientBadgeType()!==o.RecipientBoxBadgeType.ResolvedRecipientCount||this.recipient().loadResolvedRecipientCount(),e.options.onInitialized&&e.options.onInitialized(this)}return Object.defineProperty(e.prototype,"element",{get:function(){return $("#".concat(this.id))},enumerable:!1,configurable:!0}),e.prototype.showGroupUserTypes=function(){return this.recipient().recipientList()===o.RecipientList.Classes||this.recipient().recipientList()===o.RecipientList.MassStudentGroups||this.recipient().recipientList()===o.RecipientList.MassEmail&&!this.teacherSelected()},e.prototype.handleRecipientCountClick=function(){this.onRecipientCountClick&&this.onRecipientCountClick(this.recipient())},e.prototype.getReadTitle=function(){var e=this.recipient().readCount(),t=this.recipient().personCount(),i=t>0?Math.round(e/t*100):0;return this.recipientBadgeType()===o.RecipientBoxBadgeType.ReadStatus?this.recipient().isGroup()?"".concat(i,"% ").concat(l.SM.translation.read()):e===t?l.SM.translation.read():l.SM.translation.unread():this.recipient().loadingRecipientCount()?"Loading Recipient Count":"".concat(t," ").concat(l.SM.translation.individualRecipients())},e.prototype.getReadText=function(){var e=this.recipient().readCount(),t=this.recipient().personCount();return this.recipientBadgeType()===o.RecipientBoxBadgeType.ReadStatus?"".concat(e," / ").concat(t):t},e.prototype.getReadIcon=function(){return this.recipient().readCount()===this.recipient().personCount()?"fa fa-envelope-open-o":"fa fa-envelope-o"},Object.defineProperty(e.prototype,"showRecipientBoxBadge",{get:function(){return(this.isSender()||this.recipientBadgeType()!==o.RecipientBoxBadgeType.Hidden)&&l.SM.userType===o.UserType.Staff},enumerable:!1,configurable:!0}),e.prototype.showSnapshot=function(){this.closeMenu(),l.SM.showSnapshot(this.element,this.recipient().recipientList(),this.recipient().id())},e.prototype.hideSnapshot=function(){l.SM.hideSnapshot(this.element)},e.prototype.hideAll=function(){var e=this;this.hideSnapshot(),setTimeout((function(){e.keepMenuOpen||(e.keepMenuOpen=!1,e.closeMenu())}),100)},e.prototype.keepOpen=function(){this.keepMenuOpen=!0},e.prototype.editSTQueryContent=function(e){var t=this,i=window;i&&i.ST&&i.ST.OpenViewInDialog&&(i.ST.OpenViewInDialog("50AA41AC-0156-4A21-820B-9E0C5A319D43",null,{REV_RENDER:{SERVER_STATE:{D:[{"@K":"ANALYTICS_QUERY_TEXT","@V":e.content()},{"@K":"FROM_ANALYTICS","@V":"Y"}]}}}),$.extend(i.Namespace("Actions.Analytics",i.ST),{SetSTQueryText:function(i){return n(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,r.RecipientService.validateSTQuery(i&&i.STQueryText["#cdata"])];case 1:return t.sent()&&e.content(i.STQueryText["#cdata"]),[2]}}))}))}}))},e.prototype.openMenu=function(e,t){if(this.recipient().recipientList()!==o.RecipientList.STQuery){if(!(this.recipient().recipientList()!==o.RecipientList.Classes&&this.recipient().recipientList()!==o.RecipientList.MassStudentGroups&&this.recipient().recipientList()!==o.RecipientList.MassEmail||this.readOnly()||this.recipient().recipientList()===o.RecipientList.MassEmail&&this.teacherSelected()))if(this.hideSnapshot(),this.isMenuOpen())this.closeMenu();else{var i=this.recipient().recipientList()!==o.RecipientList.MassEmail||this.recipient().recipientList()!==o.RecipientList.MassEmail&&this.teacherSelected()?"\n            <li>\n                <span class=\"fa-regular\" data-bind=\"click: toggleSelected.bind($data, GroupUserType.Staff),\n                    clickBubble: false, css: teacherSelected() ? 'fa-square-check' : 'fa-square'\">\n                </span> ".concat(this.recipient().staffName(),"\n            </li>"):"",n=$('\n            <div id="contactMenu" class="contact-box-menu" data-bind="click: function(){}, clickBubble: false,\n                event: { mouseenter: keepOpen, mouseleave: closeMenu }">\n                <ul>\n                    '.concat(i,'\n                    <li>\n                        <span class="fa-regular" data-bind="click: toggleSelected.bind($data, GroupUserType.Parent),\n                            clickBubble: false, css: parentsSelected() ? \'fa-square-check\' : \'fa-square\'">\n                        </span> Parents\n                    </li>\n                    <li>\n                        <span class="fa-regular" data-bind="click: toggleSelected.bind($data, GroupUserType.Student),\n                            clickBubble: false, css: studentsSelected() ? \'fa-square-check\' : \'fa-square\'">\n                        </span> Students\n                    </li>\n                </ul>\n                <div class="contact-box-menu-close" data-bind="click: closeMenu.bind($data)">\n                    Close</div>\n            </div>')),a=$(t.target).closest(".contact-box");$("body").append(n),n.css("top",a.offset().top+a.height()+7).css("left",a.offset().left+a.width()-(n.width()+6)),s.applyBindings(e,n[0])}}else this.editSTQueryContent(this.recipient())},e.prototype.isMenuOpen=function(){return!!$("#contactMenu")[0]},e.prototype.closeMenu=function(){var e=$("#contactMenu");e[0]&&e.remove()},e.prototype.toggleSelected=function(e){var t=this.recipient().groupUserTypes()^e;0!==t&&this.recipient().groupUserTypes(t)},e.prototype.imgSrc=function(e){var t="images/ST_GENESIS/";switch(e){case o.RecipientList.STQuery:return"images/ST_REVELATION/Query_S.gif";case o.RecipientList.Staff:return"".concat(t,"Staff_s.gif");case o.RecipientList.Parents:return"".concat(t,"Parent_s.gif");case o.RecipientList.Students:return"".concat(t,"Student_s.gif");case o.RecipientList.Classes:case o.RecipientList.Teachers:return"".concat(t,"StudentClasses_s.gif");case o.RecipientList.Counselors:return"".concat(t,"User_s.gif");case o.RecipientList.StudentGroups:case o.RecipientList.MassStudentGroups:return"".concat(t,"StudentGroups_s.gif");case o.RecipientList.UserGroups:return"images/ST_REVELATION/UserGroup_s.gif";case o.RecipientList.MassEmail:return"".concat(t,"SIS_MassEmail_S.gif");case o.RecipientList.ContactGroups:return"".concat(t,"Parent_s.gif")}},e.prototype.remove=function(){this.closeMenu(),this.hideSnapshot(),this.onRemove&&this.onRemove(this.recipient())},e}();t.SMRecipientBoxViewModel=c,t.SMRecipientBoxComponent={template:d,viewModel:c}},340:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientListEditComponent=t.SMRecipientListEditViewModel=void 0;var n=i(1032),a=i(6853),s=i(8076),o=i(2617),r=i(6344),l=function(){function e(e){this.title=n.observable(),this.recipients=n.observableArray(),this.addRecipient=n.observable(),this.showContactGroups=!0,this.isMeeting=n.observable(!1),this.showQuickAdd=n.observable(!1),this.dummyRecipient=new a.Recipient({contactDetails1:"Animation",contactDetails2:"Dummy",id:"3",recipientList:a.RecipientList.Teachers}),this.title(e.options.title),this.showContactGroups=!e.options.contactGroupName,this.contactGroupName=e.options.contactGroupName,this.recipients=e.options.recipients,this.addRecipient=e.options.addRecipient,this.onDialogClosed=e.options.onDialogClosed,this.showQuickAdd(!!e.options.showQuickAddDefault),e.options.isMeeting&&(this.isMeeting=e.options.isMeeting),this.quickAddRecipientOptions={recipientList:this.recipients,studentGU:e.options.studentGU,recipientListId:this.title()}}return Object.defineProperty(e.prototype,"quickAddDropdownIcon",{get:function(){return this.showQuickAdd()?"glyphicon glyphicon-chevron-up":"glyphicon glyphicon-chevron-down"},enumerable:!1,configurable:!0}),e.prototype.clearRecipients=function(){var e=this;s.SMDialog.showMessage(s.SMDialogButtons.YesNo,o.SM.translation.removeAllRecipientsTitle(),o.SM.translation.removeAllRecipientsText(),(function(t){"Yes"===t&&e.recipients.removeAll()}))},e.prototype.removeRecipient=function(e){this.recipients.remove(e)},e.prototype.showRecipientDialog=function(){try{this.addRecipient().open(this.title(),this.recipients(),this.isMeeting(),this.updateRecipients.bind(this),this.dialogClosed.bind(this))}catch(e){console.log(e)}},e.prototype.updateRecipients=function(e){this.recipients(e),this.dialogClosed()},e.prototype.dialogClosed=function(){this.onDialogClosed&&this.onDialogClosed()},e.prototype.showResolvedRecipientList=function(e){o.SM.topWindow().SM.showResolvedRecipientList([e])},e.prototype.toggleShowQuickAdd=function(){this.showQuickAdd(!1===this.showQuickAdd())},e}();t.SMRecipientListEditViewModel=l,t.SMRecipientListEditComponent={template:r,viewModel:l}},7940:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientSearchComponent=t.SMRecipientSearchViewModel=void 0;var n=i(1032),a=i(6853),s=i(3720),o=i(6885),r=i(8076),l=i(2617),d=i(2958),c=i(6007),u=function(){function e(e){this.isMeeting=n.observable(!1),this.addressToTeacher=n.observable(!1),this.addressToParents=n.observable(!0),this.addressToStudents=n.observable(!0),this.teacherData=n.observableArray(),this.selectedSchool=n.observable(),this.selectedTerm=n.observable(),this.grades=n.observableArray(),this.dataLoaded=!1,this.searchAll="",this.contentReady=!1;var t=e.options;this.recipientList=t.recipientList,this.onSelect=t.onSelect,this.onExitGrid=t.onExitGrid,this.onAddAll=t.onAddAll,this.onInitialized=t.onInitialized,this.isMeeting=t.isMeeting,this.addRecipientVM=t.addRecipientVM,this.init(),this.onInitialized&&this.onInitialized(this)}return Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.addRecipientVM.selectedTab().id===this.recipientList},enumerable:!1,configurable:!0}),e.prototype.loadData=function(){var e=this;this.isSelected&&this.addRecipientVM.loadComplete&&(this.recipientList===a.RecipientList.MassEmail?s.OrganizationService.getOrganizationGrades(this.addRecipientVM.selectedOrganization().id()).then((function(t){e.grades(t.map((function(e){return{description:e.description,id:e.id,selected:n.observable(!1)}})))})):this.dataLoaded?this.dataGrid.refresh():(this.recipientList===a.RecipientList.Teachers?s.RecipientService.getTeachers(null).then((function(t){e.teacherData(t),e.teacherData().length>0&&e.selectedSchool(e.teacherData()[0])})):this.dataGrid.option("dataSource",new o.DevExpress.data.CustomStore({key:"id",load:this.loadFunction})),this.dataGrid.updateDimensions(),this.dataLoaded=!0))},e.prototype.repaintGrid=function(){var e;null===(e=this.dataGrid)||void 0===e||e.repaint()},e.prototype.refreshGrid=function(){this.dataGrid.refresh()},e.prototype.init=function(){var e,t=this;switch(this.selectedSchoolTerms=n.pureComputed((function(){return void 0===t.selectedSchool()?n.observableArray():t.selectedSchool().terms})),l.SM.isMobile.extend({debounce:500}).subscribe((function(){var e,i=null===(e=t.dataGrid)||void 0===e?void 0:e.option("columns");if(t.dataGrid.option("showColumnHeaders",!l.SM.isMobile()),t.dataGrid.option("filterRow").visible=!l.SM.isMobile(),t.dataGrid.option("searchPanel").visible=l.SM.isMobile(),l.SM.isMobile()?t.dataGrid.option("searchPanel").text=t.searchAll:(t.searchAll=t.dataGrid.option("searchPanel").text,t.dataGrid.option("searchPanel").text=""),t.dataGrid.repaint(),i){for(var n=0,s=i;n<s.length;n++){var o=s[n];t.recipientList===a.RecipientList.Teachers?"global"===o.dataField?t.dataGrid.columnOption(o.dataField,"visible",l.SM.isMobile()):t.dataGrid.columnOption(o.dataField,"width",l.SM.isMobile()?0:void 0):t.dataGrid.columnOption(o.dataField,"visible","global"===o.dataField?l.SM.isMobile():!l.SM.isMobile())}t.dataGrid.refresh()}})),this.selectSchoolOptions={dataSource:this.teacherData,displayExpr:"name",value:this.selectedSchool},this.selectTermOptions={displayExpr:"name",items:this.selectedSchoolTerms,value:this.selectedTerm},this.selectedSchool.subscribe((function(){var e=t.selectedSchool().terms().filter((function(e){return e.active()}));t.selectedTerm(e[0])})),this.selectedTerm.subscribe((function(){t.dataGrid.option("dataSource",t.selectedTerm().teachers()),t.dataGrid.refresh()})),this.recipientList){case a.RecipientList.STQuery:break;case a.RecipientList.Staff:this.loadFunction=function(e){return s.RecipientService.getStaff(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary");var n=$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.name(),"</strong></div></div>")).appendTo(e);l.SM.jobTitleColumnVisible&&i.jobTitle()&&$('<div><span class="summary-text-light">Job Title:</span> '.concat(i.jobTitle(),"</div>")).appendTo(n);var a=$('<div class="summary-line"><div>'.concat(i.organizationName(),"</div></div>")).appendTo(e);l.SM.typeColumnVisible&&i.type()&&$('<div><span class="summary-text-light">Type:</span> '.concat(i.type(),"</div>")).appendTo(a)},visible:l.SM.isMobile()}),e.push({allowSearch:!1,caption:l.SM.translation.name(),dataField:"name",visible:!l.SM.isMobile()}),l.SM.jobTitleColumnVisible&&e.push({allowSearch:!1,caption:l.SM.translation.jobTitle(),dataField:"jobTitle",visible:!l.SM.isMobile()}),l.SM.typeColumnVisible&&e.push({allowSearch:!1,caption:l.SM.translation.type(),dataField:"type",visible:!l.SM.isMobile()}),e.push({allowSearch:!1,dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()});break;case a.RecipientList.Parents:this.loadFunction=function(e){return s.RecipientService.getParents(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary"),$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.name(),"</div></div>")).appendTo(e),$('<div class="summary-line"><div>'.concat(i.description(),"</div></div>")).appendTo(e)},visible:l.SM.isMobile()}),e.push({caption:l.SM.translation.name(),dataField:"name",width:250,visible:!l.SM.isMobile()}),e.push({caption:l.SM.translation.description(),dataField:"description",visible:!l.SM.isMobile()});break;case a.RecipientList.Students:this.loadFunction=function(e){return s.RecipientService.getStudents(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary"),l.SM.isTeacher&&i.associatedStudentId()?($('<div class="summary-line"><div>&nbsp;&nbsp;&nbsp;&nbsp;'.concat(i.relationship(),": ").concat(i.name(),"</div></div>")).appendTo(e),$('<div class="summary-line"><div>&nbsp;&nbsp;&nbsp;&nbsp;'.concat(i.description(),"</div></div>")).appendTo(e)):($('<div class="summary-line"><div class="summary-text-bold">'.concat(i.name(),"</div></div>")).appendTo(e),$('<div class="summary-line"><div>'.concat(i.description(),"</div></div>")).appendTo(e))},visible:l.SM.isMobile()}),e.push({caption:l.SM.translation.name(),cellTemplate:function(e,t){var i=t.data;l.SM.isTeacher&&i.associatedStudentId()?e[0].innerHTML="&nbsp;&nbsp;&nbsp;&nbsp; ".concat(i.relationship(),": ").concat(i.name()):e[0].innerHTML=i.name()},dataField:"name",width:250,visible:!l.SM.isMobile()}),e.push({caption:l.SM.translation.description(),dataField:"description",visible:!l.SM.isMobile()});break;case a.RecipientList.Classes:this.loadFunction=function(e){return s.RecipientService.getSections(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary");var n=$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.course(),"</div></div>")).appendTo(e);$('<div><span class="summary-text-light">Sec:</span> '.concat(i.sectionId(),' - <span class="summary-text-light">Crs:</span> ').concat(i.courseId(),"</div>")).appendTo(n);var a=$('<div class="summary-line"><div>'.concat(i.teacher(),"</div></div>")).appendTo(e);$('<div><span class="summary-text-light">Trm:</span> '.concat(i.term(),' - <span class="summary-text-light">Prd:</span> ').concat(i.period(),' - <span class="summary-text-light">Grd:</span> ').concat(i.grade(),"</div>")).appendTo(a),$('<div class="summary-line"><div>'.concat(i.organizationName(),"</div></div>")).appendTo(e)},visible:l.SM.isMobile()}),e.push({dataField:"course",caption:l.SM.translation.course(),visible:!l.SM.isMobile()}),e.push({dataField:"term",caption:l.SM.translation.term(),width:50,visible:!l.SM.isMobile()}),e.push({dataField:"period",caption:l.SM.translation.period(),width:60,visible:!l.SM.isMobile()}),e.push({dataField:"sectionId",caption:l.SM.translation.sectionId(),width:100,visible:!l.SM.isMobile()}),e.push({dataField:"courseId",caption:l.SM.translation.courseId(),width:100,visible:!l.SM.isMobile()}),e.push({dataField:"room",caption:l.SM.translation.room(),width:70,visible:!l.SM.isMobile()}),e.push({dataField:"grade",caption:l.SM.translation.grade(),width:60,visible:!l.SM.isMobile()}),e.push({dataField:"teacher",caption:l.SM.translation.teacher(),visible:!l.SM.isMobile()}),e.push({dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()});break;case a.RecipientList.Teachers:this.loadFunction=function(e){return s.RecipientService.getTeachers(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary");var n=$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.period()," - ").concat(i.teacher(),"</div></div>")).appendTo(e);$("<div> ".concat(i.title(),"</div>")).appendTo(n);var a=$('<div class="summary-line"><div>'.concat(i.course(),"</div></div>")).appendTo(e);$('<div><span class="summary-text-light">Room:</span> '.concat(i.room(),"</div>")).appendTo(a)},visible:l.SM.isMobile()}),e.push({dataField:"period",caption:l.SM.translation.period(),width:l.SM.isMobile()?0:60}),e.push({dataField:"course",caption:l.SM.translation.course(),width:l.SM.isMobile()?0:void 0}),e.push({dataField:"teacher",caption:l.SM.translation.teacher(),width:l.SM.isMobile()?0:void 0}),e.push({dataField:"title",caption:l.SM.translation.jobTitle(),width:l.SM.isMobile()?0:void 0}),e.push({dataField:"room",caption:l.SM.translation.room(),width:l.SM.isMobile()?0:void 0});break;case a.RecipientList.Counselors:this.loadFunction=function(e){return s.RecipientService.getCounselors(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary"),$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.name(),"</div></div>")).appendTo(e),$('<div class="summary-line"><div>'.concat(i.organizationName(),"</div></div>")).appendTo(e)},visible:l.SM.isMobile()}),e.push({dataField:"name",caption:l.SM.translation.name(),visible:!l.SM.isMobile()}),e.push({dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()});break;case a.RecipientList.StudentGroups:this.loadFunction=function(e){return s.RecipientService.getStudentGroups(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary");var n=$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.staffName(),"</div></div>")).appendTo(e);$("<div>".concat(i.groupName(),"</div>")).appendTo(n);var a=$('<div class="summary-line"><div>'.concat(i.organizationName(),"</div></div>")).appendTo(e);$("<div>".concat(i.typeValue(),"</div>")).appendTo(a)},visible:l.SM.isMobile()}),e.push({dataField:"staffName",caption:l.SM.translation.name(),visible:!l.SM.isMobile()}),e.push({dataField:"groupName",caption:l.SM.translation.groupName(),visible:!l.SM.isMobile()}),e.push({dataField:"typeValue",caption:l.SM.translation.jobTitle(),visible:!l.SM.isMobile()}),e.push({dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()});break;case a.RecipientList.MassStudentGroups:this.loadFunction=function(e){return s.RecipientService.getMassStudentGroups(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary"),$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.groupName(),"</div></div>")).appendTo(e),$('<div class="summary-line"><div>'.concat(i.organizationName(),"</div></div>")).appendTo(e)},visible:l.SM.isMobile()}),e.push({dataField:"groupName",caption:l.SM.translation.groupName(),visible:!l.SM.isMobile()}),e.push({dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()});break;case a.RecipientList.UserGroups:this.loadFunction=function(e){return s.RecipientService.getUserGroups(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,t){var i=t.data;$(e).addClass("summary");var n=$('<div class="summary-line"><div class="summary-text-bold">'.concat(i.name(),"</div></div>")).appendTo(e);$('<div><span class="summary-text-light">Users:</span> '.concat(i.users(),"</div>")).appendTo(n)},visible:l.SM.isMobile()}),e.push({dataField:"name",caption:l.SM.translation.name(),visible:!l.SM.isMobile()}),e.push({dataField:"users",caption:l.SM.translation.users(),alignment:"left",visible:!l.SM.isMobile()});break;case a.RecipientList.MassEmail:this.loadFunction=null,e=null;break;case a.RecipientList.ContactGroups:this.loadFunction=function(e){return s.RecipientService.getContactGroups(t.getOptions(e))},(e=[]).push({dataField:"global",cellTemplate:function(e,i){var n=i.data;$(e).addClass("summary");var a=$('<div class="summary-line"><div class="summary-text-bold">'.concat(n.name(),"</div></div>")).appendTo(e);$('<div><span class="summary-text-light">Room:</span> '.concat(n.description(),"</div>")).appendTo(a);var o=$('<div class="summary-line"><div>'.concat(n.organizationName(),"</div></div>")).appendTo(e);if(n.isOwner()){var c=$("<div />").appendTo(o);$('<span style="margin-right: 2rem;" />').addClass("fa fa-pencil").attr("title",l.SM.translation.edit()).on("dxclick",(function(e){d.SMEditContactGroupViewModel.instantiate({onInitialized:function(e){e.show(n.id()),t.editContactGroupVM=e},onDialogClosed:function(){t.refreshGrid();var e=t.addRecipientVM.recipients().find((function(e){return e.id()===n.id()}));e&&e.loadResolvedRecipientCount()}}),e.stopPropagation()})).appendTo(c),$("<span/>").addClass("fa fa-times").attr("title",l.SM.translation.delete()).on("dxclick",(function(e){r.SMDialog.showMessage(r.SMDialogButtons.YesNo,l.SM.translation.deleteContactGroup(),l.SM.translation.deleteContactGroupText(),(function(e){"Yes"===e&&s.RecipientService.deleteContactGroup(n.id()).then((function(){t.dataGrid.refresh()}))})),e.stopPropagation()})).appendTo(c)}},visible:l.SM.isMobile()}),e.push({dataField:"name",caption:l.SM.translation.name(),visible:!l.SM.isMobile()}),e.push({dataField:"description",caption:l.SM.translation.description(),visible:!l.SM.isMobile()}),e.push({dataField:"organizationName",caption:l.SM.translation.school(),visible:!l.SM.isMobile()}),l.SM.userType===a.UserType.Staff&&(e.push({alignment:"left",caption:l.SM.translation.public(),dataField:"isPublic",dataType:"boolean",lookup:{dataSource:[{value:!0,display:l.SM.translation.yes()},{value:!1,display:l.SM.translation.no()}],valueExpr:"value",displayExpr:"display"},width:80,visible:!l.SM.isMobile()}),e.push({alignment:"center",dataField:"edit",headerCellTemplate:function(e,t){$("<span/>").addClass("row-command fa fa-pencil").appendTo(e),$("<span/>").addClass("row-command fa fa-times").appendTo(e)},cellTemplate:function(e,i){var n=i.data;n.isOwner()&&($("<span/>").addClass("row-command fa fa-pencil").attr("title",l.SM.translation.edit()).on("dxclick",(function(e){d.SMEditContactGroupViewModel.instantiate({onInitialized:function(e){e.show(n.id()),t.editContactGroupVM=e},onDialogClosed:function(){t.refreshGrid();var e=t.addRecipientVM.recipients().find((function(e){return e.id()===n.id()}));e&&e.loadResolvedRecipientCount()}}),e.stopPropagation()})).appendTo(e),$("<span/>").addClass("row-command fa fa-times").attr("title",l.SM.translation.delete()).on("dxclick",(function(e){r.SMDialog.showMessage(r.SMDialogButtons.YesNo,l.SM.translation.deleteContactGroup(),l.SM.translation.deleteContactGroupText(),(function(e){"Yes"===e&&s.RecipientService.deleteContactGroup(n.id()).then((function(){t.dataGrid.refresh()}))})),e.stopPropagation()})).appendTo(e))},width:60,visible:!l.SM.isMobile()}))}this.dataGridOptions={allowColumnReordering:!1,columns:e,showColumnHeaders:!l.SM.isMobile(),searchPanel:{visible:l.SM.isMobile(),searchVisibleColumnsOnly:!0},filterRow:{applyFilter:"auto",visible:!l.SM.isMobile()},height:350,hoverStateEnabled:!0,onInitialized:function(e){t.dataGrid=e.component},onKeyDown:function(e){27===e.event.keyCode&&t.onExitGrid()},onRowPrepared:function(e){"data"!==e.rowType||t.rowActive(e.data)||e.rowElement.addClass("row-disabled")},onSelectionChanged:function(e){var i=e.component;if(i.getSelectedRowKeys().length>0){var n=i.getRowElement(i.getRowIndexByKey(i.getSelectedRowKeys()[0]));t.rowClicked({jQueryEvent:{pageX:n.offset().left,pageY:n.offset().top},data:i.getSelectedRowsData()[0]}),i.clearSelection()}},remoteOperations:!0,selection:{mode:"single"},scrolling:{mode:"infinite"},sorting:{mode:"none"},onContentReady:function(){!1===t.dataLoaded&&!1===t.contentReady&&(t.contentReady=!0,t.addRecipientVM.loadRecipientSearchData())}}},e.prototype.addMassEmail=function(e,t){var i=new a.Recipient,n=[];i.recipientList(this.recipientList),i.id(Date.now().toString()),i.groupUserTypes(this.getGroupUserType());for(var s=0,o=this.grades();s<o.length;s++){var d=o[s];d.selected()&&(i.grades.push(d.id()),n.push(d.description()))}i.groupUserTypes()!==a.GroupUserType.None?0!==i.grades().length?(i.contactDetails1((n.length>1?l.SM.translation.grades():l.SM.translation.grade())+": "+n.join(", ")),this.onSelect(i,t.pageX,t.pageY)):r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.grade(),l.SM.translation.mustSelectGrade()):r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient())},e.prototype.addStaffMassEmail=function(e,t){var i=new a.Recipient;i.recipientList(this.recipientList),i.id(Date.now().toString()),i.groupUserTypes(a.GroupUserType.Staff),i.contactDetails1(l.SM.translation.staffAllGrades()),this.onSelect(i,t.pageX,t.pageY)},e.prototype.rowActive=function(e){var t=!0;switch(this.recipientList){case a.RecipientList.UserGroups:t=e.users()>0;break;case a.RecipientList.Teachers:case a.RecipientList.Counselors:case a.RecipientList.StudentGroups:t=e.canReceive();break;case a.RecipientList.Parents:case a.RecipientList.Students:t=e.canReceive()||this.isMeeting()}return t},e.prototype.getOptions=function(e){var t,i=s.DBService.formatOptions(e);return(l.SM.userType===a.UserType.Staff&&this.recipientList!==a.RecipientList.UserGroups||this.recipientList===a.RecipientList.Staff||this.recipientList===a.RecipientList.StudentGroups||l.SM.userType===a.UserType.Student&&this.recipientList===a.RecipientList.Students&&l.SM.studentRecipientAccess!==a.StudentRecipientAccess.SchoolStaff)&&(null===(t=this.addRecipientVM.selectedOrganization())||void 0===t?void 0:t.id())&&$.extend(i,{orgFilter:this.addRecipientVM.selectedOrganization().id()}),l.SM.userType===a.UserType.Staff&&this.recipientList===a.RecipientList.ContactGroups&&$.extend(i,{ownerOnly:0===this.addRecipientVM.contactGroupScope()}),(null===l.SM||void 0===l.SM?void 0:l.SM.isTeacher)&&(this.recipientList===a.RecipientList.Parents||this.recipientList===a.RecipientList.Students?this.addRecipientVM.selectedSection()&&0===this.addRecipientVM.teacherGroupScope()?$.extend(i,{sectionId:this.addRecipientVM.selectedSection().id()}):this.addRecipientVM.selectedStudentGroup()&&1===this.addRecipientVM.teacherGroupScope()&&$.extend(i,{studentGroupId:this.addRecipientVM.selectedStudentGroup().id()}):this.recipientList===a.RecipientList.MassStudentGroups?$.extend(i,{ownerOnly:0===this.addRecipientVM.massStudentGroupScope()}):this.recipientList===a.RecipientList.Classes&&$.extend(i,{staffOnly:0===this.addRecipientVM.classScope()})),i},e.prototype.rowClicked=function(e){var t=this.recipientList;if(l.SM.isTeacher&&t===a.RecipientList.Students&&e.data.associatedStudentId()&&(t=a.RecipientList.Parents),this.rowActive(e.data)){var i=new a.Recipient;switch(i.recipientList(t),t===a.RecipientList.UserGroups?(i.organizationYearId(null),i.organizationName(l.SM.translation.district())):(i.organizationYearId(e.data.organizationYearId()),i.organizationName(e.data.organizationName())),t){case a.RecipientList.STQuery:break;case a.RecipientList.Staff:i.id(e.data.id()),i.contactDetails1(e.data.name()),i.contactDetails2(e.data.jobTitleFormatted);break;case a.RecipientList.Parents:i.id(e.data.id()),i.contactDetails1(e.data.name()),e.data.associatedStudentName()?i.contactDetails2("Parent of ".concat(e.data.associatedStudentName())):i.contactDetails2("Parent"),i.associatedStudentId(e.data.associatedStudentId()),i.associatedStudentName(e.data.associatedStudentName());break;case a.RecipientList.Students:i.id(e.data.id()),i.contactDetails1(e.data.name()),i.contactDetails2("Student");break;case a.RecipientList.Classes:if(this.getGroupUserType()===a.GroupUserType.None)return void r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient());i.id(e.data.id()),i.contactDetails1("".concat(e.data.sectionId()," - ").concat(e.data.course())),i.section(e.data),i.groupUserTypes(this.getGroupUserType());break;case a.RecipientList.Teachers:i.id(e.data.id()),i.associatedSectionId(e.data.sectionId()),i.contactDetails1(e.data.teacher()),i.contactDetails2("".concat(e.data.period(),"-").concat(e.data.course()," Rm: ").concat(e.data.room()));break;case a.RecipientList.Counselors:i.id(e.data.id()),i.contactDetails1(e.data.name()),i.contactDetails2("Counselor");break;case a.RecipientList.StudentGroups:i.id(e.data.id()),i.associatedGroupId(e.data.groupId()),i.contactDetails1(e.data.staffName()),i.contactDetails2("".concat(e.data.groupName()," ").concat(e.data.jobTitle()||"")),i.groupUserTypes(this.getGroupUserType());break;case a.RecipientList.MassStudentGroups:if(this.getGroupUserType()===a.GroupUserType.None)return void r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient());i.id(e.data.id()),i.contactDetails1("".concat(e.data.groupName()," ").concat(e.data.jobTitle()||"")),i.groupUserTypes(this.getGroupUserType());break;case a.RecipientList.UserGroups:i.id(e.data.id()),i.contactDetails1(e.data.name()),i.contactDetails2("User Group"),i.groupUserTypes(a.GroupUserType.Staff);break;case a.RecipientList.ContactGroups:i.id(e.data.id()),i.contactDetails1(e.data.name()),i.contactDetails2("Contact List")}i&&this.onSelect(i,e.jQueryEvent.pageX,e.jQueryEvent.pageY)}else{var n="";switch(t){case a.RecipientList.UserGroups:n="This user group has no members.";break;case a.RecipientList.Counselors:n="This counselor has been excluded from ParentVUE & StudentVUE.";break;case a.RecipientList.StudentGroups:n="This Student Group does not have a staff member assigned or this staff has been excluded from ParentVUE & StudentVUE.";break;case a.RecipientList.Students:n="This recipient does not have permission to receive communication.";break;case a.RecipientList.Parents:n="This parent does not have permission to receive communication.";break;case a.RecipientList.Teachers:n="This Teacher has been excluded from ParentVUE & StudentVUE.";break;default:n="This row has no recipients and cannot be selected."}r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Recipient Unavailable",n)}},e.prototype.addAll=function(){var e=this,t=this.dataGrid.getDataSource().items().filter((function(e){return e.canReceive()})).map((function(t){var i=new a.Recipient;return i.recipientList(e.recipientList),i.id(t.id()),i.contactDetails1(t.teacher()),i.contactDetails2("".concat(t.period(),"-").concat(t.course()," Rm: ").concat(t.room())),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName()),i}));this.onAddAll(t)},e.prototype.getGroupUserType=function(){return(this.addressToTeacher()?a.GroupUserType.Staff:0)|(this.addressToParents()?a.GroupUserType.Parent:0)|(this.addressToStudents()?a.GroupUserType.Student:0)},e}();t.SMRecipientSearchViewModel=u,t.SMRecipientSearchComponent={template:c,viewModel:u}},1953:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecurrenceComponent=t.SMRecurrenceViewModel=void 0;var n=i(1032),a=i(6853),s=i(8076),o=i(2617),r=i(1426),l=function(){function e(e){var t=this;this.modalInitialized=!1,this.recurrence=this.getDefaultRecurrence(),this.recurrenceTypeOptions={displayExpr:"text",valueExpr:"value",layout:"horizontal",value:this.recurrence.recurType,items:[{value:1,text:"Daily"},{value:2,text:"Weekly"},{value:3,text:"Monthly"}]},this.monthDayTypeOptions={displayExpr:"text",valueExpr:"value",value:this.recurrence.monthDayType,dataSource:[{value:1,text:"First"},{value:2,text:"Second"},{value:3,text:"Third"},{value:4,text:"Fourth"},{value:5,text:"Last"}]},this.monthDayofWeek={displayExpr:"text",valueExpr:"value",value:this.recurrence.monthDayofWeek,items:[{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"},{value:0,text:"Sunday"}]},this.monthTypeOne=n.observable(0),this.monthTypeOneOptions={displayExpr:"text",valueExpr:"value",value:this.monthTypeOne,items:[{value:1,text:""}],onValueChanged:function(e){t.monthTypeTwo(0===t.monthTypeOne()?1:0),t.recurrence.monthType(0)}},this.monthTypeTwo=n.observable(0),this.monthTypeTwoOptions={displayExpr:"text",valueExpr:"value",value:this.monthTypeTwo,items:[{value:1,text:""}],onValueChanged:function(e){t.monthTypeOne(0===t.monthTypeTwo()?1:0),t.recurrence.monthType(1)}},this.dayOfMonthOptions={value:this.recurrence.monthDayofMonth,items:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},this.stopDateOptions={type:"date",value:this.recurrence.stopDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.stopDate=e.component},onValueChanged:function(e){var i=new Date(e.value);i.getFullYear()<1e3&&(i.setFullYear(i.getFullYear()+2e3),t.recurrence.stopDate(i),e.component._updateValue())}};var i=e.options;i.onInitialized(this),this.onUpdate=i.onUpdate}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-recurrence").remove();var t=$('<sm-recurrence params="options: recurrenceOptions"></sm-recurrence>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({recurrenceOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.modalInitialized?(o.SM.topWindow().$("#recurrenceDialog").modal("show"),this.load(e)):(o.SM.topWindow().$("#recurrenceDialog").stModal({allowClose:!1,customDialog:!0,init:function(i){t.dialog=i,t.load(e)},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.load=function(e){e||(e=this.getDefaultRecurrence()),this.recurrence.loadData(e.getData()),1===this.recurrence.monthType()?(this.monthTypeOne(0),this.monthTypeTwo(1)):(this.monthTypeOne(1),this.monthTypeTwo(0))},e.prototype.getDefaultRecurrence=function(){return new a.Recurrence({recurType:1,stopDate:new Date,weekCount:1,dayCount:1,monthType:0,monthDayType:1,monthDayofWeek:0,monthDayofMonth:1,monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1,january:!0,february:!0,march:!0,april:!0,may:!0,june:!0,july:!0,august:!0,september:!0,october:!0,november:!0,december:!0})},e.prototype.save=function(){if(1===this.recurrence.recurType()){if(isNaN(this.recurrence.dayCount()))return void s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Daily","You must enter a valid number of days.");this.recurrence.dayCount(Math.floor(this.recurrence.dayCount()))}else this.recurrence.dayCount(0);if(2===this.recurrence.recurType()){if(isNaN(this.recurrence.dayCount()))return void s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Weekly","You must enter a valid number of weeks.");this.recurrence.weekCount(Math.round(this.recurrence.weekCount()))}else this.recurrence.weekCount(0),this.recurrence.monday(!1),this.recurrence.tuesday(!1),this.recurrence.wednesday(!1),this.recurrence.thursday(!1),this.recurrence.friday(!1),this.recurrence.saturday(!1),this.recurrence.sunday(!1);if(null!==this.recurrence.stopDate()&&this.stopDate.option("isValid")){3!==this.recurrence.recurType()&&(this.recurrence.monthDayType(0),this.recurrence.monthDayofMonth(0),this.recurrence.monthDayType(0),this.recurrence.monthDayofWeek(0),this.recurrence.january(!1),this.recurrence.february(!1),this.recurrence.march(!1),this.recurrence.april(!1),this.recurrence.may(!1),this.recurrence.june(!1),this.recurrence.july(!1),this.recurrence.august(!1),this.recurrence.september(!1),this.recurrence.october(!1),this.recurrence.november(!1),this.recurrence.december(!1));var e=new a.Recurrence(this.recurrence.getData());this.onUpdate(e),this.close()}else s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Stop On Date","You must enter a valid stop date.")},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMRecurrenceViewModel=l,t.SMRecurrenceComponent={template:r,viewModel:l}},7754:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMResolvedRecipientListComponent=t.SMResolvedRecipientListViewModel=void 0;var n=i(1032),a=i(3720),s=i(6885),o=i(2617),r=i(8547),l=function(){function e(e){var t=this;this.modalInitialized=!1,this.countText=n.observable();var i=e.options;this.dataGridOptions={allowColumnReordering:!1,columns:[{caption:o.SM.translation.name(),dataField:"name"},{caption:o.SM.translation.school(),dataField:"schoolNames"},{alignment:"left",caption:o.SM.translation.type(),dataField:"userTypeText",dataType:"string",cellTemplate:function(e,t){var i="<span>".concat(t.value,"</span>");$(i).appendTo(e)}}],filterRow:{applyFilter:"auto",visible:!0},height:350,hoverStateEnabled:!0,onInitialized:function(e){t.dataGrid=e.component,i.onInitialized(t)},scrolling:{mode:"infinite"},sorting:{mode:"none"}}}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-resolved-recipient-list").remove();var t=$('<sm-resolved-recipient-list params="options: resolvedRecipientListOptions"></sm-resolved-recipient-list>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({resolvedRecipientListOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.recipients=e,this.modalInitialized?o.SM.topWindow().$("#resolvedRecipientListDialog").modal("show"):(o.SM.topWindow().$("#resolvedRecipientListDialog").stModal({allowClose:!1,customDialog:!0,init:function(i){t.dialog=i,t.dataGrid.option("dataSource",new s.DevExpress.data.CustomStore({key:"id",load:function(i){return t.loadData(e)}}))},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.loadData=function(e){return new Promise((function(t,i){a.RecipientService.getResolvedRecipients(e[0]).then((function(e){t(e)}))}))},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMResolvedRecipientListViewModel=l,t.SMResolvedRecipientListComponent={template:r,viewModel:l}},1822:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SMRootComponent=t.SMRootViewModel=void 0;var o=i(1032),r=i(6853),l=i(3720),d=i(6174),c=i(6885),u=i(8076),p=i(2617),h=i(6086),m=i(6326),b=i(5956),f=i(3658),g=i(8068),v=i(2653),S=i(6438),M=function(){function e(e){var t=this;this.messageGridOptions={},this.folders=o.observableArray(),this.conversations=o.observableArray(),this.messageGridFocused=o.observable(!1),this.selectedFolder=o.observable(new r.Folder({folderType:p.SM.defaultFolderType})),this.selectedMessage=o.observable(null),this.selectedRows=o.observableArray(),this.selectedConversation=o.observable(null),this.totalUnreadConversationMessages=o.observable(0),this.searchVisible=o.observable(!1),this.availableLanguages=o.observableArray(),this.refreshingInbox=!1,this.translateQueue=o.observableArray(),this.nextIndex=0,this.showDeleted=o.observable(!1),this.signature=o.observable(new r.Signature),this.settingsData=o.observable(new r.Settings),this.nextConversationPageToLoad=0,this.isLastConversationPageLoaded=!1,this.loadingConversations=o.observable(!1),this.isMobile=o.observable(p.SM.isMobileCalculation()),this.mobileConversation=!!p.SM.openConversationGU,this.initDraggable=function(){var e=this;p.SM.impersonated||$(".message-text").draggable({appendTo:"body",cursor:"pointer",cursorAt:{top:-10,left:-10},delay:100,helper:function(e){return $('<div class="ui-widget-header"></div>')},revert:!1,start:function(t,i){var n=$("#messageGrid tr").index(t.target)-1;e.searchVisible()&&n--;var a=e.messageGrid.getKeyByRowIndex(n);e.messageGrid.isRowSelected(a)||(e.messageGrid.clearSelection(),e.messageGrid.selectRowsByIndexes([n]));var s=e.messageGrid.getSelectedRowKeys().length>1?p.SM.translation.messages():p.SM.translation.message();i.helper.text("".concat(p.SM.translation.move()," ").concat(e.messageGrid.getSelectedRowKeys().length," ").concat(s))},zIndex:1e3})},this.onMessageLoaded=function(e,i){!e.isItDraft()||p.SM.impersonated||p.SM.auditing?(t.selectedMessage(e),$("#subjectText").focus()):(e.scheduleSendDate(null),p.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft,showComposeDialog:!0},e)),i&&($(t.messageGrid.getRowElement(t.messageGrid.getRowIndexByKey(e.messagePersonId()))).removeClass("unread"),t.loadFolders())},p.SM.topWindow().SM.allowEmailAtDistrict=p.SM.allowEmailAtDistrict,p.SM.canViewMail&&(this.init(),p.SM.SMApp().rootViewModel=this,p.SM.openConversationGU?(v.ConversationService.getConversation(p.SM.openConversationGU,p.SM.languageCode()).then((function(e){t.selectConversation(e),p.SM.openConversationGU=null})),this.selectConversation(new r.Conversation)):p.SM.isSynergyMessageEnabled&&this.loadConversations(),p.SM.topWindow().SM.composeViewModel.then((function(e){e.setOnAction((function(){p.SM.rootWindow()&&(t.loadFolders(),t.refreshingInbox=!0,t.messageGrid.refresh())}))})),p.SM.isMobile.extend({debounce:500}).subscribe((function(){t.updateColumns()})))}return Object.defineProperty(e.prototype,"disableMarkAsRead",{get:function(){return 0===this.selectedRows().length||this.selectedFolder().folderType()===r.FolderType.Draft||this.selectedFolder().folderType()===r.FolderType.Outbox||this.numSelectedDeletedMessages()>0||p.SM.impersonated||p.SM.auditing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disableMarkAsUnread",{get:function(){return 0===this.selectedRows().length||this.selectedFolder().folderType()===r.FolderType.Draft||this.selectedFolder().folderType()===r.FolderType.Outbox||this.numSelectedDeletedMessages()>0||this.selectedFolder().folderType()===r.FolderType.SystemMessage||p.SM.impersonated||p.SM.auditing},enumerable:!1,configurable:!0}),e.prototype.refreshInbox=function(e){if(this.unreadMessagesCount()!==e){var t=this.folders().filter((function(e){return e.folderType()===r.FolderType.Inbox}))[0];t&&t.unreadMessages(e)}this.selectedFolder().folderType()===r.FolderType.Inbox&&this.unreadMessagesCount()!==e&&(this.refreshingInbox=!0,this.messageGrid.refresh())},e.prototype.init=function(){var e=this;p.SM.internalCompose=!0,!1===p.SM.configuration.showSidebar&&this.messageGridFocused(!0),$(window).resize((function(){p.SM.debounce((function(){e.isMobile(p.SM.isMobileCalculation())}),500)(),e.closeMenu()})),$("body").click((function(){e.closeMenu()})),h.SMEditFolderViewModel.instantiate({onInitialized:function(t){e.editFolder=t}}),m.SMEditSignatureViewModel.instantiate({onInitialized:function(t){e.editSignature=t}}),f.SMSettingsViewModel.instantiate({onInitialized:function(t){e.settings=t}}),this.archiveText=o.computed((function(){return e.selectedFolder()&&e.selectedFolder().folderType()===r.FolderType.Archive?e.numSelectedArchivedMessages()>0?p.SM.translation.delete():p.SM.translation.undelete():p.SM.translation.trash()})),this.numSelectedMessages=o.computed((function(){return e.selectedFolder().folderType()===r.FolderType.Archive||e.selectedFolder().folderType()===r.FolderType.SystemMessage||e.selectedFolder().folderType()===r.FolderType.Outbox?0:e.selectedRows().length})),this.numSelectedArchivedMessages=o.computed((function(){return e.selectedFolder().folderType()===r.FolderType.Archive?e.selectedRows().filter((function(e){return!e.deleted()})).length:0})),this.numSelectedDeletedMessages=o.computed((function(){return e.selectedFolder().folderType()===r.FolderType.Archive?e.selectedRows().filter((function(e){return e.deleted()})).length:0})),this.numSelectedSystemMessages=o.computed((function(){return e.selectedFolder().folderType()===r.FolderType.SystemMessage?e.selectedRows().filter((function(e){return!e.isSystemMessageDeletable()})).length>0?0:e.selectedRows().filter((function(e){return e.isSystemMessage()})).length:0})),this.dropFolders=o.computed((function(){return e.folders().filter((function(e){return e.folderType()!==r.FolderType.Sent&&e.folderType()!==r.FolderType.Outbox}))})),this.showDeleteButton=o.computed((function(){var t=e.numSelectedMessages(),i=e.numSelectedArchivedMessages(),n=e.numSelectedDeletedMessages(),a=e.numSelectedSystemMessages();return(t>0||i>0||n>0||a>0)&&!(i>0&&n>0)})),this.archiveIconClass=o.computed((function(){if(!e.selectedFolder()||e.selectedFolder().folderType()!==r.FolderType.Archive)return"fa fa-trash";var t=e.selectedRows().filter((function(e){return!e.deleted()})).length;return e.selectedRows().filter((function(e){return e.deleted()})).length===e.selectedRows().length?"fa fa-undo":t===e.selectedRows().length?"fa fa-trash":void 0})),this.unreadMessagesCount=o.computed((function(){var t=0,i=e.folders().filter((function(e){return e.folderType()===r.FolderType.Inbox}))[0];if(i){t+=i.unreadMessages();var n=e.folders().filter((function(e){return e.folderType()===r.FolderType.SystemMessage}))[0];n&&(t+=n.unreadMessages())}return t+e.totalUnreadConversationMessages()})),this.unreadMessagesCount.subscribe((function(e){p.SM.updateUnreadMessagesBadge(e)})),this.sortedConversations=o.computed((function(){return e.conversations.sorted((function(e,t){return e.latestMessageDateTime()===t.latestMessageDateTime()?0:e.latestMessageDateTime()>t.latestMessageDateTime()?-1:1}))})),this.conversations.subscribe((function(t){t.filter((function(e){return"added"===e.status})).forEach((function(t){t.value.unreadMessagesCount.subscribe((function(t){var i=e.totalUnreadConversationMessages()-t;e.totalUnreadConversationMessages(i)}),e,"beforeChange"),t.value.unreadMessagesCount.subscribe((function(t){var i=e.totalUnreadConversationMessages()+t;e.totalUnreadConversationMessages(i)}))}))}),this,"arrayChange"),p.SM.openConversationGU||(this.selectedConversation.subscribe((function(e){null!==e&&(e.unreadMessagesCount(0),v.ConversationService.updateConversationRead(e))})),d.MiscService.getSignature().then((function(t){e.signature(t)})),d.MiscService.getSettings().then((function(t){e.settingsData(t)})),this.messageGridOptions={columns:[{dataField:"global",cellTemplate:function(t,i){var n=i.data;$(t).addClass("summary");var a=e.selectedFolder().folderType()===r.FolderType.Sent||e.selectedFolder().folderType()===r.FolderType.Draft||e.selectedFolder().folderType()===r.FolderType.Outbox?$.map(n.to(),(function(e){return e.contactDetails1()})).join(", "):n.from().contactDetails1(),s=$('<div class="summary-line"><div>'.concat(a,"</div></div>")).appendTo(t);$("<div>".concat(n.sendDateTimeFormattedLong(),"</div>")).appendTo(s);var o=$('<div class="summary-line"></div>').appendTo(t),l=$('<div class="message-subject-container"></div>');n.hasAttachments()&&$('<span class="fa fa-paperclip"></span>').appendTo(l),n.sendVoice()&&$('<span class="fa fa-phone"></span>').appendTo(l),n.isMeeting()&&$('<span class="fa fa-video"></span>').appendTo(l),!1===i.data.shouldTranslate()&&$('<i class="fa-regular fa-align-slash" data-toggle="tooltip" data-placement="top" title="'.concat(p.SM.translation.senderDisabledTranslation(),'"}"></i>')).appendTo(l),i.data.translationComplete()?$('<span class="subject-text">'.concat(i.data.subject(),"</span>")).appendTo(l):($('<div id="waiting'.concat(i.data.messagePersonId(),'" class="translate-subject">\n                                    ').concat(p.SM.translation.waitingToLoadTranslation(),"...</div>")).appendTo(l),$('<div id="subject'.concat(i.data.messagePersonId(),'"\n                                    class="collapse translate-subject subject-text"><img src="images/ST/FormSubmit.gif" />\n                                    ').concat(p.SM.translation.loadingTranslation(),"...</div>")).appendTo(l)),l.appendTo(o);var d="";e.selectedFolder().folderType()===r.FolderType.Outbox&&(d=n.messageStatusFormatted),e.selectedFolder().folderType()===r.FolderType.Archive&&(d=n.deleted()?"Deleted":""),$("<div>".concat(d,"</div>")).appendTo(o)},visible:!0},{caption:p.SM.translation.status(),dataField:"messageStatusFormatted",visible:!1,allowFiltering:!1,width:150},{caption:p.SM.translation.status(),calculateDisplayValue:function(e){return e.deleted()?"Deleted":""},dataField:"deleted",dataType:"String",visible:!1,allowFiltering:!1,width:150},{dataField:"attachment",headerCellTemplate:function(e,t){$('<span class="fa fa-paperclip"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.hasAttachments()&&$('<span class="fa fa-paperclip"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center"},{headerCellTemplate:function(e,t){$('<span class="fa fa-phone"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.sendVoice()&&$('<span class="fa fa-phone"></span>').appendTo(e)},dataType:"string",width:40,alignment:"center",dataField:"sendVoice",visible:!1},{headerCellTemplate:function(e,t){$('<span class="fa fa-video"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.isMeeting()&&$('<span class="fa fa-video"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center",dataField:"videoConference"},{caption:p.SM.translation.from(),cellTemplate:function(e,t){var i=t.data;$("<span>".concat(i.from().contactDetails1(),"</span>")).appendTo(e)},calculateFilterExpression:function(e,t,i){return["from","contains",e]},cssClass:"message-name",dataType:"string",dataField:"from",filterOperations:["contains"],width:"20%"},{caption:p.SM.translation.to(),cellTemplate:function(e,t){var i=t.data,n=$.map(i.to(),(function(e){return e.contactDetails1()})).join(", ");$("<span>".concat(n,"</span>")).appendTo(e)},calculateFilterExpression:function(e,t,i){return["to","contains",e]},cssClass:"message-name",dataType:"string",dataField:"to",visible:!1,filterOperations:["contains"]},{caption:p.SM.translation.subject(),cellTemplate:function(e,t){var i=$('<div class="message-subject-container"></div>');t.data.translationComplete()?$('<span class="subject-text">'.concat(t.data.subject(),"</span>")).appendTo(i):($('<div id="waiting'.concat(t.data.messagePersonId(),'" class="translate-subject">\n                                    ').concat(p.SM.translation.waitingToLoadTranslation(),"...</div>")).appendTo(i),$('<div id="subject'.concat(t.data.messagePersonId(),'"\n                                    class="collapse translate-subject subject-text"><img src="images/ST/FormSubmit.gif" />\n                                    ').concat(p.SM.translation.loadingTranslation(),"...</div>")).appendTo(i)),!1===t.data.shouldTranslate()&&$('<i class="fa-regular fa-align-slash" data-toggle="tooltip" data-placement="top" title="'.concat(p.SM.translation.senderDisabledTranslation(),'"}"></i>')).appendTo(i),$(i).appendTo(e)},cssClass:"message-subject",dataField:"subject",filterOperations:["contains"],width:"60%"},{caption:p.SM.translation.date(),cssClass:"message-date",dataField:"sendDateTimeFormattedLong",dataType:"date",format:"shortDate",calculateFilterExpression:function(e,t,i){return["sendDateTimeFormattedLong",t,e]},width:"30%",filterOperations:["=","<",">"]}],dataSource:this.getCustomStore(),filterRow:{applyFilter:"auto",visible:!1},onEditorPrepared:function(e){"sendDateTimeFormattedLong"===e.dataField&&"filterRow"===e.parentType&&(e.editorOptions.displayFormat="shortDate",e.editorElement.dxDateBox("instance").option("type","date"),e.editorElement.find(".dx-texteditor-input").attr("readonly",!0),e.editorElement.dxDateBox("instance").option("onValueChanged",(function(t){return e.setValue(t.value)})))},hoverStateEnabled:!0,noDataText:p.SM.translation.noMessages(),onContentReady:function(t){e.initDraggable(),e.selectedFolder().folderType()!==r.FolderType.SystemMessage&&e.startTranslation(),!e.refreshingInbox&&e.selectedMessage()&&e.selectIndexedMessage(e.nextIndex),p.SM.openMessagePersonId&&(e.selectMessage(new r.Message({messagePersonId:p.SM.openMessagePersonId,isItDraft:!1})),p.SM.openMessagePersonId=null),t.component.element().find(".dx-datagrid-nodata").html(p.SM.translation.noMessages())},onInitialized:function(t){e.messageGrid=t.component,p.SM.isSynergyMessageEnabled&&e.messageGrid.columnOption("sendVoice","visible",!0),p.SM.vidConfEnabled&&e.messageGrid.columnOption("videoConference","visible",!0),e.updateColumns()},onRowClick:function(t){e.selectMessage(t.data)},onKeyDown:function(t){if("Enter"===t.event.key){t.event.preventDefault();var i=t.component.option("focusedRowIndex");t.component.byKey(t.component.getKeyByRowIndex(i)).then((function(t){e.selectMessage(t)}))}},onRowPrepared:function(e){e.rowElement.addClass("message-text"),e.data&&!e.data.mailRead()&&e.rowElement.addClass("unread")},onSelectionChanged:function(t){e.selectedRows(t.selectedRowsData)},pager:{allowedPageSizes:[5,10,20],showInfo:!0,showPageSizeSelector:!0},paging:{enabled:!0,pageSize:10},remoteOperations:!0,selection:{mode:"multiple",deferred:!1},sorting:{mode:"none"}})},e.prototype.getCustomStore=function(){var e=this;return new c.DevExpress.data.CustomStore({key:"messagePersonId",load:function(t){var i=e.selectedFolder()?e.selectedFolder().folderType():r.FolderType.Inbox,n=e.selectedFolder()?e.selectedFolder().folderId():null;return e.translateQueue.removeAll(),t=l.DBService.formatOptions(t),l.MessageService.getMessages(i,n,p.SM.languageCode(),e.showDeleted(),t)},onLoaded:function(t){e.loadFolders()}})},e.prototype.auditIcon=function(){switch(p.SM.auditType){case r.UserType.Staff:return"images/ST_GENESIS/Staff_s.gif";case r.UserType.Parent:return"images/ST_GENESIS/Parent_s.gif";case r.UserType.Student:return"images/ST_GENESIS/Student_s.gif";default:return""}},e.prototype.startTranslation=function(){this.translateQueue.removeAll();for(var e=0,t=this.messageGrid.getVisibleRows();e<t.length;e++){var i=t[e].data;i.translationComplete()||this.translateQueue.push(i)}this.translateNext()},e.prototype.translateNext=function(){var e=this,t=this.translateQueue.shift();t&&($("#waiting".concat(t.messagePersonId())).hide(),$("#subject".concat(t.messagePersonId())).show(),l.MessageService.getTranslatedSubject(t.messagePersonId(),p.SM.languageCode()).then((function(i){$("#subject".concat(t.messagePersonId())).text(i).removeClass("translate-subject"),setTimeout((function(){e.translateNext()}),500)})))},e.prototype.loadFolders=function(){var e=this;l.FolderService.getFolders().then((function(t){e.folders.removeAll();for(var i=0,n=t;i<n.length;i++){var a=n[i];e.folders.push(a)}null===e.selectedFolder()&&e.selectFolder(e.folders()[0],!1),e.createDropTargets()})).catch((function(e){p.SM.handleError(e,"Unable to get folders.")}))},e.prototype.createFolder=function(){var e=this;this.editFolder.create(null,(function(t){e.loadFolders(),e.messageGrid.getSelectedRowKeys().length>0&&e.moveMessages(t)}))},e.prototype.editFolderEx=function(e){var t=this;this.editFolder.edit(e,(function(){t.loadFolders()}))},e.prototype.deleteFolder=function(e){var t=this,i=p.SM.translation.format(p.SM.translation.deleteFolderText(),{folder:e.name()});u.SMDialog.showMessage(u.SMDialogButtons.YesNo,p.SM.translation.deleteFolderTitle(),i,(function(i){"Yes"===i&&l.FolderService.deleteFolder(e.folderId()).then((function(){t.loadFolders()})).catch((function(e){u.SMDialog.showMessage(u.SMDialogButtons.Ok,p.SM.translation.unableToDeleteFolderTitle(),p.SM.translation.unableToDeleteFolderText())}))}))},e.prototype.closeMenu=function(){$("#contactMenu").remove()},e.prototype.closeMessage=function(){this.selectedMessage(null)},e.prototype.goBack=function(){this.selectedMessage()?this.closeMessage():this.selectedConversation()?(this.selectedConversation(null),this.messageGridFocused(!1)):this.messageGridFocused()&&this.messageGridFocused(!1)},e.prototype.startCompose=function(){this.newMessage()},e.prototype.newMessage=function(e){p.SM.topWindow().SM.compose({editorType:b.SMEditorType.New},e)},e.prototype.reply=function(){if(!this.selectedMessage().noReply())if(p.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.selectedMessage().getData());l.MessageService.createMessage(r.CreateMessageType.Reply,e.messagePersonId(),p.SM.languageCode()).then((function(e){p.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft},e)}))}else p.SM.topWindow().SMApp.composeAdvanced({to:[this.selectedMessage().from()],subject:"RE: "+this.selectedMessage().subject()})},e.prototype.replyAll=function(){if(!this.selectedMessage().noReply())if(p.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.selectedMessage().getData());l.MessageService.createMessage(r.CreateMessageType.ReplyAll,e.messagePersonId(),p.SM.languageCode()).then((function(e){p.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft},e)}))}else{var t=s(s([this.selectedMessage().from()],this.selectedMessage().to(),!0),this.selectedMessage().cc(),!0);p.SM.topWindow().SMApp.composeAdvanced({to:t,subject:"RE: "+this.selectedMessage().subject()})}},e.prototype.forward=function(){if(p.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.selectedMessage().getData());l.MessageService.createMessage(r.CreateMessageType.Forward,e.messagePersonId(),p.SM.languageCode()).then((function(e){p.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft},e)}))}else p.SM.topWindow().SMApp.composeAdvanced({to:[],subject:"FW: "+this.selectedMessage().subject(),allowNoRecipientsMailTo:!0})},e.prototype.cancelScheduledSend=function(){var e=this;u.SMDialog.showMessage(u.SMDialogButtons.YesNo,"Cancel Scheduled Send","Canceling this scheduled send will return it to your drafts folder.\n            Are you sure you want to continue?",(function(t){if("Yes"===t){var i=new r.Message(e.selectedMessage().getData());l.MessageService.cancelScheduledSend(i.messagePersonId()).then((function(){e.closeMessage();var t=e.folders().filter((function(e){return e.folderType()===r.FolderType.Draft}))[0];e.selectFolder(t,!0)}))}}))},e.prototype.archiveSelectedMessages=function(){var e=this;if(this.selectedFolder().folderType()===r.FolderType.Archive||this.selectedFolder().folderType()===r.FolderType.SystemMessage)if(this.numSelectedDeletedMessages()>0)this.showLoadingForSelectedRows(),l.MessageService.undeleteMessages(this.messageGrid.getSelectedRowKeys()).then((function(){e.messageGrid.refresh(),e.loadFolders()}));else{var t=this.messageGrid.getSelectedRowKeys().length,i=t>1?p.SM.translation.messages():p.SM.translation.message(),n=p.SM.translation.format(p.SM.translation.deleteMessagesText(),{numMessages:"".concat(t," ").concat(i)});u.SMDialog.showMessage(u.SMDialogButtons.YesNo,p.SM.translation.format(p.SM.translation.deleteMessagesTitle(),{messages:i}),n,(function(t){"Yes"===t&&(e.showLoadingForSelectedRows(),l.MessageService.deleteMessages(e.selectedFolder().folderType(),e.messageGrid.getSelectedRowKeys()).then((function(){e.messageGrid.deselectAll(),e.messageGrid.refresh(),e.loadFolders()})))}))}else this.moveMessages(new r.Folder({folderType:r.FolderType.Archive})),this.closeMessage()},e.prototype.setRowLoading=function(e,t){var i=this.messageGrid.getRowIndexByKey(e),n=this.messageGrid.getRowElement(i),a=$(n).find(".dx-command-select"),s=$(n).find(".dx-select-checkbox"),o=$(a).find("img");o[0]||(o=a.append('<img src="images/ST/FormSubmit.gif" />')),t?(s.hide(),o.show()):(s.show(),o.hide())},e.prototype.showLoadingForSelectedRows=function(){for(var e=0,t=this.messageGrid.getSelectedRowKeys();e<t.length;e++){var i=t[e];this.setRowLoading(i,!0)}},e.prototype.showLoadingForVisibleRows=function(){for(var e=0,t=this.messageGrid.getVisibleRows();e<t.length;e++){var i=t[e];this.setRowLoading(i.key,!0)}},e.prototype.moveMessages=function(e){var t=this;this.showLoadingForSelectedRows(),this.closeMessage(),l.MessageService.moveMessages(this.messageGrid.getSelectedRowKeys(),e).then((function(){t.messageGrid.clearSelection(),t.messageGrid.getDataSource().reload(),t.loadFolders()}))},e.prototype.markAsRead=function(){this.disableMarkAsRead||this.updateRead(this.messageGrid.getSelectedRowKeys(),!0)},e.prototype.markAsUnread=function(){this.disableMarkAsUnread||this.updateRead(this.messageGrid.getSelectedRowKeys(),!1)},e.prototype.updateAllRead=function(e,t){var i=this;p.SM.impersonated||p.SM.auditing||(this.showLoadingForVisibleRows(),l.MessageService.updateAllRead(e.folderType(),e.folderId(),t).then((function(){i.loadFolders(),i.messageGrid.refresh()})))},e.prototype.archiveAll=function(e){var t=this;p.SM.impersonated||p.SM.auditing||u.SMDialog.showMessage(u.SMDialogButtons.YesNo,p.SM.translation.deleteAllMessagesTitle(),p.SM.translation.deleteAllMessagesText(),(function(i){"Yes"===i&&(t.showLoadingForVisibleRows(),l.MessageService.archiveAll(e.folderType(),e.folderId()).then((function(){t.loadFolders(),t.messageGrid.refresh()})))}))},e.prototype.updateRead=function(e,t){var i=this;this.showLoadingForSelectedRows(),l.MessageService.updateRead(this.selectedFolder().folderType(),e,t).then((function(){for(var n=function(e){i.setRowLoading(e,!1);var n=i.messageGrid.getDataSource().items().filter((function(t){return t.messagePersonId()===e}))[0];if(n){n.mailRead(t);var a=$(i.messageGrid.getRowElement(i.messageGrid.getRowIndexByKey(e)));a&&(t?a.removeClass("unread"):a.addClass("unread"))}},a=0,s=e;a<s.length;a++)n(s[a]);i.loadFolders()}))},e.prototype.toggleSearch=function(){this.searchVisible(!this.searchVisible()),this.messageGrid.option("filterRow",{applyFilter:"auto",visible:this.searchVisible()})},e.prototype.createDropTargets=function(){var e=this;$(".folder").droppable({drop:function(t,i){var n=o.dataFor(t.target),a=e.messageGrid.getSelectedRowsData();$(t.target).css("cursor","pointer"),$(t.target).find("div").css("cursor","pointer"),n.folderId()===e.selectedFolder().folderId()&&n.folderType()===e.selectedFolder().folderType()||!e.moveAllowed(a,n)||e.moveMessages(n)},out:function(e,t){o.dataFor(e.target),$(e.target).css("cursor","pointer"),$(e.target).find("div").css("cursor","pointer")},over:function(t,i){var n=o.dataFor(t.target),a=e.messageGrid.getSelectedRowsData();e.moveAllowed(a,n)||($(t.target).css("cursor","no-drop"),$(t.target).find("div").css("cursor","no-drop"))},tolerance:"pointer"})},e.prototype.moveAllowed=function(e,t){var i=!0,n=t.folderType();if(this.selectedFolder().folderType()===r.FolderType.SystemMessage)return!1;if(this.numSelectedDeletedMessages()>0)return!1;for(var a=0,s=e;a<s.length;a++){var o=s[a].messageStatus();n===r.FolderType.Draft&&o!==r.MessageStatus.Draft&&o!==r.MessageStatus.WaitingToSend&&(i=!1),o===r.MessageStatus.Draft&&n!==r.FolderType.Archive&&n!==r.FolderType.Draft&&(i=!1),o===r.MessageStatus.WaitingToSend&&n!==r.FolderType.Draft&&(i=!1),o!==r.MessageStatus.Sending&&o!==r.MessageStatus.Error||(i=!1),n===r.FolderType.Outbox&&(i=!1),n===r.FolderType.SystemMessage&&(i=!1)}return i},e.prototype.selectFolder=function(e,t){void 0===t&&(t=!0),this.selectedConversation(null),this.selectedFolder(e),this.messageGridFocused(!0),t&&(this.closeMessage(),this.updateColumns(),this.messageGrid.clearFilter(),this.messageGrid.clearSelection(),this.messageGrid.refresh())},e.prototype.handleFolderKeyDown=function(e,t,i){return"Enter"!==i.key&&" "!==i.key||(i.preventDefault(),this.selectFolder(e)),!0},e.prototype.updateColumns=function(){if(p.SM.isMobile())this.messageGrid.columnOption("global","visible",!0),this.messageGrid.columnOption("attachment","visible",!1),this.messageGrid.columnOption("sendVoice","visible",!1),this.messageGrid.columnOption("videoConference","visible",!1),this.messageGrid.columnOption("subject","visible",!1),this.messageGrid.columnOption("sendDateTimeFormattedLong","visible",!1),this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!1),this.messageGrid.columnOption("deleted","visible",!1);else switch(this.messageGrid.columnOption("global","visible",!1),this.messageGrid.columnOption("attachment","visible",!0),this.messageGrid.columnOption("sendVoice","visible",!0),this.messageGrid.columnOption("videoConference","visible",!0),this.messageGrid.columnOption("subject","visible",!0),this.messageGrid.columnOption("sendDateTimeFormattedLong","visible",!0),this.messageGrid.columnOption("from","visible",!0),this.messageGrid.columnOption("to","visible",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!1),this.messageGrid.columnOption("deleted","visible",!1),this.selectedFolder().folderType()){case r.FolderType.Sent:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!0),this.messageGrid.columnOption("messageStatusFormatted","visible",!1);break;case r.FolderType.Draft:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!1);break;case r.FolderType.Outbox:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!0);break;case r.FolderType.Archive:this.messageGrid.columnOption("deleted","visible",this.showDeleted());break;case r.FolderType.SystemMessage:this.messageGrid.columnOption("attachment","visible",!1),this.messageGrid.columnOption("sendVoice","visible",!1),this.messageGrid.columnOption("videoConference","visible",!1)}},e.prototype.isFolderSelected=function(e){return!this.selectedConversation()&&!!this.selectedFolder()&&(this.selectedFolder().folderType()===r.FolderType.UserFolder?this.selectedFolder().folderId()===e.folderId():this.selectedFolder().folderType()===e.folderType())},e.prototype.showContextMenuIcon=function(e,t){p.SM.impersonated||$(e).find(".dropdown-toggle").show()},e.prototype.hideContextMenuIcon=function(e){p.SM.accessibilityMode||$(e).find(".dropdown-toggle").hide()},e.prototype.selectMessage=function(e){var t,i=this;this.selectedConversation(null),this.messageGrid.selectRows([e.messagePersonId()],!1);var n=!p.SM.impersonated&&!e.isItDraft()&&!e.mailRead()&&e.messageStatus()!==r.MessageStatus.Scheduled;(null===(t=this.selectedFolder())||void 0===t?void 0:t.folderType())!==r.FolderType.SystemMessage&&this.showLoadingForSelectedRows(),l.MessageService.getMessage(e.messagePersonId(),n,p.SM.languageCode(),e.isSystemMessage()).then((function(e){i.setRowLoading(e.messagePersonId(),!1),p.SM.configuration.showSidebar?i.onMessageLoaded(e,n):S.SMViewMessageViewModel.instantiate({allowActions:!1,onInitialized:function(t){t.show(e)}})}))},e.prototype.selectIndexedMessage=function(e){var t=this,i=this.messageGrid.getKeyByRowIndex(e);this.messageGrid.byKey(i).done((function(e){t.selectMessage(e)}))},e.prototype.previousMessage=function(){var e=this.messageGrid.getSelectedRowKeys()[0],t=this.messageGrid.getRowIndexByKey(e)-1;if(t<0){if(0===this.messageGrid.pageIndex())return;this.nextIndex=this.messageGrid.pageSize()-1,this.messageGrid.pageIndex(this.messageGrid.pageIndex()-1)}else this.selectIndexedMessage(t)},e.prototype.nextMessage=function(){var e=this.messageGrid.getSelectedRowKeys()[0],t=this.messageGrid.getRowIndexByKey(e)+1;if(t>this.messageGrid.pageSize()-1){if(this.messageGrid.pageIndex()>=this.messageGrid.pageCount()-1)return;this.nextIndex=0,this.messageGrid.pageIndex(this.messageGrid.pageIndex()+1)}else this.selectIndexedMessage(t)},e.prototype.editSignatures=function(){var e=this;p.SM.impersonated||p.SM.auditing||this.editSignature.show(this.signature(),(function(t){e.signature(t)}))},e.prototype.editSettings=function(){p.SM.impersonated||p.SM.auditing||this.settings.show()},e.prototype.toggleDeletedMessages=function(){this.showDeleted(!this.showDeleted()),this.messageGrid.columnOption("deleted","visible",this.showDeleted()),this.messageGrid.getDataSource().reload()},e.prototype.loadConversations=function(){return n(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return!1!==this.loadingConversations()||!1!==this.isLastConversationPageLoaded?[3,2]:(this.loadingConversations(!0),[4,v.ConversationService.getConversations(this.nextConversationPageToLoad,p.SM.languageCode()).then((function(t){var i,n=t.conversations,a=t.isLastPageLoaded,s=t.totalUnreadConversationMessages;(i=e.conversations).push.apply(i,n),e.nextConversationPageToLoad++,e.isLastConversationPageLoaded=a,e.totalUnreadConversationMessages(s)})).catch((function(e){p.SM.handleError(e,"Unable to get conversations.")}))]);case 1:t.sent(),this.loadingConversations(!1),t.label=2;case 2:return[2]}}))}))},e.prototype.selectConversation=function(e){this.selectedConversation(e),this.messageGridFocused(!0)},e.prototype.handleSideBarScroll=function(){var e=$("#side-bar-content")[0];e.scrollHeight-(e.clientHeight+e.scrollTop)<=10&&this.loadConversations()},e.prototype.printableMessageInitialized=function(e){this.printableMessageVM=e},e.prototype.print=function(){this.printableMessageVM.print()},e}();t.SMRootViewModel=M,t.SMRootComponent={template:g,viewModel:M}},6197:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMScheduleSendComponent=t.SMScheduleSendViewModel=void 0;var n=i(1032),a=i(2617),s=i(2467),o=i(8076),r=function(){function e(e){var t=this;this.title=n.observable(),this.modalInitialized=!1,this.requiredFieldValidator={validationRules:[{type:"required"}]},this.sendDate=n.observable(new Date),this.sendDateOptions={type:"datetime",value:this.sendDate,displayFormat:"M/d/yyyy h:mm a",onContentReady:function(e){t.sendDateControl=e.component},onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())},onOpened:function(e){a.SM.$("body").append($(".dx-datebox-wrapper"))}},e.options.onInitialized(this)}return e.instantiate=function(e){a.SM.$(a.SM.topWindow().document.body).find("sm-schedule-send").remove();var t=a.SM.$('<sm-schedule-send params="options: scheduleSendOptions"></sm-schedule-send>');a.SM.$(a.SM.topWindow().document.body).append(t),n.applyBindings({scheduleSendOptions:e},t[0])},e.prototype.create=function(e){this.onDismissed=e,this.show()},e.prototype.show=function(){var e=this,t=new Date;this.sendDate(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,8)),this.modalInitialized?a.SM.topWindow().$("#scheduleSendDialog").modal("show"):(a.SM.topWindow().$("#scheduleSendDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){this.sendDateControl.option("isValid")?this.sendDate()<new Date?o.SMDialog.showMessage(o.SMDialogButtons.Ok,"Send Date/Time","You must enter a date/time in the future."):(this.hide(),this.onDismissed&&this.onDismissed(this.sendDate())):o.SMDialog.showMessage(o.SMDialogButtons.Ok,"Send Date/Time","You must enter a valid date/time.")},e}();t.SMScheduleSendViewModel=r,t.SMScheduleSendComponent={template:s,viewModel:r}},9568:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMSelectAddressesComponent=t.SMSelectAddressesViewModel=void 0;var n=i(1032),a=i(2617),s=i(9061),o=i(505),r=function(){function e(e){this.to=n.observableArray(),this.cc=n.observableArray(),this.bcc=n.observableArray(),this.addRecipient=n.observable(),this.modalInitialized=!1;var t=e&&e.options;this.onSubmit=t&&t.onSubmit,this.init(),t&&t.onInitialized&&t.onInitialized(this)}return e.prototype.open=function(e){return this.onSubmit=e,this.modalInitialized?$("#selectAddressesDialog").modal("show"):($("#selectAddressesDialog").stModal({allowClose:!1,customDialog:!0,keepOnHide:!0}),this.modalInitialized=!0),this},e.prototype.close=function(){$("#selectAddressesDialog").modal("hide")},e.prototype.submit=function(){this.onSubmit&&this.onSubmit(this.to().slice(0),this.cc().slice(0),this.bcc().slice(0)),this.close()},e.prototype.init=function(){var e=this;this.addRecipientOptions={id:"selectAddressesAddRecipients",onInitialized:function(t){e.addRecipient(t)}},s.SMAddRecipientViewModel.instantiate(this.addRecipientOptions),this.toRecipientListOptions={addRecipient:this.addRecipient,recipients:this.to,title:a.SM.translation.to(),isMeeting:!1},this.ccRecipientListOptions={addRecipient:this.addRecipient,recipients:this.cc,title:a.SM.translation.cc(),isMeeting:!1},this.bccRecipientListOptions={addRecipient:this.addRecipient,recipients:this.bcc,title:a.SM.translation.bcc(),isMeeting:!1}},e}();t.SMSelectAddressesViewModel=r,t.SMSelectAddressesComponent={template:o,viewModel:r}},3658:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMSettingsComponent=t.SMSettingsViewModel=void 0;var n=i(1032),a=i(6853),s=i(3720),o=i(2617),r=i(5125),l=function(){function e(e){this.modalInitialized=!1,this.settings=n.observable(new a.Settings),e.options.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-settings").remove();var t=$('<sm-settings params="options: settingsOptions"></sm-settings>');$(o.SM.topWindow().document.body).append(t),n.applyBindings({settingsOptions:e},t[0])},e.prototype.show=function(){var e=this;this.modalInitialized?(o.SM.topWindow().$("#settingsDialog").modal("show"),this.load()):(o.SM.topWindow().$("#settingsDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t,e.load()},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.load=function(){var e=this;s.MiscService.getSettings().then((function(t){e.settings(t)}))},e.prototype.save=function(){var e=this;s.MiscService.updateSettings(this.settings()).then((function(){o.SM.topWindow().SM.setUndoSendSeconds(e.settings().undoSendSeconds()),e.close()}))},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMSettingsViewModel=l,t.SMSettingsComponent={template:r,viewModel:l}},2999:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMTokenPopoverComponent=t.SMTokenPopoverViewModel=void 0;var n=i(1032),a=i(6853),s=i(2617),o=i(2812),r=function(){function e(e){var t=e.options;this.element=t.element,this.editor=t.editor,this.button=t.button,this.init()}return e.instantiate=function(e){var t=$('<sm-token-popover params="options: tokenPopoverOptions"></sm-token-popover>');$(s.SM.topWindow().document.body).append(t),e=$.extend(e,{element:t[0]}),n.applyBindings({tokenPopoverOptions:e},t[0])},e.prototype.init=function(){var e=this;this.popoverSettings={deferRendering:!1,onContentReady:function(t){e.popover=t.component,setTimeout((function(){e.popover.show($(e.button))}),0)},onHidden:function(t){e.element.remove()},shading:!1,visible:n.observable(!1),width:275},this.listSettings={dataSource:[new a.TokenValue({token:"<<he>>",value:"He/she"}),new a.TokenValue({token:"<<him>>",value:"Him/her"}),new a.TokenValue({token:"<<his>>",value:"His/her"}),new a.TokenValue({token:"<<hers>>",value:"His/hers"}),new a.TokenValue({token:"<<name>>",value:"Name"}),new a.TokenValue({token:"<<fullname>>",value:"Full Name (F L)"}),new a.TokenValue({token:"<<fullnameFML>>",value:"Full Name (FML)"})],height:"100%",onContentReady:function(t){e.list=t.component},onItemClick:function(t){var i=t.itemData;e.editor.model.change((function(t){t.insertText(i.token(),e.editor.model.document.selection.getFirstPosition())})),e.popover.hide()}}},e}();t.SMTokenPopoverViewModel=r,t.SMTokenPopoverComponent={template:o,viewModel:r}},2355:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMUndoSendComponent=t.SMUndoSendViewModel=void 0;var n=i(1032),a=i(2617),s=i(9050),o=i(3720),r=function(){function e(e){var t;this.secondsLeft=n.observable(10),this.isVisible=n.observable(!1);var i=e.options;this.undoSendSeconds=null!==(t=i.undoSendSeconds)&&void 0!==t?t:10,i.onInitialized&&i.onInitialized(this)}return e.instantiate=function(e){$(a.SM.topWindow().document.body).find("sm-undo-send").remove();var t=$('<sm-undo-send params="options: undoSendOptions"></sm-undo-send>');$(a.SM.topWindow().document.body).append(t),n.applyBindings({undoSendOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.close(),this.isVisible(!0),this.sentMessagePersonId=e,this.undoSendSeconds&&(this.secondsLeft(this.undoSendSeconds),this.timerId=window.setInterval((function(){return t.tick()}),1e3))},e.prototype.tick=function(){this.secondsLeft()<=1?this.close():this.secondsLeft(this.secondsLeft()-1)},e.prototype.close=function(){window.clearTimeout(this.timerId),this.sentMessagePersonId=null,this.isVisible(!1)},e.prototype.undoSend=function(){var e=this.sentMessagePersonId;this.close(),o.MessageService.cancelScheduledSend(e).then((function(){a.SM.SMApp().editDraft(e,void 0,!0)}))},e.prototype.viewMessage=function(){var e=this.sentMessagePersonId;this.close(),a.SM.SMApp().viewMessage({id:e,isSystemMessage:!1,noReply:!1})},e}();t.SMUndoSendViewModel=r,t.SMUndoSendComponent={template:s,viewModel:r}},6438:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SMViewMessageComponent=t.SMViewMessageViewModel=void 0;var o=i(1032),r=i(6853),l=i(3720),d=i(8076),c=i(2617),u=i(5956),p=i(9806),h=function(){function e(e){this.message=o.observable(),this.modalInitialized=!1;var t=e.options;t&&(this.allowActions=t.allowActions,this.onDelete=t.onDelete,this.onSMTPReply=t.onSMTPReply,this.isAuditAdmin=t.isAuditAdmin),t&&t.onInitialized&&t.onInitialized(this),c.SM.viewMessageVM=this}return e.instantiate=function(e){c.SM.topWindow().$("#viewMessageDialog").modal("hide"),$(c.SM.topWindow().document.body).find("sm-view-message").remove();var t=$('<sm-view-message params="options: viewMessageOptions"></sm-view-message>');$(c.SM.topWindow().document.body).append(t),o.applyBindings({viewMessageOptions:e},t[0])},e.prototype.printableMessageInitialized=function(e){this.printableMessageVM=e},e.prototype.print=function(){this.printableMessageVM.print()},e.prototype.show=function(e){var t=this;this.message(e),this.modalInitialized?c.SM.topWindow().$("#viewMessageDialog").modal("show"):(c.SM.topWindow().$("#viewMessageDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0,focusPrimaryButton:!1}),this.modalInitialized=!0)},e.prototype.deleteMessage=function(){this.isAuditAdmin?this.permanentlyDeleteMessage():this.archiveMessage()},e.prototype.permanentlyDeleteMessage=function(){return n(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,d.SMDialog.showMessageAsync(d.SMDialogButtons.YesNo,"Permanently Deleting Message","<p>NOTE: Deleting this message will remove it from Synergy Mail Inboxes. It is not possible to retract SMTP emails.<p>\n            <p>You are about to permanently delete this message. Would you like to continue?<p>")];case 1:return"Yes"===e.sent()&&(l.MessageService.permanentlyDeleteMessage(this.message().messageId()),this.close(),this.onDelete()),[2]}}))}))},e.prototype.archiveMessage=function(){var e=this;if(this.message().isSystemMessage()){var t=c.SM.translation.message(),i=c.SM.translation.format(c.SM.translation.deleteMessagesText(),{numMessages:"".concat(1," ").concat(t)});d.SMDialog.showMessage(d.SMDialogButtons.YesNo,c.SM.translation.format(c.SM.translation.deleteMessagesTitle(),{messages:t}),i,(function(t){"Yes"===t&&(l.MessageService.deleteMessages(r.FolderType.SystemMessage,[e.message().messageId()]).then((function(){e.onDelete&&e.onDelete()})),e.close())}))}else l.MessageService.moveMessages([this.message().messagePersonId()],new r.Folder({folderType:r.FolderType.Archive})).then((function(){e.onDelete&&e.onDelete()})),this.close()},e.prototype.smtpReply=function(){this.onSMTPReply&&this.onSMTPReply()},e.prototype.reply=function(){if(c.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.message().getData());l.MessageService.createMessage(r.CreateMessageType.Reply,e.messagePersonId(),c.SM.languageCode()).then((function(e){c.SM.topWindow().SM.compose({editorType:u.SMEditorType.EditDraft},e)})),this.close()}else c.SM.topWindow().SMApp.composeAdvanced({to:[this.message().from()],subject:"RE: "+this.message().subject()})},e.prototype.replyAll=function(){if(c.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.message().getData());l.MessageService.createMessage(r.CreateMessageType.ReplyAll,e.messagePersonId(),c.SM.languageCode()).then((function(e){c.SM.topWindow().SM.compose({editorType:u.SMEditorType.EditDraft},e)})),this.close()}else{var t=s(s([this.message().from()],this.message().to(),!0),this.message().cc(),!0);c.SM.topWindow().SMApp.composeAdvanced({to:t,subject:"RE: "+this.message().subject()})}},e.prototype.forward=function(){if(c.SM.configuration.composeAction===r.ComposeAction.Compose){var e=new r.Message(this.message().getData());l.MessageService.createMessage(r.CreateMessageType.Forward,e.messagePersonId(),c.SM.languageCode()).then((function(e){c.SM.topWindow().SM.compose({editorType:u.SMEditorType.EditDraft},e)})),this.close()}else c.SM.topWindow().SMApp.composeAdvanced({to:[this.message().from()],subject:"FW: "+this.message().subject()})},e.prototype.close=function(){this.dialog.modal("hide")},Object.defineProperty(e.prototype,"showDeleteButton",{get:function(){return this.allowActions&&(!this.message().isSystemMessage()||this.message().isSystemMessageDeletable())||this.isAuditAdmin&&!1===c.SM.configuration.auditAdminHideDelete},enumerable:!1,configurable:!0}),e.prototype.updateResolvedRecipientCount=function(e,t,i){this.message()&&s(s(s([],this.message().to(),!0),this.message().cc(),!0),this.message().bcc(),!0).map((function(n){n.id()===e&&n.lastRecipientCountRequestId===t&&(n.loadingRecipientCount(!1),n.personCount(i))}))},e}();t.SMViewMessageViewModel=h,t.SMViewMessageComponent={template:p,viewModel:h}},971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxResponse=void 0;t.AjaxResponse=function(e){this.successful=e.Result.successful,this.errorMessage=e.Result.errorMessage,this.data=e.Result.data}},4452:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attachment=void 0;var n=i(1032),a=i(2390),s=i(6853),o=function(){function e(e){var t=this;this.attachmentId=n.observable(),this.name=n.observable(),this.attachmentType=n.observable(s.AttachmentType.File),this.link=n.observable(),this.iconPath=n.observable(),this.surveyCollectorGU=n.observable(),this.queryXml=n.observable(),this.size=n.observable(),this.progress=n.observable(0),this.file=n.observable(),this.status=n.observable(s.AttachmentStatus.Complete),this.viewGU=n.observable(),this.tabGU=n.observable(),this.identityGU=n.observable(),e&&this.loadData(e),this.canCancel=n.pureComputed((function(){return!(t.status()===s.AttachmentStatus.Uploading&&void 0===t.file())})),this.labelStatusClass=n.pureComputed((function(){var e="";switch(t.status()){case s.AttachmentStatus.Complete:e="label-primary";break;case s.AttachmentStatus.WaitingToUpload:e="label-default";break;case s.AttachmentStatus.Uploading:e="label-warning";break;case s.AttachmentStatus.UploadFailed:e="label-danger"}return"label attachment-label attachment "+e})),this.iconStatusClass=n.pureComputed((function(){var e="";switch(t.status()){case s.AttachmentStatus.UploadFailed:e="fa fa-exclamation-circle";break;case s.AttachmentStatus.Complete:e="fa fa-paperclip";break;case s.AttachmentStatus.WaitingToUpload:e="fa fa-hourglass-o"}return e}))}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e.prototype.progressText=function(){return this.canCancel()?"".concat(Math.round(this.progress()),"%"):""},e}();t.Attachment=o},4652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;t.Configuration=function(e){this.showCompose=e.ShowCompose,this.showInbox=e.ShowInbox,this.showDrafts=e.ShowDrafts,this.showSent=e.ShowSent,this.showOutbox=e.ShowOutbox,this.showTrash=e.ShowTrash,this.showAlerts=e.ShowAlerts,this.showFolderActions=e.ShowFolderActions,this.showSignatureActions=e.ShowSignatureActions,this.showMessageGridOnly=e.ShowMessageGridOnly,this.showToolbar=e.ShowToolbar,this.showSidebar=e.ShowSidebar,this.composeAction=e.ComposeAction,this.emailAddressSeparator=e.EmailAddressSeparator,this.defaultFolderType=e.DefaultFolderType,this.auditAdminHideDelete=e.AuditAdminHideDelete,this.showReplyForward=e.ShowReplyForward}},4611:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactCategory=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.ContactCategory=s},8721:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactGroup=void 0;var n=i(1032),a=i(2390),s=i(6853),o=function(){function e(e){this.id=n.observable(),this.organizationYearId=n.observable(),this.ownerRecipient=n.observable(),this.name=n.observable(),this.description=n.observable(),this.isOwner=n.observable(),this.isPublic=n.observable(),this.organizationName=n.observable(),this.recipients=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={recipients:{create:function(e){return new s.Recipient(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),t,this)},Object.defineProperty(e.prototype,"scopeDesc",{get:function(){return this.isPublic()?"Public":"Private"},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return a.toJS(this)},e}();t.ContactGroup=o},5180:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationMessage=void 0;var n=i(1032),a=i(2390),s=i(6605),o=i(381),r=i(2617),l=function(){function e(e){var t=this;this.smsMessage=n.observable(),this.sendDateTime=n.observable(),this.isSender=n.observable(),this.conversationGU=n.observable(),this.messageGU=n.observable(),this.localStatus=n.observable(),this.localStatusLastUpdateDateTime=n.observable(),this.serviceStatus=n.observable(),this.serviceStatusLastUpdateDateTime=n.observable(),this.statusStyle=n.computed((function(){var e=t.getStatusColor(t.localStatus()),i=t.getStatusColor(t.serviceStatus()),n=r.SM.userType===s.UserType.Staff?1:0;return"--fa-secondary-opacity: ".concat(n,"; --fa-primary-color: ").concat(e,"; --fa-secondary-color: ").concat(i)})),this.statusTooltip=n.computed((function(){return'<span style="white-space: nowrap">Message: '.concat(t.getStatusText(t.localStatus(),t.localStatusLastUpdateDateTime()))+(r.SM.userType===s.UserType.Staff?"<br>SMS: ".concat(t.getStatusText(t.serviceStatus(),t.serviceStatusLastUpdateDateTime())):"")+"</span>"})),this.statusMessage=n.computed((function(){switch(t.serviceStatus()){case s.SMSMessageStatus.None:return"";case s.SMSMessageStatus.Sent:return"Sent";case s.SMSMessageStatus.Queued:return"Sending";case s.SMSMessageStatus.Failed:return"Failed";default:return""}})),e&&this.loadData(e)}return e.prototype.getStatusText=function(e,t){switch(e){case s.SMSMessageStatus.Sent:return"Sent at ".concat(o(t).format("h:mm:ss a"));case s.SMSMessageStatus.Failed:return"Failed to send.";case s.SMSMessageStatus.Queued:default:return"Sending..."}},e.prototype.getStatusColor=function(e){switch(e){case s.SMSMessageStatus.Sent:return"green";case s.SMSMessageStatus.Failed:return"red";case s.SMSMessageStatus.Queued:default:return"gray"}},Object.defineProperty(e.prototype,"cssClass",{get:function(){return this.isSender()?"sent-message":"received-message"},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e}();t.ConversationMessage=l},6212:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Conversation=void 0;var n=i(1032),a=i(2390),s=i(2653),o=i(5180),r=i(381),l=function(){function e(e){this.conversationGU=n.observable(),this.displayName=n.observable(""),this.latestMessage=n.observable(),this.latestMessageDateTime=n.observable(),this.displayLatestMessageDateTime=n.observable(),this.photoURL=n.observable(null),this.messages=n.observableArray(),this.loadingMessages=n.observable(!1),this.unreadMessagesCount=n.observable(0),this.nextPageToLoad=0,this.isLastPageLoaded=!1,e&&this.loadData(e)}return Object.defineProperty(e.prototype,"initials",{get:function(){return this.displayName().split(" ").map((function(e){return e[0]})).filter((function(e){return e&&e.toUpperCase()!==e.toLowerCase()})).slice(0,2).join("")},enumerable:!1,configurable:!0}),e.prototype.loadMessages=function(){var e=this;!1===this.loadingMessages()&&!1===this.isLastPageLoaded&&(this.loadingMessages(!0),s.ConversationService.getConversationMessages(this,this.nextPageToLoad,SM.languageCode()).then((function(t){var i,n=t.messages,a=t.isLastPageLoaded;e.isLastPageLoaded=a,(i=e.messages).unshift.apply(i,n),e.nextPageToLoad++,e.unreadMessagesCount(0)})).finally((function(){e.loadingMessages(!1)})))},e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e.prototype.AddMessage=function(e){var t=new o.ConversationMessage;t.smsMessage(e.text),t.isSender(e.isSender),t.sendDateTime("Today at "+r(Date.now()).format("h:mm A")),t.messageGU(e.messageGU),e.serviceStatus&&(t.serviceStatus(e.serviceStatus),t.serviceStatusLastUpdateDateTime(e.serviceStatusLastUpdateDateTime)),e.localStatus&&(t.localStatus(e.localStatus),t.localStatusLastUpdateDateTime(e.localStatusLastUpdateDateTime)),this.messages.push(t)},e.prototype.Update=function(e){this.latestMessage(e.latestMessage),this.latestMessageDateTime(e.latestMessageDateTime),this.displayLatestMessageDateTime(e.displayLatestMessageDateTime)},e}();t.Conversation=l},7428:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counselor=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),this.canReceive=n.observable(),this.noContactReason=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Counselor=s},6605:(e,t)=>{"use strict";var i,n,a,s,o,r,l,d,c,u,p,h,m,b,f,g,v,S,M,y,T,w,x,A,R,C,D;Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientBoxBadgeType=t.ComposeAction=t.VoiceType=t.MediaRecorderStates=t.AudioPlayerStates=t.EventType=t.MessageRelationship=t.ContactLogOption=t.CreateMessageType=t.ContactListSecurity=t.StudentRecipientAccess=t.ParentRecipientAccess=t.TeacherStudentAccess=t.StaffRecipientAccess=t.AttachmentType=t.AttachmentStatus=t.FromType=t.GroupUserType=t.RecipientType=t.RecipientList=t.StaffType=t.UserType=t.CurrentWebPortal=t.FolderType=t.SMSMessageStatus=t.MessageStatus=t.CommunicationType=void 0,(D=t.CommunicationType||(t.CommunicationType={}))[D.Email=0]="Email",D[D.Text=1]="Text",D[D.Voice=2]="Voice",D[D.Social=3]="Social",D[D.PushNote=4]="PushNote",(C=t.MessageStatus||(t.MessageStatus={}))[C.Draft=0]="Draft",C[C.WaitingToSend=1]="WaitingToSend",C[C.WaitingToSendOutsideEmail=2]="WaitingToSendOutsideEmail",C[C.Sending=3]="Sending",C[C.Sent=4]="Sent",C[C.Error=5]="Error",C[C.Scheduled=6]="Scheduled",(R=t.SMSMessageStatus||(t.SMSMessageStatus={}))[R.Queued=0]="Queued",R[R.QueuedOnMessageService=1]="QueuedOnMessageService",R[R.Sent=2]="Sent",R[R.Failed=3]="Failed",R[R.Delivered=4]="Delivered",R[R.Read=5]="Read",R[R.None=6]="None",(A=t.FolderType||(t.FolderType={}))[A.Inbox=0]="Inbox",A[A.Sent=1]="Sent",A[A.Draft=2]="Draft",A[A.Archive=3]="Archive",A[A.Outbox=4]="Outbox",A[A.SystemMessage=5]="SystemMessage",A[A.UserFolder=6]="UserFolder",(x=t.CurrentWebPortal||(t.CurrentWebPortal={}))[x.Synergy=0]="Synergy",x[x.TeacherVUE=1]="TeacherVUE",x[x.ParentVUE=2]="ParentVUE",x[x.StudentVUE=3]="StudentVUE",(w=t.UserType||(t.UserType={}))[w.Staff=0]="Staff",w[w.Parent=1]="Parent",w[w.Student=2]="Student",(T=t.StaffType||(t.StaffType={}))[T.School=0]="School",T[T.District=1]="District",(y=t.RecipientList||(t.RecipientList={}))[y.Staff=0]="Staff",y[y.Parents=1]="Parents",y[y.Students=2]="Students",y[y.Classes=3]="Classes",y[y.StudentGroups=4]="StudentGroups",y[y.MassStudentGroups=5]="MassStudentGroups",y[y.Teachers=6]="Teachers",y[y.Counselors=7]="Counselors",y[y.UserGroups=8]="UserGroups",y[y.MassEmail=9]="MassEmail",y[y.ContactGroups=10]="ContactGroups",y[y.External=11]="External",y[y.STQuery=12]="STQuery",(M=t.RecipientType||(t.RecipientType={}))[M.To=0]="To",M[M.Cc=1]="Cc",M[M.Bcc=2]="Bcc",(S=t.GroupUserType||(t.GroupUserType={}))[S.None=0]="None",S[S.Staff=1]="Staff",S[S.Parent=2]="Parent",S[S.Student=4]="Student",(v=t.FromType||(t.FromType={}))[v.StudentGroup=0]="StudentGroup",v[v.Role=1]="Role",v[v.Teacher=2]="Teacher",v[v.Staff=3]="Staff",v[v.NoReply=4]="NoReply",v[v.DefaultAddressSIS=5]="DefaultAddressSIS",v[v.DefaultAddressPXP=6]="DefaultAddressPXP",v[v.Other=7]="Other",(g=t.AttachmentStatus||(t.AttachmentStatus={}))[g.Complete=0]="Complete",g[g.WaitingToUpload=1]="WaitingToUpload",g[g.Uploading=2]="Uploading",g[g.UploadFailed=3]="UploadFailed",(f=t.AttachmentType||(t.AttachmentType={}))[f.File=0]="File",f[f.Link=1]="Link",f[f.Survey=2]="Survey",f[f.STQuery=3]="STQuery",f[f.Voice=4]="Voice",(b=t.StaffRecipientAccess||(t.StaffRecipientAccess={}))[b.Focus=0]="Focus",b[b.District=1]="District",(m=t.TeacherStudentAccess||(t.TeacherStudentAccess={}))[m.All=0]="All",m[m.Own=1]="Own",(h=t.ParentRecipientAccess||(t.ParentRecipientAccess={}))[h.SchoolStaff=0]="SchoolStaff",h[h.DistrictStaff=1]="DistrictStaff",(p=t.StudentRecipientAccess||(t.StudentRecipientAccess={}))[p.SchoolStaff=0]="SchoolStaff",p[p.SchoolStaffSchoolStudents=1]="SchoolStaffSchoolStudents",p[p.SchoolStaffDistrictStudents=2]="SchoolStaffDistrictStudents",(u=t.ContactListSecurity||(t.ContactListSecurity={}))[u.Private=0]="Private",u[u.PublicSchool=1]="PublicSchool",u[u.PublicDistrict=2]="PublicDistrict",(c=t.CreateMessageType||(t.CreateMessageType={}))[c.Reply=0]="Reply",c[c.ReplyAll=1]="ReplyAll",c[c.Forward=2]="Forward",c[c.MeetingUpdate=3]="MeetingUpdate",(d=t.ContactLogOption||(t.ContactLogOption={}))[d.NoLogging=0]="NoLogging",d[d.StaffChoice=1]="StaffChoice",d[d.AlwaysLog=2]="AlwaysLog",(l=t.MessageRelationship||(t.MessageRelationship={}))[l.To=0]="To",l[l.From=1]="From",l[l.ToOrFrom=2]="ToOrFrom",(r=t.EventType||(t.EventType={}))[r.NewMessage=0]="NewMessage",r[r.UpdateConversation=1]="UpdateConversation",r[r.MessageStatusUpdate=2]="MessageStatusUpdate",r[r.ResolvedRecipientCountUpdate=3]="ResolvedRecipientCountUpdate",(o=t.AudioPlayerStates||(t.AudioPlayerStates={}))[o.Play=0]="Play",o[o.Pause=1]="Pause",o[o.NoMediaLoaded=2]="NoMediaLoaded",(s=t.MediaRecorderStates||(t.MediaRecorderStates={}))[s.Recording=0]="Recording",s[s.Inactive=1]="Inactive",(a=t.VoiceType||(t.VoiceType={}))[a.Audio=0]="Audio",a[a.TextToSpeech=1]="TextToSpeech",(n=t.ComposeAction||(t.ComposeAction={}))[n.Compose=0]="Compose",n[n.MailTo=1]="MailTo",n[n.Copy=2]="Copy",n[n.None=3]="None",(i=t.RecipientBoxBadgeType||(t.RecipientBoxBadgeType={}))[i.ResolvedRecipientCount=0]="ResolvedRecipientCount",i[i.ReadStatus=1]="ReadStatus",i[i.Hidden=2]="Hidden"},4186:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Folder=void 0;var n=i(1032),a=i(2390),s=i(2617),o=i(6605),r=function(){function e(e){this.folderId=n.observable(),this.folderType=n.observable(),this.name=n.observable(),this.unreadMessages=n.observable(),this.icon=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e.prototype.getFolderName=function(){switch(this.folderType()){case o.FolderType.Inbox:return s.SM.translation.inbox;case o.FolderType.Sent:return s.SM.translation.sent;case o.FolderType.Draft:return s.SM.translation.drafts;case o.FolderType.Archive:return s.SM.translation.trash;case o.FolderType.Outbox:return s.SM.translation.outbox;case o.FolderType.SystemMessage:return s.SM.translation.systemMessages;default:return this.name()}},e.prototype.getIcon=function(){switch(this.folderType()){case o.FolderType.Inbox:return"folder-icon fa-light fa-inbox";case o.FolderType.Sent:return"folder-icon fa-light fa-paper-plane";case o.FolderType.Draft:return"folder-icon fa-light fa-pencil";case o.FolderType.Archive:return"folder-icon fa-light fa-trash";case o.FolderType.Outbox:return"folder-icon fa-light fa-folder-open";case o.FolderType.SystemMessage:return"folder-icon fa-light fa-bell";default:return"folder-icon fa-light fa-folder-open"}},e}();t.Folder=r},7813:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FromOption=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.fromType=n.observable(),this.id=n.observable(),this.description=n.observable(),this.details2=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.FromOption=s},6535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupSelectObject=void 0;t.GroupSelectObject=function(e,t){this.object=ko.observable(),this.studentsSelected=ko.observable(!1),this.parentsSelected=ko.observable(!1),this.staffSelected=ko.observable(!1),this.text=ko.observable(),this.object(e),this.text(t)}},6853:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var a=Object.getOwnPropertyDescriptor(t,i);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,a)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),a(i(971),t),a(i(4452),t),a(i(7428),t),a(i(4611),t),a(i(8721),t),a(i(6212),t),a(i(6605),t),a(i(4186),t),a(i(7813),t),a(i(3553),t),a(i(4341),t),a(i(3153),t),a(i(9546),t),a(i(7038),t),a(i(5268),t),a(i(9119),t),a(i(5139),t),a(i(6228),t),a(i(7075),t),a(i(9577),t),a(i(20),t),a(i(5460),t),a(i(5700),t),a(i(2161),t),a(i(6862),t),a(i(5444),t),a(i(7392),t),a(i(989),t),a(i(7200),t),a(i(7050),t),a(i(7788),t),a(i(877),t)},3553:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Language=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.code=n.observable(),this.description=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Language=s},4341:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var s=i(1032),o=i(2390),r=i(3720),l=i(2617),d=i(4452),c=i(6605),u=i(6853),p=i(5268),h=i(7075),m=i(140),b=i(8076),f=i(381),g=function(){function e(e){var t=this;this.messageId=s.observable(),this.messagePersonId=s.observable(),this.fromOption=s.observable(new u.FromOption),this.from=s.observable(new p.Recipient),this.noReply=s.observable(),this.to=s.observableArray(),this.cc=s.observableArray(),this.bcc=s.observableArray(),this.sendDateTime=s.observable(),this.sendDateTimeFormattedShort=s.observable(),this.sendDateTimeFormattedLong=s.observable(),this.subject=s.observable(),this.isMeeting=s.observable(),this.vidConfId=s.observable(),this.surveyGU=s.observable(),this.surveyInfo=s.observable(new m.SurveyInfo),this.messageText=s.observable(),this.smsMessage=s.observable(),this.voiceText=s.observable(),this.pushNotificationText=s.observable(),this.socialText=s.observable(),this.sendEmail=s.observable(),this.sendSMS=s.observable(),this.sendVoice=s.observable(),this.sendPushNotification=s.observable(),this.sendSocial=s.observable(),this.voiceType=s.observable(),this.priority=s.observable(),this.messageStatus=s.observable(),this.isItDraft=s.observable(),this.mailRead=s.observable(),this.deleted=s.observable(),this.translated=s.observable(),this.translationComplete=s.observable(),this.translationError=s.observable(),this.isSender=s.observable(),this.isSystemMessage=s.observable(),this.isSystemMessageDeletable=s.observable(),this.hasAttachments=s.observable(),this.originalLanguageCode=s.observable(),this.originalLanguageDescription=s.observable(),this.originalSubjectText=s.observable(),this.originalMessageText=s.observable(),this.attachments=s.observableArray(),this.personCount=s.observable(),this.readCount=s.observable(),this.updateContactLog=s.observable(),this.contactCategory=s.observable(),this.meetingStartDate=s.observable(),this.meetingEndDate=s.observable(),this.canJoinMeeting=s.observable(),this.recurrence=s.observable(),this.recurrenceText=s.observable(),this.bccSender=s.observable(!1),this.scheduleSendDate=s.observable(),this.isUrgent=s.observable(!1),this.shouldTranslate=s.observable(!0),this.ttsVoice=s.observable(),this.behalfOfSenderName=s.observable(),this.isNewMessage=s.observable(!0),e&&this.loadData(e),this.fileAttachments=s.pureComputed((function(){return t.attachments()?t.attachments().filter((function(e){return e.attachmentType()===c.AttachmentType.File})):[]})),this.linkAttachments=s.pureComputed((function(){return t.attachments()?t.attachments().filter((function(e){return e.attachmentType()===c.AttachmentType.Link||e.attachmentType()===c.AttachmentType.STQuery})):[]})),this.surveyAttachment=s.pureComputed((function(){return(t.attachments()||[]).filter((function(e){return e.attachmentType()===c.AttachmentType.Survey}))[0]})),this.isSurvey=s.pureComputed((function(){return!!t.surveyAttachment()}))}return e.prototype.addSTQueryRecipients=function(){var e=this,t=this,i=window;i&&i.ST&&i.ST.OpenViewInDialog&&(i.ST.OpenViewInDialog("50AA41AC-0156-4A21-820B-9E0C5A319D43",null,{REV_RENDER:{SERVER_STATE:{D:[{"@K":"ANALYTICS_QUERY_TEXT","@V":""},{"@K":"FROM_ANALYTICS","@V":"Y"}]}}}),$.extend(i.Namespace("Actions.Analytics",i.ST),{SetSTQueryText:function(i){return n(e,void 0,void 0,(function(){var e,n;return a(this,(function(a){switch(a.label){case 0:return[4,r.RecipientService.validateSTQuery(i&&i.STQueryText["#cdata"])];case 1:return a.sent()&&(e=t.to().filter((function(e){return e.recipientList()===c.RecipientList.STQuery})).length,n=new p.Recipient({id:"ST_QUERY_".concat(e),recipientList:c.RecipientList.STQuery,groupUserTypes:c.GroupUserType.Parent|c.GroupUserType.Staff|c.GroupUserType.Student,contactDetails1:"Synergy Query",contactDetails2:"",content:i.STQueryText["#cdata"]}),t.bcc.push(n)),[2]}}))}))}}))},Object.defineProperty(e.prototype,"recipientsFormatted",{get:function(){var e,t,i,n=null===(e=this.to())||void 0===e?void 0:e.slice(0,5);return n.push.apply(n,null===(t=this.cc())||void 0===t?void 0:t.slice(0,5)),n.push.apply(n,null===(i=this.bcc())||void 0===i?void 0:i.slice(0,5)),n.map((function(e){return e.contactDetails1()})).join(", ")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageStatusFormatted",{get:function(){switch(this.messageStatus()){case u.MessageStatus.Draft:return"Draft";case u.MessageStatus.WaitingToSend:return"Waiting to Send";case u.MessageStatus.WaitingToSendOutsideEmail:return"Waiting to Send Outbound";case u.MessageStatus.Sending:return"Sending";case u.MessageStatus.Sent:return"Sent";case u.MessageStatus.Error:return"Error";case u.MessageStatus.Scheduled:return"Scheduled"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageTextFormatted",{get:function(){var e=$("<div>").append(this.messageText());return e.find("a").attr("target","_blank"),e.html()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendDateTimeFormattedFull",{get:function(){return f(this.sendDateTime()).format("LLL")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasParentRecipients",{get:function(){var e=this.to().concat(this.cc()).concat(this.bcc());return e.filter((function(e){return e.recipientList()===c.RecipientList.Parents})).length>0||e.filter((function(e){return(e.groupUserTypes()&c.GroupUserType.Parent)===c.GroupUserType.Parent})).length>0},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){var t=this,i={attachments:{create:function(e){return new d.Attachment(e.data)}},bcc:{create:function(e){return new p.Recipient(e.data)}},cc:{create:function(e){return new p.Recipient(e.data)}},from:{create:function(e){return s.observable(new p.Recipient(e.data))}},fromOption:{create:function(e){return s.observable(new u.FromOption(e.data))}},to:{create:function(e){return new p.Recipient(e.data)}},recurrence:{update:function(e){return e.data?new h.Recurrence(e.data):null}},meetingStartDate:{update:function(e){return new Date(e.data)}},meetingEndDate:{update:function(e){return new Date(e.data)}},scheduleSendDate:{update:function(e){return e.data?new Date(e.data):null}},surveyInfo:{update:function(e){return new m.SurveyInfo(t.messageStatus(),e.data)}}};o.fromJS(JSON.parse(JSON.stringify(e)),i,this)},e.prototype.getData=function(){return o.toJS(this)},e.prototype.validate=function(){return this.validateMessageSubject()&&this.validateCheckedCommunicationTypes()&&this.validateUncheckedCommunicationTypes()},e.prototype.validateUncheckedCommunicationTypes=function(){var e=!0;return!this.sendEmail()&&this.messageText().length>0&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendEmailUncheckedAndFilledTitle(),l.SM.translation.sendEmailUncheckedAndFilledText(),(function(t){"Yes"!==t&&(e=!1)})),e&&!this.sendSMS()&&this.smsMessage()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendSMSUncheckedAndFilledTitle(),l.SM.translation.sendSMSUncheckedAndFilledText(),(function(t){"Yes"!==t&&(e=!1)})),e&&!this.sendVoice()&&this.voiceText()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendVoiceUncheckedAndFilledTitle(),l.SM.translation.sendVoiceUncheckedAndFilledText(),(function(t){"Yes"!==t&&(e=!1)})),e},e.prototype.validateCheckedCommunicationTypes=function(){var e=!0;return this.sendEmail()&&!this.messageText()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendEmailCheckedAndEmptyTitle(),l.SM.translation.sendEmailCheckedAndEmptyText(),(function(t){"Yes"!==t&&(e=!1)})),e&&this.sendSMS()&&!this.smsMessage()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendSMSCheckedAndEmptyTitle(),l.SM.translation.sendSMSCheckedAndEmptyText(),(function(t){"Yes"!==t&&(e=!1)})),e&&this.sendVoice()&&!this.voiceText()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.sendSMSCheckedAndEmptyTitle(),l.SM.translation.sendSMSCheckedAndEmptyText(),(function(t){"Yes"!==t&&(e=!1)})),e},e.prototype.validateMessageSubject=function(){var e=!0;return this.sendEmail()&&!this.subject()&&b.SMDialog.showMessage(b.SMDialogButtons.YesNo,l.SM.translation.blankSubjectTitle(),l.SM.translation.blankSubjectText(),(function(t){"Yes"!==t&&(e=!1)})),e},e}();t.Message=g},9546:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationGrade=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.description=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.OrganizationGrade=s},3153:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Organization=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.currentSchool=n.observable(),this.parentVUEEnabled=n.observable(),this.studentVUEEnabled=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Organization=s},7038:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parent=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.description=n.observable(),this.associatedStudentId=n.observable(),this.associatedStudentName=n.observable(),this.relationship=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),this.canReceive=n.observable(),this.noContactReason=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Parent=s},9119:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientAddressing=void 0;var n=i(1032),a=i(2390),s=i(6853),o=function(){function e(e){this.to=n.observableArray(),this.cc=n.observableArray(),this.bcc=n.observableArray(),this.invalidRecipients=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t=this,i={bcc:{create:function(e){return new s.Recipient(e.data)}},cc:{create:function(e){return new s.Recipient(e.data)}},invalidRecipients:{create:function(e){return new s.Recipient(e.data)}},to:{create:function(e){return new s.Recipient(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),i,this),this.to.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0})),this.cc.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0})),this.bcc.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0}))},e.prototype.getData=function(){return a.toJS(this)},e}();t.RecipientAddressing=o},5139:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientReadResult=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.read=n.observable(),this.emailResult=n.observable(),this.groupName=n.observable(),this.orgYearId=n.observable(),this.organizationName=n.observable(),this.recipientList=n.observable(),this.groupUserTypes=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.RecipientReadResult=s},6228:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientReadStatus=void 0;var n=i(1032),a=i(2390),s=i(6853),o=function(){function e(e){this.readCount=n.observable(),this.personCount=n.observable(),this.recipients=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={recipients:{create:function(e){return new s.RecipientReadResult(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.RecipientReadStatus=o},5268:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Recipient=void 0;var s=i(1032),o=i(2390),r=i(6605),l=i(20),d=i(3720),c=function(){function e(e){var t=this;this.id=s.observable(),this.recipientList=s.observable(),this.groupUserTypes=s.observable(),this.contactDetails1=s.observable(),this.contactDetails2=s.observable(),this.content=s.observable(),this.grades=s.observableArray(),this.section=s.observable(),this.associatedSectionId=s.observable(),this.associatedSectionName=s.observable(),this.associatedGroupId=s.observable(),this.associatedGroupName=s.observable(),this.associatedStudentId=s.observable(),this.associatedStudentName=s.observable(),this.organizationYearId=s.observable(),this.organizationName=s.observable(),this.emails=s.observableArray(),this.personCount=s.observable(),this.readCount=s.observable(),this.loadingRecipientCount=s.observable(!1),this.lastResolvedRecipientUpdateTime=0,this.lastRecipientCountRequestId=0,e&&this.loadData(e),this.groupUserTypes.subscribe((function(){t.recipientList()!==r.RecipientList.Classes&&t.recipientList()!==r.RecipientList.MassStudentGroups&&t.recipientList()!==r.RecipientList.MassEmail||t.contactDetails2(t.getGroupUserTypeString()),t.loadResolvedRecipientCount()}))}return e.prototype.isGroup=function(){var e=!1;switch(this.recipientList()){case r.RecipientList.Classes:case r.RecipientList.MassStudentGroups:case r.RecipientList.UserGroups:case r.RecipientList.MassEmail:case r.RecipientList.ContactGroups:e=!0}return e},e.prototype.loadData=function(e){o.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return o.toJS(this)},e.prototype.getGroupUserTypeString=function(){var e=[];return this.groupUserTypes()&r.GroupUserType.Staff&&e.push(this.staffName()),this.groupUserTypes()&r.GroupUserType.Parent&&e.push("Parents"),this.groupUserTypes()&r.GroupUserType.Student&&e.push("Students"),[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length<2?"":" & ")},e.prototype.generateDetails1=function(e){switch(this.recipientList()){case r.RecipientList.Classes:return"".concat(this.section().sectionId()," - ").concat(this.section().course());case r.RecipientList.MassStudentGroups:return"".concat(this.associatedGroupName());default:return e}},e.prototype.generateDetails2=function(e,t){switch(this.recipientList()){case r.RecipientList.Staff:return t||"Staff";case r.RecipientList.Parents:return this.associatedStudentName()?"Parent of ".concat(this.associatedStudentName()):"Parent";case r.RecipientList.Students:return"Student";case r.RecipientList.Teachers:return this.section?"".concat(this.section().period(),"-").concat(this.section().course()," Rm: ").concat(this.section().room()):"Teacher";case r.RecipientList.Counselors:return"Counselor";case r.RecipientList.StudentGroups:return"".concat(e," ").concat(t||"");case r.RecipientList.UserGroups:return"User Group";case r.RecipientList.Classes:case r.RecipientList.MassStudentGroups:case r.RecipientList.MassEmail:return this.getGroupUserTypeString();default:return""}},e.prototype.regenerateDetails=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.contactDetails1(this.generateDetails1(e)),this.contactDetails2(this.generateDetails2(e,t))},e.prototype.staffName=function(){switch(this.recipientList()){case r.RecipientList.MassStudentGroups:case r.RecipientList.MassEmail:return"Staff";case r.RecipientList.Classes:return"Teacher"}},e.loadRecipients=function(t){var i=new Array;if(t)for(var n=0,a=t;n<a.length;n++){var s=a[n],o=new e;if(s.GroupUserTypes=s.GroupUserTypes||r.GroupUserType.None,o.id(s.GU),o.recipientList("number"==typeof s.RecipientList?s.RecipientList:+r.RecipientList[s.RecipientList]),o.groupUserTypes("number"==typeof s.GroupUserTypes?s.GroupUserTypes:+r.GroupUserType[s.GroupUserTypes]),o.contactDetails1(s.Details1),o.contactDetails2(s.Details2),o.associatedStudentId(s.AssociatedStudentGU),o.associatedStudentName(s.AssociatedStudentName),o.organizationYearId(s.OrganizationYearGU),o.organizationName(s.OrganizationName),o.emails(s.Emails),s.Section){var d=new l.Section;d.id(s.Section.SectionGU),d.period(s.Section.Period),d.term(s.Section.Term),d.sectionId(s.Section.SectionID),d.courseId(s.Section.CourseID),d.course(s.Section.Course),d.teacher(s.Section.Teacher),d.room(s.Section.Room),d.grade(s.Section.Grade),o.section(d)}i.push(o)}return i},e.prototype.loadResolvedRecipientCount=function(){return n(this,void 0,void 0,(function(){var e;return a(this,(function(t){return this.lastRecipientCountRequestId++,e=this.lastRecipientCountRequestId,this.loadingRecipientCount(!0),this.isGroup()?d.RecipientService.getResolvedRecipientCount(this,e):this.personCount(1),[2]}))}))},e.buildSectionRecipient=function(t,i){var n=new e;return n.recipientList(r.RecipientList.Classes),n.id(t.id()),n.organizationYearId(t.organizationYearId()),n.organizationName(t.organizationName()),n.section(t),n.groupUserTypes(i),n.regenerateDetails(),n},e.buildMassStudentGroupRecipient=function(t,i){var n=new e;return n.recipientList(r.RecipientList.MassStudentGroups),n.id(t.id()),n.associatedGroupId(t.groupId()),n.associatedGroupName(t.groupName()),n.organizationYearId(t.organizationYearId()),n.organizationName(t.organizationName()),n.groupUserTypes(i),n.regenerateDetails(),n},e.buildStudentRecipient=function(t){var i=new e;return i.recipientList(r.RecipientList.Students),i.id(t.id()),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName()),i.regenerateDetails(t.name()),i},e.buildParentRecipient=function(t){var i=new e;return i.recipientList(r.RecipientList.Parents),i.id(t.id()),i.associatedStudentId(t.associatedStudentId()),i.associatedStudentName(t.associatedStudentName()),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName()),i.regenerateDetails(t.name()),i},e.buildTeacherRecipient=function(t){var i=new e;i.recipientList(r.RecipientList.Teachers),i.id(t.id()),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName());var n=new l.Section;return n.sectionId(t.sectionId()),n.course(t.course()),n.period(t.period()),n.room(t.room()),i.section(n),i.regenerateDetails(t.teacher()),i},e.buildStudentGroupRecipient=function(t){var i=new e;return i.recipientList(r.RecipientList.StudentGroups),i.id(t.id()),i.associatedGroupId(t.groupId()),i.associatedGroupName(t.groupName()),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName()),i.regenerateDetails(t.staffName(),t.typeValue()),i},e.buildCounselorRecipient=function(t){var i=new e;return i.recipientList(r.RecipientList.Counselors),i.id(t.id()),i.organizationYearId(t.organizationYearId()),i.organizationName(t.organizationName()),i.regenerateDetails(t.name()),i},e}();t.Recipient=c},7075:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recurrence=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.recurType=n.observable(),this.startTime=n.observable(),this.startDate=n.observable(),this.stopDate=n.observable(),this.weekCount=n.observable(),this.dayCount=n.observable(),this.everyHour=n.observable(),this.everyMinute=n.observable(),this.monthType=n.observable(),this.monthDayType=n.observable(),this.monthDayofWeek=n.observable(),this.monthDayofMonth=n.observable(),this.monday=n.observable(),this.tuesday=n.observable(),this.wednesday=n.observable(),this.thursday=n.observable(),this.friday=n.observable(),this.saturday=n.observable(),this.sunday=n.observable(),this.january=n.observable(),this.february=n.observable(),this.march=n.observable(),this.april=n.observable(),this.may=n.observable(),this.june=n.observable(),this.july=n.observable(),this.august=n.observable(),this.september=n.observable(),this.october=n.observable(),this.november=n.observable(),this.december=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e.prototype.getDataUpperCase=function(){return{RecurType:this.recurType(),StartTime:this.startTime(),StartDate:this.startDate(),StopDate:this.stopDate(),WeekCount:this.weekCount(),DayCount:this.dayCount(),EveryHour:this.everyHour(),EveryMinute:this.everyMinute(),MonthType:this.monthType(),MonthDayType:this.monthDayType(),MonthDayofWeek:this.monthDayofWeek(),MonthDayofMonth:this.monthDayofMonth(),Monday:this.monday(),Tuesday:this.tuesday(),Wednesday:this.wednesday(),Thursday:this.thursday(),Friday:this.friday(),Saturday:this.saturday(),Sunday:this.sunday(),January:this.january(),February:this.february(),March:this.march(),April:this.april(),May:this.may(),June:this.june(),July:this.july(),August:this.august(),September:this.september(),October:this.october(),November:this.november(),December:this.december()}},e}();t.Recurrence=s},8842:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplyResponse=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.response=n.observable(),this.messageText=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.ReplyResponse=s},1575:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvedRecipientResult=void 0;var n=i(1032),a=i(2390),s=i(6853),o=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.schoolNames=n.observable(),this.userType=n.observable(),e&&this.loadData(e)}return Object.defineProperty(e.prototype,"userTypeText",{get:function(){var e="";return this.userType()===s.UserType.Staff?e="Staff":this.userType()===s.UserType.Parent?e="Parent":this.userType()===s.UserType.Student&&(e="Student"),e},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.ResolvedRecipientResult=o},9577:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.School=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.name=n.observable(),this.terms=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.School=s},20:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.period=n.observable(),this.term=n.observable(),this.sectionId=n.observable(),this.courseId=n.observable(),this.course=n.observable(),this.teacher=n.observable(),this.room=n.observable(),this.grade=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Section=s},4005:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectObject=void 0;t.SelectObject=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.object=ko.observable(),this.text=ko.observable(),this.selected=ko.observable(),this.disabled=ko.observable(),this.object(e),this.text(t),this.selected(i),this.disabled(n)}},5460:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.autoBccSender=n.observable(),this.enableForwarding=n.observable(),this.emailAddresses=n.observableArray(),this.undoSendSeconds=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Settings=s},5700:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signature=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.newMessages=n.observable(""),this.replies=n.observable(""),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Signature=s},2161:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Staff=void 0;var n=i(1032),a=i(2390),s=i(2617),o=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.jobTitle=n.observable(),this.type=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),e&&this.loadData(e)}return Object.defineProperty(e.prototype,"jobTitleFormatted",{get:function(){return this.jobTitle()||s.SM.translation.staff()},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Staff=o},5444:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudentGroup=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.staffName=n.observable(),this.groupId=n.observable(),this.groupName=n.observable(),this.jobTitle=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),this.canReceive=n.observable(),this.noContactReason=n.observable(),this.typeValue=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.StudentGroup=s},8626:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudentRecipients=void 0;var n=i(1032),a=i(2390),s=i(7428),o=i(7038),r=i(6862),l=i(5444),d=i(7392),c=function(){function e(e){this.student=n.observable(),this.parents=n.observableArray(),this.teachers=n.observableArray(),this.studentGroups=n.observableArray(),this.counselor=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={student:{create:function(e){return new r.Student(e.data)}},parents:{create:function(e){return new o.Parent(e.data)}},teachers:{create:function(e){return new d.Teacher(e.data)}},studentGroups:{create:function(e){return new l.StudentGroup(e.data)}},counselor:{create:function(e){return new s.Counselor(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.StudentRecipients=c},6862:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),this.canReceive=n.observable(),this.noContactReason=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Student=s},140:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyInfo=void 0;var n=i(1032),a=i(2390),s=i(6605),o=function(){function e(e,t){this.startDate=n.observable(new Date),this.endDate=n.observable(),this.name=n.observable(),this.isEnabled=n.observable(!0),this.isRequired=n.observable(!1),this.isAnonymous=n.observable(!1),this.splitStudents=n.observable(!1),this.isSentMessage=n.pureComputed((function(){return e===s.MessageStatus.Sent})),t&&this.loadData(t)}return e.prototype.setBeginTimeNow=function(){this.startDate(new Date)},e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(e){return n.toJS({startDate:this.startDate,endDate:this.endDate,name:this.name()||e,isEnabled:this.isEnabled,isRequired:this.isRequired,isAnonymous:this.isAnonymous,splitStudents:this.splitStudents})},e}();t.SurveyInfo=o},9478:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherRecipients=void 0;var n=i(1032),a=i(2390),s=i(20),o=i(5444),r=function(){function e(e){this.sections=n.observableArray(),this.studentGroups=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={sections:{create:function(e){return new s.Section(e.data)}},studentGroups:{create:function(e){return new o.StudentGroup(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.TeacherRecipients=r},7392:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Teacher=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.teacher=n.observable(),this.sectionId=n.observable(),this.course=n.observable(),this.period=n.observable(),this.room=n.observable(),this.organizationYearId=n.observable(),this.organizationName=n.observable(),this.canReceive=n.observable(),this.noContactReason=n.observable(),this.title=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Teacher=s},989:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Template=void 0;var n=i(1032),a=i(2390),s=i(4341),o=function(){function e(e){this.templateId=n.observable(),this.organizationId=n.observable(),this.name=n.observable(),this.priority=n.observable(),this.emailSubject=n.observable(),this.emailBody=n.observable(),this.smsMessage=n.observable(),this.voiceText=n.observable(),this.socialText=n.observable(),this.sendEmail=n.observable(),this.sendSMS=n.observable(),this.sendVoice=n.observable(),this.sendSocial=n.observable(),this.attachments=n.observableArray(),this.voiceType=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={message:{create:function(e){return new s.Message(e.data)}}};a.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Template=o},7200:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Term=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.name=n.observable(),this.active=n.observable(),this.teachers=n.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.Term=s},7050:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenValue=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.token=n.observable(),this.value=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.TokenValue=s},7788:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserGroup=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.id=n.observable(),this.name=n.observable(),this.users=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.UserGroup=s},877:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserTemplate=void 0;var n=i(1032),a=i(2390),s=function(){function e(e){this.userTemplateId=n.observable(),this.name=n.observable(),this.messageText=n.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){a.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return a.toJS(this)},e}();t.UserTemplate=s},2653:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationService=void 0;var n=i(6853),a=i(5180),s=i(2617),o=function(){function e(){}return e.sendConversationMessage=function(e){return new Promise((function(t,i){s.SM.callOAuthService("ST.Messaging","SendConversationMessage",{conversationGU:e.conversationGU(),text:e.smsMessage()}).then((function(e){t(!0)}))}))},e.getConversation=function(e,t){return new Promise((function(i,a){s.SM.callOAuthService("ST.Messaging","GetConversation",{conversationGU:e,languageCode:t}).then((function(e){var t=new n.Conversation(e.Result);i(t)})).catch((function(e){a(e)}))}))},e.getConversations=function(e,t){return new Promise((function(i,a){s.SM.callOAuthService("ST.Messaging","GetConversations",{pageToLoad:e,languageCode:t}).then((function(e){var t=e.Result.conversations.map((function(e){return new n.Conversation(e)})),a=e.Result.isLastPageLoaded,s=e.Result.totalUnreadConversationMessages;i({conversations:t,isLastPageLoaded:a,totalUnreadConversationMessages:s})})).catch((function(e){a(e)}))}))},e.getConversationMessages=function(e,t,i){return new Promise((function(n,o){s.SM.callOAuthService("ST.Messaging","GetConversationMessages",{conversationGU:e.conversationGU(),pageToLoad:t,languageCode:i}).then((function(e){var t=e.Result.messages.map((function(e){return new a.ConversationMessage(e)})),i=e.Result.isLastPageLoaded;n({messages:t,isLastPageLoaded:i})})).catch((function(e){o(e)}))}))},e.updateConversationRead=function(e){s.SM.callOAuthService("ST.Messaging","UpdateConversationRead",{conversationGU:e.conversationGU()})},e}();t.ConversationService=o},7970:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DBService=t.PagedResult=void 0;t.PagedResult=function(){};var i=function(){function e(){}return e.formatOptions=function(e){var t=[];if(e.filter)if(void 0!==e.filter.columnIndex)t.push({column:e.filter[0],operation:e.filter[1],value:e.filter[2]});else for(var i=0,n=e.filter;i<n.length;i++){var a=n[i];$.isArray(a)&&t.push({column:a[0],operation:a[1],value:a[2]})}return{filter:t,search:"",skip:e.skip,take:e.take}},e}();t.DBService=i},3031:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderService=void 0;var n=i(6853),a=i(2617),s=function(){function e(){}return e.getFolders=function(){return new Promise((function(e,t){a.SM.callOAuthService("ST.Messaging","GetFolders").then((function(t){var i=t.Result.map((function(e){return new n.Folder(e)}));e(i)})).catch((function(e){t(e)}))}))},e.addFolder=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","AddFolder",{name:e.name()}).then((function(e){var i=new n.AjaxResponse(e);i.successful&&(i.data=new n.Folder(e.Result.data)),t(i)})).catch((function(e){a.SM.handleError(e,"Unable to add folder.")}))}))},e.updateFolder=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","UpdateFolder",{folderId:e.folderId(),name:e.name()}).then((function(e){t(new n.AjaxResponse(e))})).catch((function(e){a.SM.handleError(e,"Unable to update folder.")}))}))},e.deleteFolder=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","DeleteFolder",{folderId:e}).then((function(e){t(!0)})).catch((function(e){var t=JSON.parse(e).Error;i(new Error(t))})).catch((function(e){a.SM.handleError(e,"Unable to delete folder.")}))}))},e}();t.FolderService=s},3720:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var a=Object.getOwnPropertyDescriptor(t,i);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,a)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),a(i(3031),t),a(i(6397),t),a(i(6174),t),a(i(760),t),a(i(8240),t),a(i(1683),t),a(i(2449),t),a(i(7970),t),a(i(2653),t)},6397:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageService=void 0;var n=i(6853),a=i(2617),s=function(){function e(){}return e.getUnreadMessageCount=function(){return new Promise((function(e,t){a.SM.callOAuthService("ST.Messaging","GetUnreadMessageCount").then((function(t){var i=new n.AjaxResponse(t);i.successful&&(i.data=t.Result.data),e(i)})).catch((function(e){t(e)}))}))},e.getMessages=function(e,t,i,s,o){return new Promise((function(r,l){$.extend(o,{folderId:t,folderType:e,languageCode:i,showDeleted:s}),a.SM.callOAuthService("ST.Messaging","GetMessages",o).then((function(e){var t={data:e.Result.data.map((function(e){return new n.Message(e)})),totalCount:e.Result.totalCount};r(t)})).catch((function(e){a.SM.handleError(e,"Unable to load messages.")}))}))},e.getSMSMessages=function(){return new Promise((function(e,t){a.SM.callOAuthService("ST.Messaging","GetSMSMessages").then((function(t){var i={data:t.Result.data.map((function(e){return new n.Message(e)})),totalCount:t.Result.totalCount};e(i)})).catch((function(e){a.SM.handleError(e,"Unable to load messages.")}))}))},e.printAuditReport=function(e,t,i,n,s,o,r,l,d,c){return new Promise((function(u,p){var h={recipients:e.map((function(e){return e.getData()})),messageRelationship:t,keywords:i,searchSubject:n,searchBody:s,searchSMSText:o,searchVoiceText:r,searchAttachmentNames:l,fromDate:d,toDate:c,RevRequest:{}};a.SM.callOAuthService("ST.Messaging","PrintAuditReport",h).then((function(e){e.Result.successful?u(!0):p(e.Result.errorMessage)})).catch((function(e){a.SM.handleError(e,"Unable to print audit report.")}))}))},e.getAuditReportMessages=function(e,t,i,s,o,r,l,d,c,u,p){return new Promise((function(h,m){$.extend(p,{recipients:e.map((function(e){return e.getData()})),messageRelationship:t,keywords:i,searchSubject:s,searchBody:o,searchSMSText:r,searchVoiceText:l,searchAttachmentNames:d,fromDate:c,toDate:u}),a.SM.callOAuthService("ST.Messaging","GetAuditReportMessages",p).then((function(e){var t={data:e.Result.data.map((function(e){return new n.Message(e)})),totalCount:e.Result.totalCount};h(t)})).catch((function(e){a.SM.handleError(e,"Unable to load audit report messages.")}))}))},e.createRetentionSet=function(e,t,i,n,s,o,r,l,d,c,u){return new Promise((function(p,h){var m={retentionSetName:e,recipients:t.map((function(e){return e.getData()})),messageRelationship:i,keywords:n,searchSubject:s,searchBody:o,searchSMSText:r,searchVoiceText:l,searchAttachmentNames:d,fromDate:c,toDate:u};a.SM.callOAuthService("ST.Messaging","CreateRetentionSet",m).then((function(e){p(e.Result.successful)})).catch((function(e){a.SM.handleError(e,"Unable to create Retention Set.")}))}))},e.getSurveyLink=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","GetSurveyLink",{surveyCollectorGU:e}).then((function(e){t(e.Result.SurveyLink)})).catch((function(e){a.SM.handleError(e,"Unable to load message.")}))}))},e.getMessage=function(e,t,i,s){return new Promise((function(o,r){a.SM.callOAuthService("ST.Messaging","GetMessage",{id:e,languageCode:i,markAsRead:t,isSystemMessage:s}).then((function(e){var t=new n.Message(e.Result);o(t)})).catch((function(e){a.SM.handleError(e,"Unable to load message.")}))}))},e.getViewMessage=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","GetMessage",{viewId:e,languageCode:a.SM.languageCode()}).then((function(e){var i=new n.Message(e.Result);t(i)})).catch((function(e){a.SM.handleError(e,"Unable to load message.")}))}))},e.getTranslatedSubject=function(e,t){return new Promise((function(i,n){a.SM.callOAuthService("ST.Messaging","GetTranslatedSubject",{languageCode:t,messagePersonId:e}).then((function(e){var t=e.Result;i(t)})).catch((function(e){a.SM.handleError(e,"Unable to get translated subject.")}))}))},e.getRecipientReadStatus=function(e,t,i){return void 0===t&&(t=null),new Promise((function(s,o){$.extend(i,{groupId:t,messageId:e}),a.SM.callOAuthService("ST.Messaging","GetRecipientReadStatus",i).then((function(e){var t=new n.RecipientReadStatus(e.Result);s(t)})).catch((function(e){a.SM.handleError(e,"Unable to get recipient read status.")}))}))},e.updateRead=function(e,t,i){return new Promise((function(n,s){a.SM.callOAuthService("ST.Messaging","UpdateRead",{folderType:e,ids:t,read:i}).then((function(e){n(!0)})).catch((function(e){a.SM.handleError(e,"Unable to update read status.")}))}))},e.updateAllRead=function(e,t,i){return new Promise((function(n,s){a.SM.callOAuthService("ST.Messaging","UpdateAllRead",{folderType:e,folderId:t,read:i}).then((function(e){n(!0)})).catch((function(e){a.SM.handleError(e,"Unable to update all read status.")}))}))},e.archiveAll=function(e,t){return new Promise((function(i,s){a.SM.callOAuthService("ST.Messaging","ArchiveAll",{folderType:e,folderId:t}).then((function(e){i(!0)})).catch((function(t){a.SM.handleError(t,e===n.FolderType.Archive?"Unable to delete all.":"Unable to archive all")}))}))},e.moveMessages=function(e,t){return new Promise((function(i,n){a.SM.callOAuthService("ST.Messaging","MoveMessages",{folderId:t.folderId(),folderType:t.folderType(),messagePersonIds:e}).then((function(e){i(!0)})).catch((function(e){a.SM.handleError(e,"Unable to move message(s).")}))}))},e.sendMessage=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","SendMessage",{bcc:e.bcc().map((function(e){return e.getData()})),cc:e.cc().map((function(e){return e.getData()})),fromOption:e.fromOption().getData(),messagePersonId:e.messagePersonId(),messageText:e.messageText(),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice(),priority:e.priority(),subject:e.subject(),to:e.to().map((function(e){return e.getData()})),updateContactLog:e.updateContactLog(),contactCategory:e.contactCategory(),isMeeting:e.isMeeting(),vidConfId:e.vidConfId(),surveyGU:e.surveyGU(),surveyInfo:e.surveyInfo().getData(e.subject()),bccSender:e.bccSender(),scheduleSendDate:e.scheduleSendDate(),isUrgent:e.isUrgent(),shouldTranslate:e.shouldTranslate(),voiceID:e.ttsVoice(),voiceType:e.voiceType()}).then((function(e){t(e.Result)})).catch((function(e){a.SM.handleError(e,"Unable to send message."),i(e)}))}))},e.saveDraft=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","SaveDraft",{bcc:e.bcc().map((function(e){return e.getData()})),cc:e.cc().map((function(e){return e.getData()})),fromOption:e.fromOption().getData(),messagePersonId:e.messagePersonId(),messageText:e.messageText(),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice(),priority:e.priority(),subject:e.subject(),to:e.to().map((function(e){return e.getData()})),updateContactLog:e.updateContactLog(),contactCategory:e.contactCategory(),isMeeting:e.isMeeting(),vidConfId:e.vidConfId(),surveyGU:e.surveyGU(),surveyInfo:e.surveyInfo().getData(e.subject()),bccSender:e.bccSender(),scheduleSendDate:e.scheduleSendDate(),shouldTranslate:e.shouldTranslate()}).then((function(e){t(e.Result)})).catch((function(e){a.SM.handleError(e,"Unable to save draft."),i(e)}))}))},e.createMessage=function(e,t,i){return new Promise((function(s,o){a.SM.callOAuthService("ST.Messaging","CreateMessage",{createMessageType:e,messagePersonId:t,languageCode:i}).then((function(e){var t=new n.Message(e.Result);s(t)})).catch((function(e){a.SM.handleError(e,"Unable to create message.")}))}))},e.cancelScheduledSend=function(e){return new Promise((function(t){a.SM.callOAuthService("ST.Messaging","CancelScheduledSend",{messagePersonId:e}).then((function(){t(!0)})).catch((function(e){a.SM.handleError(e,"Unable to cancel scheduled send.")}))}))},e.discardDraft=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","DiscardDraft",{messagePersonId:e}).then((function(e){t(!0)})).catch((function(e){a.SM.handleError(e,"Unable to discard draft.")}))}))},e.deleteMessages=function(e,t){return new Promise((function(i,n){a.SM.callOAuthService("ST.Messaging","DeleteMessages",{folderType:e,messagePersonIds:t}).then((function(e){i(!0)})).catch((function(e){a.SM.handleError(e,"Unable to delete message(s).")}))}))},e.undeleteMessages=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","UndeleteMessages",{messagePersonIds:e}).then((function(e){t(!0)})).catch((function(e){a.SM.handleError(e,"Unable to undelete message(s).")}))}))},e.addAttachment=function(e,t,i,s,o,r){return new Promise((function(l,d){var c=new FormData,u={attachmentType:t.attachmentType(),name:t.name(),link:t.link(),iconPath:t.iconPath(),surveyCollectorGU:t.surveyCollectorGU(),queryXml:t.queryXml(),messagePersonId:e,isTemplate:o,templateGU:r};c.append("data",JSON.stringify(u)),t.attachmentType()!==n.AttachmentType.File&&t.attachmentType()!==n.AttachmentType.Voice||c.append("attachments[]",t.file());var p=$.ajaxSettings.xhr();p.upload.onprogress=function(e){i&&i(e.loaded/e.total*100)},s&&s(p),a.SM.callOAuthService("ST.Messaging","AddAttachment",{},!1,{contentType:!1,data:c,processData:!1,xhr:function(){return p}}).then((function(e){var t=new n.AjaxResponse(e);l(t)})).catch((function(e){d(e)}))}))},e.deleteAttachment=function(e,t){return new Promise((function(i,n){a.SM.callOAuthService("ST.Messaging","DeleteAttachment",{attachmentId:t,messagePersonId:e}).then((function(e){i(!0)})).catch((function(e){a.SM.handleError(e,"Unable to delete attachment.")}))}))},e.getMessageVoiceAudio=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","GetMessageVoiceAudio",{messageGU:e}).then((function(e){t(e.Result.audio)}))}))},e.permanentlyDeleteMessage=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","PermanentlyDeleteMessages",{messageIds:[e]}).catch((function(e){a.SM.handleError(e,"Unable to permanently delete message.")})),t()}))},e}();t.MessageService=s},6174:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiscService=void 0;var n=i(6853),a=i(8842),s=i(2617),o=function(){function e(){}return e.getFromOptions=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetFromOptions").then((function(t){var i=t.Result.map((function(e){return new n.Language(e)}));e(i)})).catch((function(e){s.SM.handleError(e,"Unable to get from options.")}))}))},e.getLanguages=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetLanguages").then((function(t){var i=t.Result.map((function(e){return new n.Language(e)}));e(i)})).catch((function(e){s.SM.handleError(e,"Unable to get languages.")}))}))},e.getAttachmentsFromQueryXml=function(e){return new Promise((function(t){e?s.SM.callOAuthService("ST.Messaging","GetAttachmentsFromQueryXml",{queryXml:e}).then((function(e){var i=e.Result.map((function(e){return new n.Attachment(e)}));t(i)})).catch((function(e){s.SM.handleError(e,"Unable to get attachments.")})):t([])}))},e.getAttachmentsFromLinks=function(e){return new Promise((function(t){e?s.SM.callOAuthService("ST.Messaging","GetAttachmentsFromLinks",{links:e}).then((function(e){var i=e.Result.map((function(e){return new n.Attachment(e)}));t(i)})).catch((function(e){s.SM.handleError(e,"Unable to get attachments.")})):t(null)}))},e.getSignature=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetSignature").then((function(t){e(new n.Signature(t.Result))})).catch((function(e){s.SM.handleError(e,"Unable to get signature.")}))}))},e.getContactCategories=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetContactCategories").then((function(t){var i=t.Result.map((function(e){return new n.ContactCategory(e)}));e(i)})).catch((function(e){s.SM.handleError(e,"Unable to get contact categories.")}))}))},e.updateSignature=function(e,t){return new Promise((function(i,n){s.SM.callOAuthService("ST.Messaging","UpdateSignature",{newMessages:encodeURIComponent(e),replies:encodeURIComponent(t)}).then((function(e){i(!0)})).catch((function(e){s.SM.handleError(e,"Unable to update signature.")}))}))},e.getSettings=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetSettings").then((function(t){e(new n.Settings(t.Result))})).catch((function(e){s.SM.handleError(e,"Unable to get settings.")}))}))},e.updateSettings=function(e){return new Promise((function(t,i){s.SM.callOAuthService("ST.Messaging","UpdateSettings",{enableForwarding:e.enableForwarding(),undoSendSeconds:e.undoSendSeconds()}).then((function(e){t(!0)})).catch((function(e){s.SM.handleError(e,"Unable to update settings.")}))}))},e.getResponses=function(e){return new Promise((function(t,i){s.SM.callOAuthService("ST.Messaging","GetResponses",{id:e}).then((function(e){var i=e.Result.map((function(e){return new a.ReplyResponse(e)}));t(i)})).catch((function(e){s.SM.handleError(e,"Unable to get responses.")}))}))},e.getReplyFromResponse=function(e,t){return new Promise((function(i,n){s.SM.callOAuthService("ST.Messaging","GetReplyFromResponse",{id:e,response:t}).then((function(e){i(e.Result.replyText)})).catch((function(e){s.SM.handleError(e,"Unable to get reply from response.")}))}))},e.getRevLanguages=function(){return new Promise((function(e,t){s.SM.callOAuthService("ST.Messaging","GetRevLanguages").then((function(t){var i=t.Result.languages.map((function(e){return new n.Language(e)}));e(i)}))}))},e.getVoiceTTSPreview=function(e,t){return new Promise((function(i,n){s.SM.callOAuthService("ST.Messaging","GetVoiceTTSPreview",{text:e,language:t}).then((function(e){i(e.Result.audio)}))}))},e}();t.MiscService=o},760:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationService=void 0;var n=i(6853),a=i(2617),s=function(){function e(){}return e.getOrganizations=function(){return new Promise((function(e,t){a.SM.callOAuthService("ST.Messaging","GetOrganizations").then((function(t){var i=t.Result.map((function(e){return new n.Organization(e)}));e(i)})).catch((function(e){a.SM.handleError(e,"Unable to get organizations.")}))}))},e.getOrganizationGrades=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","GetOrganizationGrades",{id:e}).then((function(e){var i=e.Result.map((function(e){return new n.OrganizationGrade(e)}));t(i)})).catch((function(e){a.SM.handleError(e,"Unable to get organization grades.")}))}))},e}();t.OrganizationService=s},8240:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientService=void 0;var a=i(6853),s=i(1575),o=i(8626),r=i(9478),l=i(2617),d=function(){function e(){}return e.getStaff=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetStaff",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.Staff(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get staff.")}))}))},e.getParents=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetParents",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.Parent(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get parents.")}))}))},e.getStudents=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetStudents",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.Student(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get students.")}))}))},e.getSections=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetSections",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.Section(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get sections.")}))}))},e.getTeachers=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetTeachers",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.School(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get teachers.")}))}))},e.getCounselors=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetCounselors",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.Counselor(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get counselors.")}))}))},e.getStudentGroups=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetStudentGroups",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.StudentGroup(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get student groups.")}))}))},e.getMassStudentGroups=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetMassStudentGroups",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.StudentGroup(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get mass student groups.")}))}))},e.getUserGroups=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetUserGroups",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.UserGroup(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get user groups.")}))}))},e.getContactGroups=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetContactGroups",e).then((function(e){var i=$.map(e.Result,(function(e){return new a.ContactGroup(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get contact lists.")}))}))},e.getContactGroup=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetContactGroup",{contactGroupId:e}).then((function(e){t(new a.ContactGroup(e.Result))})).catch((function(e){l.SM.handleError(e,"Unable to get contact list.")}))}))},e.addContactGroup=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","AddContactGroup",{organizationYearId:e.organizationYearId(),name:e.name(),description:e.description(),isPublic:e.isPublic(),recipients:e.recipients().map((function(e){return e.getData()}))}).then((function(e){t(!0)})).catch((function(e){l.SM.handleError(e,"Unable to add contact list.")}))}))},e.updateContactGroup=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","UpdateContactGroup",{id:e.id(),organizationYearId:e.organizationYearId(),name:e.name(),description:e.description(),isPublic:e.isPublic(),recipients:e.recipients().map((function(e){return e.getData()}))}).then((function(e){t(!0)})).catch((function(e){l.SM.handleError(e,"Unable to update contact list.")}))}))},e.deleteContactGroup=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","DeleteContactGroup",{contactGroupId:e}).then((function(e){t(!0)})).catch((function(e){l.SM.handleError(e,"Unable to delete contact list.")}))}))},e.getRecipientAddressing=function(e,t,i){return new Promise((function(n,s){l.SM.callOAuthService("ST.Messaging","GetRecipientAddressing",{to:e,cc:t,bcc:i}).then((function(e){n(new a.RecipientAddressing(e.Result))})).catch((function(e){l.SM.handleError(e,"Unable to get recipient addressing.")}))}))},e.validateSTQuery=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","ValidateSTQuery",{queryString:e}).then((function(e){t(e.Result)}))}))},e.getTeacherRecipients=function(){return new Promise((function(e,t){l.SM.callOAuthService("ST.Messaging","GetTeacherRecipients").then((function(t){var i=new r.TeacherRecipients(t.Result);e(i)})).catch((function(e){l.SM.handleError(e,"Unable to get teacher recipients.")}))}))},e.getStudentRecipients=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetStudentRecipients",e).then((function(e){var i=new o.StudentRecipients(e.Result);t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get student recipients.")}))}))},e.getRecipients=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetRecipients",e).then((function(e){t(e.Result)})).catch((function(e){l.SM.handleError(e,"Unable to get recipients.")}))}))},e.getResolvedRecipientCount=function(e,t){return new Promise((function(i,a){l.SM.callOAuthService("ST.Messaging","GetResolvedRecipientCount",n({requestId:t},ko.toJS(e))).then((function(e){i(e.Result)})).catch((function(e){l.SM.handleError(e,"Unable to get recipient count.")}))}))},e.getResolvedRecipients=function(e){return new Promise((function(t,i){l.SM.callOAuthService("ST.Messaging","GetResolvedRecipients",ko.toJS(e)).then((function(e){var i=e.Result.map((function(e){return new s.ResolvedRecipientResult(e)}));t(i)})).catch((function(e){l.SM.handleError(e,"Unable to get recipients.")}))}))},e}();t.RecipientService=d},1683:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateService=void 0;var n=i(6853),a=i(2617),s=function(){function e(){}return e.saveTemplate=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","SaveTemplate",{templateId:e.templateId(),organizationId:e.organizationId(),name:e.name(),priority:e.priority(),emailSubject:e.emailSubject(),emailBody:encodeURIComponent(e.emailBody()),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice()}).then((function(e){t(e.Result)})).catch((function(e){a.SM.handleError(e,"Unable to save template.")}))}))},e.getTemplate=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","GetTemplate",{templateId:e}).then((function(e){var i=new n.Template(e.Result);t(i)})).catch((function(e){a.SM.handleError(e,"Unable to get template.")}))}))},e}();t.TemplateService=s},2449:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserTemplateService=void 0;var n=i(6853),a=i(2617),s=function(){function e(){}return e.getUserTemplates=function(){return new Promise((function(e,t){a.SM.callOAuthService("ST.Messaging","GetUserTemplates").then((function(t){var i=t.Result.map((function(e){return new n.UserTemplate(e)}));e(i)})).catch((function(e){a.SM.handleError(e,"Unable to get user templates.")}))}))},e.addUserTemplate=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","AddUserTemplate",{messageText:encodeURIComponent(e.messageText()),name:e.name()}).then((function(e){t(e.Result)})).catch((function(e){a.SM.handleError(e,"Unable to add user template.")}))}))},e.updateUserTemplate=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","UpdateUserTemplate",{messageText:encodeURIComponent(e.messageText()),name:e.name(),userTemplateId:e.userTemplateId()}).then((function(e){t(!0)})).catch((function(e){a.SM.handleError(e,"Unable to update user template.")}))}))},e.deleteUserTemplate=function(e){return new Promise((function(t,i){a.SM.callOAuthService("ST.Messaging","DeleteUserTemplate",{userTemplateId:e}).then((function(e){t(!0)})).catch((function(e){var t=JSON.parse(e).Error;i(new Error(t))})).catch((function(e){a.SM.handleError(e,"Unable to delete user template.")}))}))},e.getUserTemplateMerged=function(e,t,i){return new Promise((function(n,s){a.SM.callOAuthService("ST.Messaging","GetUserTemplateMerged",{parentId:i,studentId:t,userTemplateId:e}).then((function(e){var t=e.Result;n(t)})).catch((function(e){a.SM.handleError(e,"Unable to get user template merged.")}))}))},e}();t.UserTemplateService=s},8076:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SMDialog=t.SMDialogButtons=void 0;var s,o=i(1032),r=i(2372),l=i(2617);!function(e){e[e.Ok=0]="Ok",e[e.SaveCancel=1]="SaveCancel",e[e.YesNo=2]="YesNo"}(s=t.SMDialogButtons||(t.SMDialogButtons={}));var d=function(){function e(){}return e.showInput=function(e,t,i,n,a){this.showInternal(r.SMDialogType.Input,s.SaveCancel,e,t,i,n,a)},e.showMessage=function(e,t,i,n){this.showInternal(r.SMDialogType.Message,e,t,i,null,null,n)},e.showMessageAsync=function(e,t,i){return n(this,void 0,void 0,(function(){var n=this;return a(this,(function(a){return[2,new Promise((function(a){n.showInternal(r.SMDialogType.Message,e,t,i,null,null,(function(e){a(e)}))}))]}))}))},e.showDialog=function(e){var t=$('<sm-dialog params="options: dialogOptions"></sm-dialog>');$(l.SM.topWindow().document.body).append(t);var i={dialogOptions:{dialogId:"smDialog".concat(Date.now()),initialValue:e.initialValue,leftButtons:e.leftButtons,message:e.message,onInitialized:function(i){setTimeout((function(){i.show((function(i,n){setTimeout((function(){$(t).remove(),e.onDismissed&&e.onDismissed(i,n)}),0)}))}),0)},rightButtons:e.rightButtons,title:e.title,type:e.type,validationMessage:e.validationMessage}};o.applyBindings(i,t[0])},e.showInternal=function(e,t,i,n,a,o,r){var d;switch(t){case s.Ok:d=[{label:l.SM.translation.ok(),value:"Ok",css:"btn btn-default"}];break;case s.SaveCancel:d=[{label:l.SM.translation.save(),value:"Save",css:"btn btn-primary"},{label:l.SM.translation.cancel(),value:"Cancel",css:"btn btn-default"}];break;case s.YesNo:d=[{label:l.SM.translation.yes(),value:"Yes",css:"btn btn-default"},{label:l.SM.translation.no(),value:"No",css:"btn btn-default"}]}this.showDialog({initialValue:a,message:n,onDismissed:r,rightButtons:d,title:i,type:e,validationMessage:o})},e}();t.SMDialog=d},2617:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SM=t.SMWindowSize=void 0;var r,l=i(5475),d=i(9061),c=i(6623),u=i(6197),p=i(6438),h=i(6853),m=i(3720),b=i(8076),f=i(4134),g=i(2355),v=i(4652),S=i(7754);(r=t.SMWindowSize||(t.SMWindowSize={}))[r.Normal=0]="Normal",r[r.Maximized=1]="Maximized";var M=function(){function e(){}var t,i;return Object.defineProperty(e,"focusOrgYearId",{get:function(){return this.topWindow().ST.FocusOrgYearGU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"openMessagePersonId",{get:function(){return this.topWindow().ST.SM_OpenMessagePersonGU},set:function(e){this.topWindow().ST.SM_OpenMessagePersonGU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"openVidConfId",{get:function(){return this.topWindow().ST.OpenVidConfGU},set:function(e){this.topWindow().ST.OpenVidConfGU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"openConversationGU",{get:function(){return this.topWindow().ST.OpenConversationGU},set:function(e){this.topWindow().ST.OpenConversationGU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFolderType",{get:function(){var e=new URLSearchParams(this.topWindow().location.search);return(e.get("folderType")?parseInt(e.get("folderType")):void 0)||this.topWindow().ST.SM_DefaultFolderType||h.FolderType.Inbox},enumerable:!1,configurable:!0}),Object.defineProperty(e,"accessibilityMode",{get:function(){return this.topWindow().ST.Preferences.AccessibilityMode||this.topWindow().PXP&&this.topWindow().PXP.AccessibilityMode},enumerable:!1,configurable:!0}),e.allowEmailAtFocus=function(t){return void 0===t&&(t=e.focusOrgYearId),!!t||e.allowEmailAtDistrict||e.staffRecipientAccess===h.StaffRecipientAccess.District},e.showReadStatus=function(e,t,i,n){c.SMReadStatusViewModel.instantiate({onInitialized:function(a){a.show(e,t,i,n)}})},e.showResolvedRecipientList=function(e){S.SMResolvedRecipientListViewModel.instantiate({onInitialized:function(t){t.show(e)}})},e.instantiateAddRecipients=function(e){d.SMAddRecipientViewModel.instantiate(e)},e.instantiateViewMessage=function(e,t){void 0===t&&(t={}),m.MessageService.getViewMessage(e).then((function(e){p.SMViewMessageViewModel.instantiate(n(n({},t),{onInitialized:function(t){t.show(e)}}))}))},e.isAdvancedUpload=function(){var e=document.createElement("div"),t=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.appVersion.indexOf("Edge")||-1!==navigator.appVersion.indexOf("Trident/");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window&&!t},e.languageCode=function(){return(e.currentWebPortal===h.CurrentWebPortal.ParentVUE||e.currentWebPortal===h.CurrentWebPortal.StudentVUE)&&e.getCookie("PVUE")||e.revLanguageCodeEnglish},e.getCookie=function(e){var t=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(i){return i.substring(0,t)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(t))}))[0]||null},e.handleError=function(e,t){$.pnotify_error("".concat(t)),e&&console.error(e)},e.callOAuthService=function(t,i,n,a,s){var o=this;return void 0===a&&(a=!0),new Promise((function(r,d){var c;""!==o.auditId&&((n=n||{}).auditId=o.auditId);var u=!1;a&&(c=window.setTimeout((function(){u=!0,d({error:"Request timed out for '".concat(i,"'."),errorType:"Timeout"})}),e.networkTimeout)),(0,l.setTimeout)((function(){ST.CallOAuthService(t,i,n,s).then((function(e){a&&u||(c&&window.clearTimeout(c),r(e))})).catch((function(e){a&&u||(c&&window.clearTimeout(c),d(e))}))}),e.networkDelay)}))},e.updateUnreadMessagesBadge=function(t){this.unreadMessageCount=t;var i=e.topWindow().$(".SynergyMailUnread");0===t?(i.closest("li").removeClass("has-notifications"),i.each((function(e,t){$(t).hide()}))):(i.closest("li").addClass("has-notifications"),i.each((function(e,i){var n=$(i);n.show(),n.text(t),n.attr("title","".concat(t," unread message").concat(t>1?"s":""))})))},Object.defineProperty(e,"selectAddressesViewModel",{get:function(){var e=this;return new Promise((function(t,i){if(null===e.selectAddressesVM){var n=$("<sm-select-addresses></sm-select-addresses>");$("body").append(n),ko.applyBindings(e.selectAddressesVM,n[0]),(0,l.setTimeout)((function(){e.selectAddressesVM=ko.dataFor(n.get(0).firstChild),t(e.selectAddressesVM)}),500)}else t(e.selectAddressesVM)}))},enumerable:!1,configurable:!0}),e.selectAddresses=function(e){this.selectAddressesViewModel.then((function(t){t.open(e)}))},e.editSignatures=function(){e.SMApp().rootViewModel.editSignatures()},Object.defineProperty(e,"composeViewModel",{get:function(){var e=this;return new Promise((function(t,i){if(null===e.composeVM){var n=$("<sm-compose></sm-compose>");$("body").append(n),ko.applyBindings(e.composeVM,n[0]),(0,l.setTimeout)((function(){e.composeVM=ko.dataFor(n.get(0).firstChild),t(e.composeVM)}),500)}else t(e.composeVM)}))},enumerable:!1,configurable:!0}),e.compose=function(t,i,n){var a;e.allowNonStaffRecipients=t.allowNonStaffRecipients;var s=e.configuration.composeAction,r=null==i?void 0:i.to().flatMap((function(e){return e.emails()})).filter((function(e){return(null==e?void 0:e.length)>0})),l=null==i?void 0:i.cc().flatMap((function(e){return e.emails()})).filter((function(e){return(null==e?void 0:e.length)>0})),d=null==i?void 0:i.bcc().flatMap((function(e){return e.emails()})).filter((function(e){return(null==e?void 0:e.length)>0}));switch((t.isMeeting||t.surveyGU||t.isIntegratedAction||t.showComposeDialog)&&(s=h.ComposeAction.Compose),s){case h.ComposeAction.None:b.SMDialog.showMessage(b.SMDialogButtons.Ok,"Communication Disabled","Communication disabled.");break;case h.ComposeAction.MailTo:var c=r.join(e.configuration.emailAddressSeparator+" "),u=l.join(e.configuration.emailAddressSeparator+" "),p=d.join(e.configuration.emailAddressSeparator+" ");r.length+l.length+d.length>0||t.allowNoRecipientsMailTo?(window.ignoreUnloadMessage=!0,window.open("SendEmail.html?to=".concat(c,"&cc=").concat(u,"&bcc=").concat(p,"&subject=").concat((null==i?void 0:i.subject())||""),"_blank"),window.ignoreUnloadMessage=!1):b.SMDialog.showMessage(b.SMDialogButtons.Ok,"Unable to Send Email","No email addresses were found.");break;case h.ComposeAction.Compose:this.composeViewModel.then((function(e){e.open(t,i,n)}));break;case h.ComposeAction.Copy:try{var m=o(o(o([],r,!0),l,!0),d,!0),f=m.join(e.configuration.emailAddressSeparator+" "),g="text/plain",v=new Blob([f],{type:g}),S=[new ClipboardItem((a={},a[g]=v,a))];navigator.clipboard.write(S).then((function(){$.pnotify_success("Added ".concat(m.length," email address").concat(1===m.length?"":"es"," to the clipboard."))}))}catch(e){b.SMDialog.showMessage(b.SMDialogButtons.Ok,"Unable to access the clipboard.","Please ensure that clipboard permissions are allowed for this site and that you are browsing in a secure (HTTPS) mode.")}}},e.openSchedule=function(e){u.SMScheduleSendViewModel.instantiate({onInitialized:function(t){t.create(e)}})},e.SMApp=function(){return this.topWindow().SMApp},e.topWindow=function(){var t;switch(e.currentWebPortal){case h.CurrentWebPortal.Synergy:t=window.top;break;case h.CurrentWebPortal.TeacherVUE:var i=window.top.frames[0];t="FRAME_CONTENT"===i.name?i:window.top;break;case h.CurrentWebPortal.ParentVUE:case h.CurrentWebPortal.StudentVUE:default:t=window}return t},e.rootWindow=function(){var t;switch(e.currentWebPortal){case h.CurrentWebPortal.Synergy:t=e.topWindow().frames["Synergy Mail"]||e.topWindow().frames["Synergy Mail Audit"]||e.topWindow();break;case h.CurrentWebPortal.ParentVUE:case h.CurrentWebPortal.StudentVUE:case h.CurrentWebPortal.TeacherVUE:t=e.topWindow()}return t},Object.defineProperty(e,"$",{get:function(){return this.topWindow().$},enumerable:!1,configurable:!0}),e.showSnapshot=function(t,i,n){if(e.currentWebPortal===h.CurrentWebPortal.Synergy){var a="";switch(i){case h.RecipientList.Parents:a=e.PARENT_SNAPSHOT_VIEW_ID;break;case h.RecipientList.Students:a=e.STUDENT_SNAPSHOT_VIEW_ID;break;case h.RecipientList.Classes:a=e.CLASS_SNAPSHOT_VIEW_ID}t.attr("data-snapshot-view","-"),this.stView.ShowSnapshot(t,a,n)}},e.hideSnapshot=function(t){e.currentWebPortal===h.CurrentWebPortal.Synergy&&this.stView.HideSnapshot(t)},e.createEditor=function(e){return new Promise((function(t,i){var n=e.element.nextElementSibling,a=[];if(n&&(a=n.getElementsByClassName("ck-editor__editable")),a.length>0){var s=a[0].ckeditorInstance;t(s)}else{var o=["heading","|","alignment","|","bold","italic","strikethrough","underline","|","link","|","bulletedList","numberedList","fontfamily","fontsize","fontColor","fontBackgroundColor","|","insertTable","|","outdent","indent","|","uploadImage","blockQuote","|","undo","redo"];e.showViewTemplates&&o.push("viewTemplates"),e.showInsertToken&&o.push("insertToken");var r=function(n){if(!n)throw Error("CKEditor script not loaded");n.SynergyClassicEditor.create(e.element,{toolbar:{items:o},viewTemplates:{onclick:function(e){window.SMApp.showTemplateDropDown(e)}},insertToken:{onclick:function(e,t){window.SMApp.showTokenDropDown(e,t)}},fontFamily:{options:["default","Arial/Arial, Helvetica, sans-serif","Candara/Candara, Verdana, sans-serif","Comic Sans MS/Comic Sans MS, cursive","Courier New/Courier New, Courier, monospace","Georgia/Georgia, serif","Lato Hairline/Lato Hairline, Verdana, sans-serif","Lato Light/Lato Light, Verdana, sans-serif","Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma/Tahoma, Geneva, sans-serif","Times New Roman/Times New Roman, Times, serif","Trebuchet MS/Trebuchet MS, Helvetica, sans-serif","Verdana/Verdana, Geneva, sans-serif"]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]},image:{resizeUnit:"px",styles:["alignLeft","alignCenter","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original",value:null},{name:"resizeImage:50",label:"250px",value:"250"},{name:"resizeImage:75",label:"400px",value:"400"}],toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","resizeImage","|","imageTextAlternative"]},table:{contentToolbar:["tableRow","tableColumn","mergeTableCells","tableCellProperties","tableProperties"]},fontColor:{colors:[{color:"#000000",label:"Black"},{color:"#4d4d4d",label:"Dim Grey"},{color:"#999999",label:"Grey"},{color:"#e6e6e6",label:"Light Grey"},{color:"#ffffff",label:"White"},{color:"#e64c4c",label:"Red"},{color:"#e6994c",label:"Orange"},{color:"#e6e64c",label:"Yellow"},{color:"#99e64c",label:"Light Green"},{color:"#4ce64c",label:"Green"},{color:"#4ce699",label:"Aquamarine"},{color:"#4ce6e6",label:"Turquoise"},{color:"#4c99e6",label:"Light Blue"},{color:"#4c4ce6",label:"Blue"},{color:"#994ce6",label:"Purple"}]},fontBackgroundColor:{colors:[{color:"#000000",label:"Black"},{color:"#4d4d4d",label:"Dim Grey"},{color:"#999999",label:"Grey"},{color:"#e6e6e6",label:"Light Grey"},{color:"#ffffff",label:"White"},{color:"#e64c4c",label:"Red"},{color:"#e6994c",label:"Orange"},{color:"#e6e64c",label:"Yellow"},{color:"#99e64c",label:"Light Green"},{color:"#4ce64c",label:"Green"},{color:"#4ce699",label:"Aquamarine"},{color:"#4ce6e6",label:"Turquoise"},{color:"#4c99e6",label:"Light Blue"},{color:"#4c4ce6",label:"Blue"},{color:"#994ce6",label:"Purple"}]}}).then((function(i){i.sourceElement.nextElementSibling.classList.add("ck-editor-focus"),e.onPaste&&i.editing.view.document.on("clipboardInput",(function(t,n){if(!i.isReadOnly){var a=n.dataTransfer.getData("text/plain");(a.indexOf("?ST=")>-1||a.indexOf("&ST=")>-1)&&(e.onPaste(a),t.stop())}}),{priority:"high"}),e.onChange&&i.model.document.on("change:data",e.onChange),t(i)})).catch((function(e){i(e)}))};window.CKEditor?r(window.CKEditor):gbapp.requireCKEditor(r)}}))},e.handleServerEvents=function(e){var t=this;e.events.forEach((function(e){switch(e.eventType){case h.EventType.NewMessage:t.addMessageToConversation(e);break;case h.EventType.UpdateConversation:t.handleUpdateConversationEvent(e);break;case h.EventType.MessageStatusUpdate:t.handleMessageStatusUpdateEvent(e);break;case h.EventType.ResolvedRecipientCountUpdate:t.handleResolvedRecipientCountUpdate(e)}}))},e.handleResolvedRecipientCountUpdate=function(e){var t,i,n;null===(t=this.topWindow().SM.editorVM)||void 0===t||t.updateResolvedRecipientCount(e.recipientId,e.requestId,e.count),null===(i=this.topWindow().SM.viewMessageVM)||void 0===i||i.updateResolvedRecipientCount(e.recipientId,e.requestId,e.count),null===(n=this.rootWindow().SM.messageVM)||void 0===n||n.updateResolvedRecipientCount(e.recipientId,e.requestId,e.count)},e.addMessageToConversation=function(e){var t,i=this.SMApp().rootViewModel.conversations().find((function(t){return t.conversationGU()===e.conversationGU}));if(i)i.AddMessage(e),!1===e.isSender&&((null===(t=this.SMApp().rootViewModel.selectedConversation())||void 0===t?void 0:t.conversationGU)===i.conversationGU?m.ConversationService.updateConversationRead(i):i.unreadMessagesCount(i.unreadMessagesCount()+1));else{var n=this.SMApp().rootViewModel.totalUnreadConversationMessages()+1;this.SMApp().rootViewModel.totalUnreadConversationMessages(n)}},e.handleUpdateConversationEvent=function(e){var t=this.SMApp().rootViewModel.conversations().find((function(t){return t.conversationGU()===e.conversationGU}));t?t.Update(e):this.SMApp().rootViewModel.conversations.push(new h.Conversation(e))},e.handleMessageStatusUpdateEvent=function(t){var i=e.getConversation(t.conversationGU);if(i){var n=i.messages().find((function(e){return e.messageGU()===t.messageGU}));n&&(t.serviceStatus&&(n.serviceStatus(t.serviceStatus),n.serviceStatusLastUpdateDateTime(t.serviceStatusLastUpdateDateTime)),t.localStatus&&(n.localStatus(t.localStatus),n.localStatusLastUpdateDateTime(t.localStatusLastUpdateDateTime)))}},e.Base64ToBlob=function(e){for(var t=atob(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return new Blob([i],{type:"audio/mp3"})},e.debounce=function(e,t){var i;return void 0===t&&(t=300),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];clearTimeout(i),i=(0,l.setTimeout)((function(){e.apply(void 0,n)}),t)}},Object.defineProperty(e,"isMobile",{get:function(){return e.SMApp().rootViewModel?e.SMApp().rootViewModel.isMobile:ko.observable(e.isMobileCalculation())},enumerable:!1,configurable:!0}),e.isMobileCalculation=function(){return $(window).width()<=768},e.setUndoSendSeconds=function(t){e.undoSendSeconds=t,e.smUndoSendViewModel&&(e.smUndoSendViewModel.undoSendSeconds=t)},e.showUndoSend=function(t){e.smUndoSendViewModel?e.smUndoSendViewModel.show(t):g.SMUndoSendViewModel.instantiate({undoSendSeconds:e.undoSendSeconds,onInitialized:function(i){e.smUndoSendViewModel=i,e.smUndoSendViewModel.show(t)}})},e.addRecipients=function(t,i,n){var o,r,l;return a(this,void 0,void 0,(function(){var a,d,c,u,p,m,b;return s(this,(function(s){switch(s.label){case 0:return n&&i.length>0?(a=i[0],d=t().find((function(e){return e.id()===a.id()})),(c=ko.dataFor(n.animationBox.children()[0]).recipient()).recipientList(null!==(o=n.animationRecipientListOverride)&&void 0!==o?o:a.recipientList()),c.contactDetails1(null!==(r=n.animationContactDetails1Override)&&void 0!==r?r:a.contactDetails1()),c.contactDetails2(null!==(l=n.animationContactDetails2Override)&&void 0!==l?l:a.contactDetails2()),e.isAnimating&&n.animationBox.stop(!1,!0),e.isAnimating=!0,d?(u=e.$("#to"+a.id().split(",").join("-")),p=n.recipientBox.scrollTop()+u.position().top-5,[4,n.recipientBox.animate({scrollTop:p},100).promise()]):[3,3]):[3,6];case 1:return s.sent(),e.$("body").append(n.animationBox.detach().removeClass("hidden")),n.animationBox.css({left:n.startLeft,position:"absolute",top:n.startTop,"z-index":6e3}),b=u,[4,n.animationBox.animate(b.offset(),500).promise()];case 2:return s.sent(),n.animationBox.addClass("hidden"),e.isAnimating=!1,[3,6];case 3:return n.newRecipientDummy.addClass("invisible").removeClass("hidden"),m=n.recipientBox.prop("scrollHeight"),[4,n.recipientBox.animate({scrollTop:m},100).promise()];case 4:return s.sent(),e.$("body").append(n.animationBox.detach().removeClass("hidden")),n.animationBox.css({left:n.startLeft,position:"absolute",top:n.startTop,"z-index":6e3}),b=n.newRecipientDummy.children(".contact-box"),[4,n.animationBox.animate(b.offset(),500).promise()];case 5:s.sent(),n.newRecipientDummy.addClass("hidden").removeClass("invisible"),n.animationBox.addClass("hidden"),e.isAnimating=!1,s.label=6;case 6:return i.forEach((function(e){var i=t().find((function(t){return t.id()===e.id()}));i?(e.recipientList()!==h.RecipientList.Classes&&e.recipientList()!==h.RecipientList.UserGroups&&e.recipientList()!==h.RecipientList.MassStudentGroups&&e.recipientList()!==h.RecipientList.MassEmail||i.groupUserTypes(i.groupUserTypes()|e.groupUserTypes()),e.loadResolvedRecipientCount()):t.push(e)})),[2]}}))}))},i=e,e.showExperimental=ST.SM_ShowExperimental,e.smDisabled=ST.SM_SMDisabled,e.aiEnabled=ST.SM_AIEnabled,e.userType=ST.UserType,e.meetingAuth=ST.SM_VidConfMeetingAuth,e.contactCategoriesEnabled=ST.SM_ContactCategoriesEnabled,e.defaultContactLogCategory=ST.SM_DefaultContactLogCategory,e.defaultDuration=ST.SM_DefaultDuration,e.vidConfDefaultContactLogCategory=ST.SM_VidConfDefaultContactLogCategory,e.tvueCommunicationDefaultContactCategory=ST.SM_TVUECommunicationDefaultContactCategory,e.auditing=void 0!==ST.SM_AuditGU,e.impersonated=ST.Impersonated||e.auditing,e.vidConfEnabled=ST.VideoConferenceEnabled,e.currentWebPortal=ST.CurrentWebPortal,e.canViewMail=ST.SM_CanViewMail,e.enableForwarding=ST.SM_EnableForwarding,e.revLanguageCodeEnglish=ST.SM_RevLanguageCodeEnglish,e.auditId=ST.SM_AuditGU,e.auditType=ST.SM_AuditType,e.auditName=ST.SM_AuditName,e.staffRecipientAccess=ST.SM_StaffRecipientAccess,e.teacherStudentAccess=ST.SM_TeacherStudentAccess,e.parentRecipientAccess=ST.SM_ParentRecipientAccess,e.studentRecipientAccess=ST.SM_StudentRecipientAccess,e.contactListSecurity=ST.SM_ContactListSecurity,e.staffTabVisible=ST.SM_StaffTabVisible,e.parentsTabVisible=ST.SM_ParentsTabVisible,e.studentsTabVisible=ST.SM_StudentsTabVisible,e.classesTabVisible=ST.SM_ClassesTabVisible,e.userGroupsTabVisible=ST.SM_UserGroupsTabVisible,e.studentGroupsTabVisible=ST.SM_StudentGroupsTabVisible,e.massEmailTabVisible=ST.SM_MassEmailTabVisible,e.contactListsTabVisible=ST.SM_ContactListsTabVisible,e.teachersTabVisible=ST.SM_TeachersTabVisible,e.counselorsTabVisible=ST.SM_CounselorsTabVisible,e.smsTabVisible=ST.SM_SMSTabVisible,e.voiceTabVisible=ST.SM_VoiceTabVisible,e.socialTabVisible=ST.SM_SocialTabVisible,e.jobTitleColumnVisible=ST.SM_JobTitleColumnVisible,e.typeColumnVisible=ST.SM_TypeColumnVisible,e.allowNonStaffRecipients=!0,e.contactLogOption=ST.SM_ContactLogOption,e.vidConfContactLogOption=ST.SM_VidConfContactLogOption,e.showBCC=ST.SM_ShowBCC,e.allowEmailAtDistrict=ST.SM_AllowEmailAtDistrict,e.childName=ST.SM_ChildName,e.autoSaveTimeout=5e3,e.checkUnreadMessagesTimeout=null!==(t=ST.SM_CheckUnreadMessagesTimeout)&&void 0!==t?t:6e4,e.networkTimeout=3e4,e.maxAttachmentSizeMB=ST.SM_MaxAttachmentSizeMB,e.networkDelay=0,e.translation=new f.Translation,e.unreadMessageCount=0,e.internalCompose=!1,e.selectAddressesVM=null,e.composeVM=null,e.editorVM=null,e.blockedExtensions=ST.SM_BlockedExtensions,e.conversation=null,e.isSynergyMessageEnabled=ST.SM_SynergyMessageEnabled,e.useNewTVUECommunication=ST.SM_UseNewTVUECommunication,e.enableShowAdvanced=ST.SM_EnableShowAdvanced,e.translationEnabled=ST.SM_TranslationEnabled,e.isTeacher=ST.SM_IsTeacher,e.isAuditAdmin=ST.SM_IsAuditAdmin,e.viewMessageVM=null,e.messageVM=null,e.configuration=new v.Configuration(ST.SM_SynergyMailUIConfiguration),e.undoSendSeconds=10,e.STAFF_SNAPSHOT_VIEW_ID="7D1F0C53-308D-4A8B-9201-8B21342ECEB9",e.PARENT_SNAPSHOT_VIEW_ID="9A9FD15C-658C-4EE9-A765-6A3DD2875D3E",e.STUDENT_SNAPSHOT_VIEW_ID="26D81CC4-A262-4B64-B7DC-F79C67D164BE",e.CLASS_SNAPSHOT_VIEW_ID="36CF7E1E-3813-4AC2-8B51-B66C432F1B78",e.editorConfig={removePlugins:["widget","clipboard","oembed","pastetools","pastefromword","pastefromgdocs","pastefromlibreoffice","pastetext","tableselection","uploadwidget","uploadimage","exportpdf","a11yhelp","about","flash","iframe","language","smiley"].join(","),disableNativeSpellChecker:!1,toolbar:[["Bold","Italic","Underline","Strike"],["Undo","Redo"],["Font","FontSize"],["TextColor","BGColor","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","-","Outdent","Indent"],["Table","HorizontalRule","SpecialChar","-","Link","Unlink"]]},e.getConversation=function(e){return i.SMApp().rootViewModel.conversations().find((function(t){return t.conversationGU()===e}))},e.isAnimating=!1,e}();t.SM=M},4134:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translation=void 0;var n=i(1032),a=function(){function e(){this.actions=n.observable(ST.Translations.Mail_Actions),this.addAll=n.observable(ST.Translations.Mail_AddAll),this.addAttachment=n.observable(ST.Translations.Mail_AddAttachment),this.addRecipients=n.observable(ST.Translations.Mail_AddRecipients),this.addressTo=n.observable(ST.Translations.Mail_AddressTo),this.addToCalendar=n.observable(ST.Translations.Mail_AddToCalendar),this.archive=n.observable(ST.Translations.Mail_Archive),this.archiveAll=n.observable(ST.Translations.Mail_ArchiveAll),this.attachmentExtensionBlocked=n.observable(ST.Translations.Mail_AttachmentExtensionBlocked),this.attachments=n.observable(ST.Translations.Mail_Attachments),this.attachmentTooLarge=n.observable(ST.Translations.Mail_AttachmentTooLarge),this.attachmentsUploading=n.observable(ST.Translations.Mail_AttachmentsUploading),this.attachmentsUploadingWaitOrCancel=n.observable(ST.Translations.Mail_AttachmentsUploadingWaitOrCancel),this.autosavedAt=n.observable(ST.Translations.Mail_AutosavedAt),this.autosaving=n.observable(ST.Translations.Mail_Autosaving),this.back=n.observable(ST.Translations.Mail_Back),this.bcc=n.observable(ST.Translations.Mail_BCC),this.bccSender=n.observable(ST.Translations.Mail_BCCSender),this.blankSubjectAndBodyText=n.observable(ST.Translations.Mail_BlankSubjectAndBodyText),this.blankSubjectAndBodyTitle=n.observable(ST.Translations.Mail_BlankSubjectAndBodyTitle),this.blankSubjectText=n.observable(ST.Translations.Mail_BlankSubjectText),this.blankSubjectTitle=n.observable(ST.Translations.Mail_BlankSubjectTitle),this.cancel=n.observable(ST.Translations.Mail_Cancel),this.cc=n.observable(ST.Translations.Mail_CC),this.classes=n.observable(ST.Translations.Mail_Classes),this.close=n.observable(ST.Translations.Mail_Close),this.compose=n.observable(ST.Translations.Mail_Compose),this.contacts=n.observable(ST.Translations.Mail_Contacts),this.contactCategory=n.observable(ST.Translations.Mail_ContactCategory),this.contactGroup=n.observable(ST.Translations.Mail_ContactGroup),this.contactGroups=n.observable(ST.Translations.Mail_ContactGroups),this.counselor=n.observable(ST.Translations.Mail_Counselor),this.course=n.observable(ST.Translations.Mail_Course),this.courseId=n.observable(ST.Translations.Mail_CourseID),this.date=n.observable(ST.Translations.Mail_Date),this.delete=n.observable(ST.Translations.Mail_Delete),this.deleteAll=n.observable(ST.Translations.Mail_DeleteAll),this.deleteAllMessagesText=n.observable(ST.Translations.Mail_DeleteAllMessagesText),this.deleteAllMessagesTitle=n.observable(ST.Translations.Mail_DeleteAllMessagesTitle),this.deleteContactGroup=n.observable(ST.Translations.Mail_DeleteContactGroup),this.deleteContactGroupText=n.observable(ST.Translations.Mail_DeleteContactGroupText),this.deleteFolder=n.observable(ST.Translations.Mail_DeleteFolder),this.deleteFolderText=n.observable(ST.Translations.Mail_DeleteFolderText),this.deleteFolderTitle=n.observable(ST.Translations.Mail_DeleteFolderTitle),this.deleteMessagesText=n.observable(ST.Translations.Mail_DeleteMessagesText),this.deleteMessagesTitle=n.observable(ST.Translations.Mail_DeleteMessagesTitle),this.description=n.observable(ST.Translations.Mail_Description),this.discard=n.observable(ST.Translations.Mail_Discard),this.discardMessageText=n.observable(ST.Translations.Mail_DiscardMessageText),this.discardMessageTitle=n.observable(ST.Translations.Mail_DiscardMessageTitle),this.district=n.observable(ST.Translations.Mail_District),this.drafts=n.observable(ST.Translations.Mail_Drafts),this.dragDropInfo=n.observable(ST.Translations.Mail_DragDropInfo),this.duration=n.observable(ST.Translations.Mail_Duration),this.edit=n.observable(ST.Translations.Mail_Edit),this.editable=n.observable(ST.Translations.Mail_Editable),this.editableByStaff=n.observable(ST.Translations.Mail_EditableByStaff),this.editContactGroup=n.observable(ST.Translations.Mail_EditContactGroup),this.editFolder=n.observable(ST.Translations.Mail_EditFolder),this.editSignatures=n.observable(ST.Translations.Mail_EditSignatures),this.enableForwarding=n.observable(ST.Translations.Mail_EnableForwarding),this.endTime=n.observable(ST.Translations.Mail_EndTime),this.enterFolderName=n.observable(ST.Translations.Mail_EnterFolderName),this.enterValidFolderName=n.observable(ST.Translations.Mail_EnterValidFolderName),this.errorOccurredText=n.observable(ST.Translations.Mail_ErrorOccurredText),this.errorOccurredTitle=n.observable(ST.Translations.Mail_ErrorOccurredTitle),this.folders=n.observable(ST.Translations.Mail_Folders),this.forward=n.observable(ST.Translations.Mail_Forward),this.from=n.observable(ST.Translations.Mail_From),this.grade=n.observable(ST.Translations.Mail_Grade),this.grades=n.observable(ST.Translations.Mail_Grades),this.group=n.observable(ST.Translations.Mail_Group),this.groupName=n.observable(ST.Translations.Mail_GroupName),this.groups=n.observable(ST.Translations.Mail_Groups),this.hideDeletedMessages=n.observable(ST.Translations.Mail_HideDeletedMessages),this.hideDetails=n.observable(ST.Translations.Mail_HideDetails),this.hideOriginalText=n.observable(ST.Translations.Mail_HideOriginalText),this.inbox=n.observable(ST.Translations.Mail_Inbox),this.individualRecipients=n.observable(ST.Translations.Mail_IndividualRecipients),this.jobTitle=n.observable(ST.Translations.Mail_JobTitle),this.joinMeeting=n.observable(ST.Translations.Mail_JoinMeeting),this.loading=n.observable(ST.Translations.Mail_Loading),this.loadingTranslation=n.observable(ST.Translations.Mail_LoadingTranslation),this.markAllRead=n.observable(ST.Translations.Mail_MarkAllRead),this.markAllUnread=n.observable(ST.Translations.Mail_MarkAllUnread),this.markAsRead=n.observable(ST.Translations.Mail_MarkAsRead),this.markAsUnread=n.observable(ST.Translations.Mail_MarkAsUnread),this.massEmail=n.observable(ST.Translations.Mail_MassEmail),this.meeting=n.observable(ST.Translations.Mail_Meeting),this.meetingStartDate=n.observable(ST.Translations.Mail_MeetingStartDate),this.meetingStartDateInPast=n.observable(ST.Translations.Mail_MeetingStartDateInPast),this.meetingStartDateInvalid=n.observable(ST.Translations.Mail_MeetingStartDateInvalid),this.meetingStartDateInvalidConfirm=n.observable(ST.Translations.Mail_MeetingStartDateInvalidConfirm),this.message=n.observable(ST.Translations.Mail_Message),this.messageContent=n.observable(ST.Translations.Mail_MessageContent),this.messages=n.observable(ST.Translations.Mail_Messages),this.messageTranslatedFrom=n.observable(ST.Translations.Mail_MessageTranslatedFrom),this.more=n.observable(ST.Translations.Mail_More),this.moreActions=n.observable(ST.Translations.Mail_MoreActions),this.move=n.observable(ST.Translations.Mail_Move),this.moveToFolder=n.observable(ST.Translations.Mail_MoveToFolder),this.mustSelectGrade=n.observable(ST.Translations.Mail_MustSelectGrade),this.mustSelectRecipient=n.observable(ST.Translations.Mail_MustSelectRecipient),this.myCounselor=n.observable(ST.Translations.Mail_MyCounselor),this.myGroups=n.observable(ST.Translations.Mail_MyGroups),this.myTeachers=n.observable(ST.Translations.Mail_MyTeachers),this.name=n.observable(ST.Translations.Mail_Name),this.newContactGroup=n.observable(ST.Translations.Mail_NewContactGroup),this.newFolder=n.observable(ST.Translations.Mail_NewFolder),this.newMessage=n.observable(ST.Translations.Mail_NewMessage),this.newMessages=n.observable(ST.Translations.Mail_NewMessages),this.nextMessage=n.observable(ST.Translations.Mail_NextMessage),this.no=n.observable(ST.Translations.Mail_No),this.noMessages=n.observable(ST.Translations.Mail_NoMessages),this.noRecipientsText=n.observable(ST.Translations.Mail_NoRecipientsText),this.noRecipientsTitle=n.observable(ST.Translations.Mail_NoRecipientsTitle),this.noRepliesAllowed=n.observable(ST.Translations.Mail_NoRepliesAllowed),this.noReply=n.observable(ST.Translations.Mail_NoReply),this.now=n.observable(ST.Translations.Mail_Now),this.ok=n.observable(ST.Translations.Mail_Ok),this.originalMessage=n.observable(ST.Translations.Mail_OriginalMessage),this.outbox=n.observable(ST.Translations.Mail_Outbox),this.parent=n.observable(ST.Translations.Mail_Parent),this.parentOf=n.observable(ST.Translations.Mail_ParentOf),this.parents=n.observable(ST.Translations.Mail_Parents),this.period=n.observable(ST.Translations.Mail_Period),this.previousMessage=n.observable(ST.Translations.Mail_PreviousMessage),this.public=n.observable(ST.Translations.Mail_Public),this.read=n.observable(ST.Translations.Mail_Read),this.readCountExplanation=n.observable(ST.Translations.Mail_ReadCountExplanation),this.readStatus=n.observable(ST.Translations.Mail_ReadStatus),this.recipientCountWarningText=n.observable(ST.Translations.Mail_RecipientCountWarningText),this.recipientCountWarningTitle=n.observable(ST.Translations.Mail_RecipientCountWarningTitle),this.recurrence=n.observable(ST.Translations.Mail_Recurrence),this.removeRecipient=n.observable(ST.Translations.Mail_RemoveRecipient),this.removeAllRecipients=n.observable(ST.Translations.Mail_RemoveAllRecipients),this.removeAllRecipientsText=n.observable(ST.Translations.Mail_RemoveAllRecipientsText),this.removeAllRecipientsTitle=n.observable(ST.Translations.Mail_RemoveAllRecipientsTitle),this.repliesForwards=n.observable(ST.Translations.Mail_RepliesForwards),this.reply=n.observable(ST.Translations.Mail_Reply),this.replyAll=n.observable(ST.Translations.Mail_ReplyAll),this.responseActions=n.observable(ST.Translations.Mail_ResponseActions),this.room=n.observable(ST.Translations.Mail_Room),this.save=n.observable(ST.Translations.Mail_Save),this.saveAsDraft=n.observable(ST.Translations.Mail_SaveAsDraft),this.school=n.observable(ST.Translations.Mail_School),this.search=n.observable(ST.Translations.Mail_Search),this.sectionId=n.observable(ST.Translations.Mail_SectionID),this.selectFromList=n.observable(ST.Translations.Mail_SelectFromList),this.send=n.observable(ST.Translations.Mail_Send),this.senderDisabledTranslation=n.observable(ST.Translations.Mail_SenderDisabledTranslation),this.sendEmailCheckedAndEmptyText=n.observable(ST.Translations.Mail_SendEmailCheckedAndEmptyText),this.sendEmailCheckedAndEmptyTitle=n.observable(ST.Translations.Mail_SendEmailCheckedAndEmptyTitle),this.sendSMSCheckedAndEmptyText=n.observable(ST.Translations.Mail_SendSMSCheckedAndEmptyText),this.sendSMSCheckedAndEmptyTitle=n.observable(ST.Translations.Mail_SendSMSCheckedAndEmptyTitle),this.sendVoiceCheckedAndEmptyText=n.observable(ST.Translations.Mail_SendVoiceCheckedAndEmptyText),this.sendVoiceCheckedAndEmptyTitle=n.observable(ST.Translations.Mail_SendVoiceCheckedAndEmptyTitle),this.sendEmailUncheckedAndFilledText=n.observable(ST.Translations.Mail_SendEmailUncheckedAndFilledText),this.sendEmailUncheckedAndFilledTitle=n.observable(ST.Translations.Mail_SendEmailUncheckedAndFilledTitle),this.sendSMSUncheckedAndFilledText=n.observable(ST.Translations.Mail_SendSMSUncheckedAndFilledText),this.sendSMSUncheckedAndFilledTitle=n.observable(ST.Translations.Mail_SendSMSUncheckedAndFilledTitle),this.sendVoiceUncheckedAndFilledText=n.observable(ST.Translations.Mail_SendVoiceUncheckedAndFilledText),this.sendVoiceUncheckedAndFilledTitle=n.observable(ST.Translations.Mail_SendVoiceUncheckedAndFilledTitle),this.sent=n.observable(ST.Translations.Mail_Sent),this.settings=n.observable(ST.Translations.Mail_Settings),this.shouldTranslate=n.observable(ST.Translations.Mail_ShouldTranslate),this.showDeletedMessages=n.observable(ST.Translations.Mail_ShowDeletedMessages),this.showDetails=n.observable(ST.Translations.Mail_ShowDetails),this.showOriginalText=n.observable(ST.Translations.Mail_ShowOriginalText),this.staff=n.observable(ST.Translations.Mail_Staff),this.staffAllGrades=n.observable(ST.Translations.Mail_StaffAllGrades),this.startTime=n.observable(ST.Translations.Mail_StartTime),this.status=n.observable(ST.Translations.Mail_Status),this.student=n.observable(ST.Translations.Mail_Student),this.studentGroups=n.observable(ST.Translations.Mail_StudentGroups),this.students=n.observable(ST.Translations.Mail_Students),this.subject=n.observable(ST.Translations.Mail_Subject),this.synergyMailEnabled=n.observable(ST.Translations.Mail_SynergyMailEnabled),this.systemMessages=n.observable(ST.Translations.Mail_SystemMessages),this.term=n.observable(ST.Translations.Mail_Term),this.teacher=n.observable(ST.Translations.Mail_Teacher),this.teachers=n.observable(ST.Translations.Mail_Teachers),this.to=n.observable(ST.Translations.Mail_To),this.topic=n.observable(ST.Translations.Mail_Topic),this.trash=n.observable(ST.Translations.Mail_Trash),this.type=n.observable(ST.Translations.Mail_Type),this.unableToAddAttachment=n.observable(ST.Translations.Mail_UnableToAddAttachment),this.unableToCompose=n.observable(ST.Translations.Mail_UnableToCompose),this.unableToComposeWhileComposing=n.observable(ST.Translations.Mail_UnableToComposeWhileComposing),this.unableToComposeWhileImpersonated=n.observable(ST.Translations.Mail_UnableToComposeWhileImpersonated),this.unableToDeleteFolderText=n.observable(ST.Translations.Mail_UnableToDeleteFolderText),this.unableToDeleteFolderTitle=n.observable(ST.Translations.Mail_UnableToDeleteFolderTitle),this.unassigned=n.observable(ST.Translations.Mail_Unassigned),this.undelete=n.observable(ST.Translations.Mail_Undelete),this.undoSendSeconds=n.observable(ST.Translations.Mail_UndoSendSeconds),this.unread=n.observable(ST.Translations.Mail_Unread),this.unreadMessages=n.observable(ST.Translations.Mail_UnreadMessages),this.updateContactLog=n.observable(ST.Translations.Mail_UpdateContactLog),this.uploading=n.observable(ST.Translations.Mail_Uploading),this.userGroup=n.observable(ST.Translations.Mail_UserGroup),this.userGroups=n.observable(ST.Translations.Mail_UserGroups),this.users=n.observable(ST.Translations.Mail_Users),this.viewMessage=n.observable(ST.Translations.Mail_ViewMessage),this.waitingToLoadTranslation=n.observable(ST.Translations.Mail_WaitingToLoadTranslation),this.yes=n.observable(ST.Translations.Mail_Yes),this.openSurvey=n.observable(ST.Translations.Mail_OpenSurvey)}return e.prototype.format=function(e,t){for(var i=e,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];i=i.split("@@".concat(s,"@@")).join(t[s])}return i},e}();t.Translation=a},3926:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this;Object.defineProperty(t,"__esModule",{value:!0}),t.SMApp=void 0;var o=i(9061),r=i(5513),l=i(4780),d=i(3946),c=i(8420),u=i(2372),p=i(2958),h=i(6086),m=i(6326),b=i(7279),f=i(5956),g=i(114),v=i(6623),S=i(7449),M=i(340),y=i(7940),T=i(1953),w=i(1822),x=i(6197),A=i(9568),R=i(3658),C=i(2999),D=i(6438);i(5082);var _=i(6853),O=i(3720),k=i(8076),E=i(2617),G=i(9079),P=i(2355),F=i(9204),I=i(7754),U=i(8108),L=function(){function e(){this.rootViewModel=null,this.registerComponents()}return e.prototype.checkForNewMessages=function(){"visible"===document.visibilityState&&O.MessageService.getUnreadMessageCount().then((function(e){e.successful&&(E.SM.SMApp().rootViewModel&&E.SM.rootWindow()?E.SM.SMApp().rootViewModel.refreshInbox(e.data):E.SM.updateUnreadMessagesBadge(e.data))})).catch((function(e){console.error(e.error)}))},e.prototype.startRoot=function(){ko.applyBindings(null,$(".message-list")[0])},e.prototype.composeAdvanced=function(e){var t=this;E.SM.currentWebPortal===_.CurrentWebPortal.TeacherVUE&&E.SM.useNewTVUECommunication&&E.SM.configuration.showCompose&&E.SM.isTeacher&&1===e.to.length&&e.to[0].recipientList()===_.RecipientList.Students&&(e.studentGU=e.to[0].id(),e.to=[]),e.actionRecipientList===_.RecipientList.Students?k.SMDialog.showDialog({message:"Who would you like to address this message to?",onDismissed:function(i){if("Students"===i)t.loadRecipients(e);else if("Parents"===i||"Both"===i){var n=e.to.concat(e.cc).concat(e.bcc).map((function(e){return e.id()}));O.RecipientService.getRecipients({recipientList:_.RecipientList.Parents,studentIds:n}).then((function(n){var a=_.Recipient.loadRecipients(n);e.bcc="Parents"===i?a:e.bcc.concat(a),t.loadRecipients(e)}))}},rightButtons:[{label:"Students",value:"Students",css:"btn btn-primary"},{label:"Parents",value:"Parents",css:"btn btn-primary"},{label:"Both",value:"Both",css:"btn btn-primary"},{label:"Cancel",value:"Cancel",css:"btn btn-secondary"}],title:"Compose From Action Results",type:u.SMDialogType.Message}):this.loadRecipients(e)},e.prototype.loadRecipients=function(e){var t=this,i=e.to.map((function(e){return e.getData()})),n=e.cc?e.cc.map((function(e){return e.getData()})):null,a=e.bcc?e.bcc.map((function(e){return e.getData()})):null,s=i.concat(n).concat(a).filter((function(e){return!(null==e?void 0:e.emails)||0===e.emails.length})).length>0;E.SM.configuration.composeAction===_.ComposeAction.Compose&&!e.studentGU||s?O.RecipientService.getRecipientAddressing(i,n,a).then((function(i){t.loadAttachmentsAndCompose(e,i)})):this.loadAttachmentsAndCompose(e,new _.RecipientAddressing({to:i,cc:n,bcc:a}))},e.prototype.loadAttachmentsAndCompose=function(e,t){var i=this;n(this,void 0,void 0,(function(){var n,s;return a(this,(function(a){switch(a.label){case 0:return[4,O.MiscService.getAttachmentsFromLinks(e.links)];case 1:return n=a.sent()||[],[4,O.MiscService.getAttachmentsFromQueryXml(e.attachQueryXml)];case 2:return s=a.sent(),n=n.concat(s),i.startComposeInternal(e,t.to(),t.cc(),t.bcc(),n),[2]}}))}))},e.prototype.compose=function(e,t,i,n,a,s){this.composeAdvanced({to:[new _.Recipient({id:t,recipientList:e,organizationYearId:i})],subject:n,messageText:a,isMeeting:!1,allowNonStaffRecipients:s})},e.prototype.composeEx=function(e){this.composeAdvanced({to:e.to?_.Recipient.loadRecipients(e.to):[],cc:e.cc?_.Recipient.loadRecipients(e.cc):[],bcc:e.bcc?_.Recipient.loadRecipients(e.bcc):[],subject:e.subject,messageText:e.messageText,isCommunication:e.isCommunication,isUrgent:e.isUrgent,allowSMS:e.allowSMS,allowVoice:e.allowVoice,allowSocial:e.allowSocial,actionRecipientList:e.actionRecipientList,scTemplateGU:e.scTemplateGU,isEditingTemplate:e.isEditingTemplate,templateOrgGU:e.templateOrgGU,isMeeting:e.isMeeting,meetingStartDate:new Date(e.meetingStartDate),meetingEndDate:new Date(e.meetingEndDate),surveyGU:e.surveyGU,suppressUi:e.suppressUi,onSend:e.onSend,links:e.links,attachQueryXml:e.attachQueryXml,allowNonStaffRecipients:e.allowNonStaffRecipients,studentGU:e.studentGU,isIntegratedAction:e.isIntegratedAction,defaultCommunicationType:e.defaultCommunicationType})},e.prototype.editDraft=function(e,t,i){O.MessageService.getMessage(e,!1,E.SM.languageCode(),!1).then((function(n){n.isMeeting()?O.MessageService.createMessage(_.CreateMessageType.MeetingUpdate,e,E.SM.languageCode()).then((function(e){E.SM.topWindow().SM.compose({editorType:f.SMEditorType.EditDraft},e,!1,t)})):E.SM.topWindow().SM.compose({editorType:f.SMEditorType.EditDraft,showComposeDialog:i},n,!1,t)}))},e.prototype.viewMessageFromAction=function(e){O.MessageService.getViewMessage(e).then((function(e){D.SMViewMessageViewModel.instantiate({allowActions:!1,onInitialized:function(t){t.show(e)}})}))},e.prototype.viewMessage=function(e){var t=!E.SM.impersonated;O.MessageService.getMessage(e.id,t,E.SM.languageCode(),e.isSystemMessage).then((function(t){e.noReply&&t.noReply(!0),D.SMViewMessageViewModel.instantiate({allowActions:e.allowActions,onInitialized:function(e){e.show(t)},onDelete:e.onDelete,onSMTPReply:e.onSMTPReply})}))},e.prototype.showTemplateDropDown=function(e){null===E.SM||void 0===E.SM||E.SM.editorVM.showTemplateDropDown(e)},e.prototype.showTokenDropDown=function(e,t){$("#tokenPopover"+t.name)[0]||C.SMTokenPopoverViewModel.instantiate({button:e,editor:t})},e.prototype.startComposeInternal=function(e,t,i,n,a){if(E.SM.impersonated)k.SMDialog.showMessage(k.SMDialogButtons.Ok,E.SM.translation.unableToCompose(),E.SM.translation.unableToComposeWhileImpersonated());else if(e.editorType=f.SMEditorType.New,e.isCommunication&&e.isEditingTemplate&&(e.onSend=function(){var e=$("#PrimaryView").viewData();e&&e.Refresh()}),e.scTemplateGU)O.TemplateService.getTemplate(e.scTemplateGU).then((function(a){var s=new _.Message;t&&s.to(t.slice(0)),i&&s.cc(i.slice(0)),n&&s.bcc(n.slice(0)),s.subject(a.emailSubject()),s.messageText(a.emailBody()),s.smsMessage(a.smsMessage()),s.voiceText(a.voiceText()),s.attachments(a.attachments()),s.voiceType(a.voiceType()),E.SM.topWindow().SM.compose(e,s,a)}));else{var s=new _.Message;t&&s.to(t.slice(0)),i&&s.cc(i.slice(0)),n&&s.bcc(n.slice(0)),s.subject(e.subject),s.messageText(e.messageText),s.isMeeting(e.isMeeting),s.meetingStartDate(e.meetingStartDate),s.meetingEndDate(e.meetingEndDate),s.surveyGU(e.surveyGU),s.attachments(a),s.isUrgent(e.isUrgent),E.SM.topWindow().SM.compose(e,s)}},e.prototype.registerComponents=function(){window.RecipientList=_.RecipientList,window.GroupUserType=_.GroupUserType,window.FolderType=_.FolderType,window.CommunicationType=_.CommunicationType,window.UserType=_.UserType,window.SMDialogType=u.SMDialogType,window.AttachmentStatus=_.AttachmentStatus,window.StaffRecipientAccess=_.StaffRecipientAccess,window.TeacherStudentAccess=_.TeacherStudentAccess,window.ParentRecipientAccess=_.ParentRecipientAccess,window.StudentRecipientAccess=_.StudentRecipientAccess,window.ContactListSecurity=_.ContactListSecurity,window.ContactLogOption=_.ContactLogOption,window.SMEditorType=f.SMEditorType,window.RecipientBoxBadgeType=_.RecipientBoxBadgeType,window.SM=E.SM,ko.bindingHandlers.modal={init:function(e,t){$(e).modal({backdrop:"static",keyboard:!0,show:!1});var i=t();$(e).on("show.bs.modal",(function(){i()||i(!0)})),$(e).on("hide.bs.modal",(function(){i()&&i(!1)}))},update:function(e,t){var i=t();ko.utils.unwrapObservable(i)?$(e).is(":visible")||$(e).modal("show"):$(e).is(":visible")&&$(e).modal("hide")}},ko.bindingHandlers.smTooltip={init:function(e,t){var i=ko.utils.unwrapObservable(t()),n={};ko.utils.extend(n,ko.bindingHandlers.smTooltip.options),ko.utils.extend(n,i),$(e).tooltip(n),ko.utils.domNodeDisposal.addDisposeCallback(e,(function(){$(e).tooltip("destroy")}))},update:function(e,t){$(e).tooltip("destroy");var i=ko.utils.unwrapObservable(t()),n={};ko.utils.extend(n,ko.bindingHandlers.smTooltip.options),ko.utils.extend(n,i),$(e).tooltip(n)},options:{trigger:"hover",placement:"auto",delay:{show:1e3}}},this.registerComponent("sm-root",w.SMRootComponent),this.registerComponent("sm-compose",d.SMComposeComponent),this.registerComponent("sm-recipient-list-edit",M.SMRecipientListEditComponent),this.registerComponent("sm-add-recipient",o.SMAddRecipientComponent),this.registerComponent("sm-recipient-box",S.SMRecipientBoxComponent),this.registerComponent("sm-recipient-search",y.SMRecipientSearchComponent),this.registerComponent("sm-dialog",u.SMDialogComponent),this.registerComponent("sm-schedule-send",x.SMScheduleSendComponent),this.registerComponent("sm-edit-folder",h.SMEditFolderComponent),this.registerComponent("sm-edit-signature",m.SMEditSignatureComponent),this.registerComponent("sm-edit-template",b.SMEditTemplateComponent),this.registerComponent("sm-token-popover",C.SMTokenPopoverComponent),this.registerComponent("sm-read-status",v.SMReadStatusComponent),this.registerComponent("sm-settings",R.SMSettingsComponent),this.registerComponent("sm-recurrence",T.SMRecurrenceComponent),this.registerComponent("sm-edit-contact-group",p.SMEditContactGroupComponent),this.registerComponent("sm-message",g.SMMessageComponent),this.registerComponent("sm-view-message",D.SMViewMessageComponent),this.registerComponent("sm-printable-message",F.SMPrintableMessageComponent),this.registerComponent("sm-audit-report",l.SMAuditReportComponent),this.registerComponent("sm-select-addresses",A.SMSelectAddressesComponent),this.registerComponent("sm-editor",f.SMEditorComponent),this.registerComponent("sm-undo-send",P.SMUndoSendComponent),this.registerComponent("sm-audio-recorder",r.SMAudioRecorderComponent),this.registerComponent("sm-conversation",c.SMConversationComponent),this.registerComponent("sm-audio-player",G.SMAudioPlayerComponent),this.registerComponent("sm-resolved-recipient-list",I.SMResolvedRecipientListComponent),this.registerComponent("sm-quick-add-recipient",U.SMQuickAddRecipientComponent)},e.prototype.registerComponent=function(e,t){ko.components.isRegistered(e)||ko.components.register(e,t)},e}();t.SMApp=L,window.SMApp=new L,$((function(){var e,t;if(E.SM.rootWindow()&&(null===(t=$(null===(e=E.SM.rootWindow().document.body)||void 0===e?void 0:e.parentElement))||void 0===t||t.removeClass("within-iframe")),E.SM.impersonated||E.SM.topWindow()!==window||setInterval(E.SM.SMApp().checkForNewMessages.bind(s),E.SM.checkUnreadMessagesTimeout),window.STView){ST.LoadTemplates();var i=$('<div id="PrimaryView" class="REV_VIEW hidden"></div>').appendTo("body");E.SM.stView=new STView($("<REV_VIEW></REV_VIEW>")[0],i[0])}}))},1334:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n="data:image/gif;base64,R0lGODlhFAAUAOMAAMzOzNzq7OT6/NTe3Nzy9MzS1Nzu7OT+/NTi5MzMzAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAJACwAAAAAFAAUAAAEdzBJCYYR5wgzwPzSgGVkJgygFJREEBBlAK4Z4k0AMsqhWaSSwggFwAh+wKCpUkt+EBlL5uZMADKXA6H6MWgyPG6CBharTFpzwruZiq8HTpMLPXSMyKRQ4xn49EMTNAI2Hzk7MyUGLgQjB2EfIiUlJ04VWRocVBIRACH5BAkKABgALAAAAAAUABQAhARChJyuxNTe3FR6pMz+/DxmlMTGxBxSjAxKjNzq7Nzy9MzOzAxGhHSOrOT6/ARGhIzG/NTi5ERunMTGzNzu7MzS1ISatOT+/MzMzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWMICaKi0A5F3BI1jS+ooBeNGCrASwmNK0kg8ID8CAkYDxaZPGaNCC0Y4zmqOhElZkAs0BVr6MKtaQEvyI0E41pJtFOF0X7RbnMpHNMMprfUeN9GHUOdRdsbQtvAmVzaBcCXXZWZll2TIuSYJWPI0kOSy8LEXdIPRcUCQkKMxd4LzKmpg5bYCVwdhSQMCEAIfkECQoAHAAsAAAAABQAFACEBEKErLbEPHq8nN78PGaU1N7c3PL0FFKMxMbEdI6szM7MDEqE3OrsDEaEVHqk5Pr8zMrMhJq0BEaERG6c1OLkHFKMxMbMzNLU3O7sVH6k5P78hJ60zMzMAAAAAAAAAAAABZMgJ4pKgT0aUE2RNb5igWo0YAPHBosMTRsMB0Fyc0BePRpF8bIkGjbHqEB7XHaiQMUW4ShQVuwosMAhqBqK+JUQDEw05pqEOmkM8xdGM2PkR0k0fn8cSSh4hHsPexpycwo0GGhqeRQ0BV98V2sXYExoYVidl4BVSy8KFH0wgRoYDAwGMxqDMDI+uHwFayV2fJKOIiEAIfkECQoAHgAsAAAAABQAFACEBEKEbKbkvOb0VHqkPGaUrLbE3PL0FFKMxMbE1N7cdI6szM7MDEqE3OrsDEaERG6c5Pr8zMrMhJq0BEaEjM78VH6kPGqUHFKMxMbM1OLkzNLU3O7s5P78hJ60zMzMAAAABZagJ4pLskEccD0SNr5ignI0YANHB4sNTRuNAWFyG0RePVpm8cIoHLbBKEGDaHaiwsUm8SxQVuyowMAhqJyM+KXgbmjMtQgDfaAM8hcBR2vkRwM2fX8igQB3hB4CFAFvHHFyXxwbaGp5GTQJkmFrGlVMaJw7GjMJI0kQSy8LGTN+SD6TDQ0GMxyvMDKxsRCmYiUnVZSQIiEAIfkECQoAHwAsAAAAABQAFACEBEKEjLLU1N7cRILEPGaUxMbE3PL0FFKMdI6szM7MDEqE3Ors3Pr8DEaErLbEVHqkRG6czMrMhJq05Pr8BEaE1OLkPGqUxMbMHFKMzNLU3O7srLrEVH6khJ605P78zMzMBZvgJ4qJoE0egEHSNb6igHo0YANHB4sLTRuLB4Fye0RePVol8bogGrbHSECbZHYiB8Ym+SRQVuzIocAVqJ6K+IXgamjMtegChaAM8hcBR1vkRw82fX8igQB3hB97B28ecXJ0ABBoanltABJfHmFrG2UHBR9onDsZDAOYI0kTSy8JFTMBMEk0GgsLBjMefjsyPr+bAmslJ1UaAo8iIQAh+QQJCgAeACwAAAAAFAAUAIQEQoR8uvw8ery86uw8ZpTc8vSstsQUUox0jqzExsTU3tzMzswMSoTc6uwMRoRUeqREbpzk+vyEmrTMyswERoQ8apQcUozExszU4uTM0tTc7uxUfqTk/vyEnrTMzMwAAAAFmKAniouiRRxgQdI1vqKCcjRgA0cHiw1NF40HgXJ7TF49GmbxuiActsdIQYtkdiKDxSbxLFBW7MjAwCWoHIz4heBqaMy16AKFoAryFwFHa+RHDzZ9fyKBAHeEHnsHbxxxcnQAEGhqeW0AEl8cYWtkZh5onDtaXCNJEUtNCGUAUkg+HBoNDRoCRQk7MrA0AThdYiUnVQMSuC8hACH5BAkKAB4ALAAAAAAUABQAhARChHy+/FR6pNTe3DxmlMT+/Ky2xBRSjHSOrMTGxMzOzAxKhNzq7Nzy9ISatAxGhERunMzKzOT6/ARGhFR+pNTi5DxqlBxSjGyWxMTGzMzS1Nzu7ISetOT+/MzMzAAAAAWaoCeKyrBJHXBBTja+4oB2NGADBweLDE03DAFhchNEXj1aRfHKIB42wWhAk2h2IsPF5vAoUFbsyLDAJaidiviF4G5ozLUoA4WgGvIXAUdj5EcCNn1/IoEAd4QeewdvHXFydAAQaGp5bQAOXx1ha2RmHmicO1pcI0kSS00IZQBSSD4FBAICFlBRCTsyHQE3NwddYiUYF0QHLLgvIQAh+QQJCgAfACwAAAAAFAAUAIQEQoSstsRUeqSs6vwsYpzU3twUUoykzuzc8vTExsQMSoR0jqzMzswMRoQ8ZpTc6uwERoTk+vzMysyEmrREbpxUfqTU4uQcUozExszM0tQ8apTc7uwERozk/vyEnrTMzMwFoOAnikyxRR1wURM2vmKBdjRgA4YHiw9NIw+BA3ITSF49moXxwiwaNsGoQItkdqLAxTb5MFBW7CigwCWoHYv4teBuaMy1CAOloBDylwNHe+RHAjZ9fyKBAHeEH3sGbx1xcnQAFGhqeW0AE18dYWtkZh9UAwQBYlpcIwccAAoLLiMJC2UAUiMShgANGgJCRFEJOxMGN8M4XWIJExTCOCy/LyEAIfkECQoAHgAsAAAAABQAFACEBEKEfLb0VHqk1N7cPGaUrLbEdI6s3PL0FFKMxMbEzM7MDEqETI7U3OrsDEaERG6chJq05Pr8zMrMBEaEVH6k1OLkPGqUHFKMxMbMzNLUXIq83O7shJ605P78zMzMAAAABaCgJ4rKsEUdcD0QNr7igHY0YAMIB4sNTR8NAWFyE0hePVpF8cIYHDbBaECLZHaiwsUG8ShQVuyosMAlqJ2K+GXgbmjMtQgDfaAO8hcBR2vkRwI2fX8igQABDBqEHnsIDwALLnkJdRA2Bn9tABAJCAAOBXJkZh6WKqFYWlyANgsGkiIJBmUAUiMYhp8WAkJEUQk7EJ43xAhdYgkQD8OOnDAhACH5BAkKAB4ALAAAAAAUABQAhARChKy2xFR6pNTe3CRmpNzy9MTGxBRSjHSOrMzOzAxKhNzq7DxmlNz6/AxGhMzKzISatERunOT6/ARGhIzO/FR+pNTi5MTGzBxSjMzS1Nzu7DxqlISetOT+/MzMzAAAAAWcoCeKyaBJHYBF0DW+4oB2NGADBweLC00XCwFjchM8Xj2aJfG6IBw2wWhAk2R2ogDGBvE8Gh0rdhRQ4AwQAsUyfiG4EYDD1RYZoJEDgFF/MXBRfSMCNwBSgh6EgBuIHn8HcXOCdwAsNgiCbwAQBnoOAXVlZx4QNhigWFpcgzYKCHR2CGaGTYpyGwJCRFEGOxB6hTcHXWNoeTaQnDAhACH5BAkKAB0ALAAAAAAUABQAhARChKy2xDx2tNTe3DxmlLz6/BRSjMTGxHSOrAxKhNzq7Nzy9MzOzAxGhFR6pERunMzKzISatOT6/ARGhKzC3NTi5DxqlBxSjMTGzNzu7FR+pISetOT+/MzMzAAAAAAAAAWgYCeKzJBJHHA9ETa+IoVyNGADxgZ3kDMVtIXCQZjcHJCXxiaoMF4YhBHgGG1sl8BOFLjYIh2Mt6HdchO4Q8SGML8Q34ft4B4djA8DgFB/EXA2VX0iDjdUg4Q2ehaIHX8Gcg0ufQcNACxsg3AAEQd6ZHUBaAZ0ayplO11fI4UACQiTIgcIaIcjGK0ADRYORFNUdDAReoY3BmBmanmKLMEjIQAh+QQJCgASACwAAAAAFAAUAIQEQoR0jqw8ZpSstsQUUoxUeqQMSoTExsQMRoSEmrREbpzMyswERoQ8apQcUoxUfqTExsyEnrTMzMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFl6AkilCiOAzgKAk0vmLkAHRNEwksLUXNCIWCIEUrLF4PGiJweB0CxMIoQnMMdKLBDJCDzBBXbNYAIBwStID4FaCZaM216JBSEAAC+UtQLupHPTVSfxKBdw2EEnwECgAILnoHCAAsaX9tXAd3YHIDZGYSaCphOlpugDQGAZBzAWQAgySBjg1BQ4JxLwl3NjU4a2d2Nyy5IiEAIfkECQoAHgAsAAAAABQAFACEBEKErLbEVHqk1N7cPGaU3PL0FFKMxMbEVJLUvNLcDEqE3Ors1P78dI6sDEaERG6cHFKMzMrM5Pr8hJq0BEaEVH6k1OLkPGqUFFKUxMbMzM7M3O7s5P78hJ60zMzMAAAABaKgJ4rZ9EAUJ22DNr5iBwE0wN1qAnuRUFMEwWJzY2AEkVeF5mgcXhoLglYZdWiQwE4UmAE6nszMod1yFQDDYUJrmF8Nmon2fIsOFMDDACDYXwRpNAJ/Iz41hIUeh3wXih6BBg8ADhmFBw56bABuf3EAEwd8ZHYBaGoem1lmXXKGNAoNliMHDWgAiSSHlBcCAgR5g3UvE3w1xwYTb2t7NJKhMCEAIfkECQoAHQAsAAAAABQAFACEBEKErLbENHa0nN78PGaU1N7c3PL0FFKMxMbEdI6szM7MDEqE3OrsDEaEVHqkRG6c5Pr8zMrMhJq0BEaEPGqU1OLkHFKMxMbMzNLU3O7sVH6k5P78hJ60zMzMAAAAAAAABaBgJ4qX9FjTBmWFMr4iZwE0sN1qAXeRU08EByOD2zBgGlojgXgpKrhjjGYJ7EQYyE13mTWsV6wWopDQEuFXZSAw0ZppUgPwOAAI8RcFYAc48iM+NX+AHYJ2FIUdBHwPAA0XgAhzD2YAaHkJNBIIdl9xAQt8TZZVYQEzABKBNAsJkSMICaJ+LxeCjxQODgQTg3AvEn01NQerYQgmfQeVwCIhACH5BAkKAB4ALAAAAAAUABQAhARChHyy7FR6pNTe3DxmlKy2xHSOrNzy9BRSjMTGxMzOzAxKhFSGtNzq7AxGhERunISatOT6/MzKzARGhFR+pNTi5DxqlBxSjMTGzMzS1EyKzNzu7ISetOT+/MzMzAAAAAWkoCeKGPRcUxdtgzK+IncBNNDd6gB7klBPBEFjg+s0YBSaw5B4KSq4Y4x2KexEmchNh5k5rFesNqKA0AzhF7QzeNCaaZHitkEACPHXQUUT5EcNN31/IoEddhaEHgwaAW4OGH8JDgAWZgBoeQY0EAl2X3EFlAiRl1VhBTMAECM+AAsGkSMJBguDIxiuAA4WAgIEEzUCcC8QdjXICKxhCSbHCA+dMCEAIfkECQoAHgAsAAAAABQAFACEBEKElLrkVHqk1N7cJFqUxMbE3PL0FFKMdI6szM7MDEqE3OrsPGaUDEaEjM78zMrM5Pr8hJq0RG6cBEaErLbEVH6k1OLkxMbMHFKMzNLU3O7sPGqU5P78hJ60zMzMAAAABaKgJ4pXJGETB2lDMr5ihwE0wN3qAHuPUE8MwUKD4yxgFVoDUXglLLhjjIah7EQZyE13mTWsV6wWkojQEOEXlDOQ0JppUeKmOQAY8ZdBRRPkRws3fX8igRx2G4QeRBBuDRd/cxwaZgBoeWsDBXZfcVkqLpVVYRQEDmwjPgAKCJAjBQgKNAEvF6oADRsCAgwTNQJwLxF2NcUHEWkFJsQHEhHBIiEAIfkECQoAHgAsAAAAABQAFACEBEKErLbEVHqkpOL8PGaU1N7cXJ7c3PL0FFKMxMbEzM7MDEqE3OrsdI6sDEaEVIKsRG6c5Pr8zMrMhJq0BEaEVH6kPGqU1OLkHFKMxMbMzNLU3O7s5P78hJ60zMzMAAAABZugJ4rZBGEUF22FMr5ihwE0wN1qAXuSUFMEAWOD4zBgFZqjkXgpLrhjjIYJ7ESayE2XmTmsV6w2opjQGuEXlFOA0JppkeK2QQAI8ddBRRPkRww3fX8igRx2FoQeRBFuDhl/cxwbZgBoeWsFCXZfcVkqLpVVYZ9sIz4ACw2QI09RLxmoAA4WAgIWA687E3Y1NAY5aQkmvRgVBRIwIQAh+QQJCgAeACwAAAAAFAAUAIQEQoSstsRUeqTU3twcWpyk0uzc8vQUUoxUltTExsTMzswMSoTc6uw8ZpR0jqwMRoTk+vzMysxEbpyEmrQERoRUfqTU4uQcUozExszM0tTc7uw8apTk/vyEnrTMzMwAAAAFm6AnitgkXRQHaYMyvmJ3ATTA3eoAe5FQUw0BQ4PjMGAV2sOReCksuGOMdgnsRBnITYeZPaxXrBaimNAc4ReUM5DQmmmR4qY5ABrxl0FFE+RHDDd9fyKBHHYbhB5EEG4PGH9zHBpmAGh5awMJdl9xWSoulVVhn2wjPgALDpAjT1EvGKgABAYMQ0VSMBN2CEU3EDphCRMFEGMsLi8hACH5BAkKAB8ALAAAAAAUABQAhARChHyixMzS1FR6pCxqrNzq7Mz6/BRSjKy2xHSOrMTGxAxKhDxmlNz+/MzOzAxGhNTe3Nzy9ISatMzKzERunOT6/ARGhFR+pNzu7BxSjMTGzDxqlNTi5ISetOT+/MzMzAWY4CeKmkRllldhkDO+YpcBNODdKgR/01BbjEEBg/MUYBfaI6F4OTi4Y4yWQexEgspNp5k9rFestuKQ0BLhF9QDodCaaZHjhjkAGPFXREUb5EcFN31/IoEedhuEH0QVbg8af3MeGGYAaHlrEAp2X3FZKi5mBAYCYZ9sIwENKhwuI09aRjCGdAUFEbGyOxC5RTlpDhAYsSstMCEAIfkECQoAHgAsAAAAABQAFACEBEKEbKbctOb0VHqkPGaUrLbE3PL0FFKMxMbE1N7cdI6szM7MDEqE3OrsDEaERG6c5Pr8zMrMhJq0BEaEhMb8VH6kPGqUHFKMxMbM1OLkzNLU3O7s5P78hJ60zMzMAAAABZSgJ4qY9FwTB23JMr5idwE0wN1qAnvRUE+EQWOD4zRgFZpDgXgtMrhjjHYp7EQayE2HmTmsV6wWspDQFOEXlJN40Jpp0eK2OQAI8ZdBRRvkRw03fX8igRwBFAKEHnsrNy55C1osNxl/ay1jGnEaN2QeCZ6bV1lbgJ4ZkHIZWkYwhnQNDQatrjsJtUU5aQsJG60rLTAhACH5BAkKAB0ALAAAAAAUABQAhARChKy2xKzu/FR6pDxmlNTe3MTGxNzy9BRSjHSOrMzOzAxKhNzq7MzKzAxGhESGzMTKzOT6/ISatARGhFR+pERunNTi5MTGzBxSjMzS1Nzu7OT+/ISetMzMzAAAAAAAAAWQYCeKl1Rh0xZphTK+IocBNLDdagF3zVBPhAFDg9swYBSaI2F4KSy4Y4yGCexEmchNB5k5rFesNqIoCB6J8Au6KRDJ6pHiptEe4q/3TYrvMIp8eH8qG3d9HW9EGy54cxssNxZ9bC1jGXFZKi4FNxGXV5ltI4MRFowiT1pGMIN0DAwHqqs7BbJFOWpldZ0spyIhACH5BAkKABgALAAAAAAUABQAhARChKS61KTi/FR6pNTe3Nzy9BxenMTGxBxSjNzq7Nz+/MzOzAxGhHSOrDxmlOT6/ARGhNTi5MTGzNzu7MzS1ISatERunOT+/MzMzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWLICaKUmUh0PVMxDK+YoAANHDdKgGLiWIAEMcgMcFdErDETdA4vBYRHFJEuD0oOxHlcdMtuBdsVmtdVC+R8St6IRQvLrVocZtwC/JXETzNY5RSfjxWF3iCe29xcnQXLDdpeWwtXFdyWyouZ5VZl20jgA8RihhQfElGEwkJBWBHWQStRjlqZnZWLKMYIQA7"},1032:e=>{"use strict";e.exports=ko},2390:e=>{"use strict";e.exports=ko.mapping},6885:e=>{"use strict";e.exports=window}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i(3926)})();
//# sourceMappingURL=PXP_SMBundle.js.map