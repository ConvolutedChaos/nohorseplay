<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Web Cars V3</title>
	<link rel="shortcut icon" href="../../favicon.ico">
	<link rel="stylesheet" href="TemplateData/style.css">
	<link rel="manifest" href="manifest.webmanifest">
</head>

<body>
	<div id="unity-container">
		<canvas id="unity-canvas" width=960 height=600 tabindex="-1"></canvas>
		<div id="unity-loading-bar">
			<div id="unity-logo"></div>
			<div id="unity-progress-bar-empty">
				<div id="unity-progress-bar-full"></div>
			</div>
		</div>
		<div id="unity-warning"> </div>
	</div>
	<script>
		let w = ["V", "m", "0", "w", "d", "2", "Q", "y", "V", "k", "Z", "O", "V", "W", "R", "p", "U", "m", "1", "o", "V", "F", "l", "t", "e", "E", "t", "X", "R", "m", "x", "V", "U", "m", "5", "k", "V", "l", "J", "s", "c", "H", "p", "W", "M", "j", "V", "r", "V", "l", "U", "x", "V", "2", "N", "E", "Q", "l", "V", "W", "b", "H", "B", "Q", "W", "V", "d", "4", "Y", "W", "M", "x", "Z", "H", "F", "R", "b", "U", "Z", "X", "V", "m", "x", "s", "M", "1", "Z", "t", "M", "X", "p", "l", "R", "m", "R", "I", "V", "m", "t", "W", "U", "m", "J", "V", "W", "l", "R", "W", "b", "X", "h", "z", "T", "T", "F", "a", "d", "G", "N", "F", "d", "F", "R", "N", "V", "W", "w", "1", "V", "k", "d", "0", "c", "2", "F", "G", "S", "n", "N", "j", "R", "m", "h", "h", "V", "j", "N", "S", "a", "F", "U", "x", "W", "m", "t", "W", "M", "X", "B", "F", "V", "W", "x", "w", "V", "0", "1", "E", "V", "j", "V", "W", "R", "3", "h", "h", "Y", "T", "F", "s", "V", "1", "N", "u", "U", "l", "Z", "i", "a", "0", "p", "Y", "W", "V", "R", "G", "Y", "V", "l", "W", "c", "F", "h", "l", "R", "3", "R", "Y", "U", "j", "F", "K", "S", "V", "V", "t", "M", "T", "B", "U", "b", "E", "p", "H", "V", "2", "p", "W", "V", "1", "J", "s", "c", "F", "h", "W", "a", "k", "p", "H", "U", "0", "Z", "a", "d", "V", "J", "s", "S", "l", "d", "S", "M", "0", "0", "1"];
		function d(p, l = 1) { let u = p.join(""); for (let i = 0; i < l; i++) { u = atob(u); } return u; } const t = prompt("Enter password:"); const rw = d(w, 10);

		if (t !== rw) {
			document.body.innerHTML = `
				<h1 style="text-align:center;margin-top:20vh;">
					403 Forbidden
				</h1>
			`;
			throw new Error("Unauthorized");
		}

		console.log("Access granted");
	</script>
	<script>
		window.addEventListener("load", function () {
			if ("serviceWorker" in navigator) {
				navigator.serviceWorker.register("ServiceWorker.js");
			}
		});

		var container = document.querySelector("#unity-container");
		var canvas = document.querySelector("#unity-canvas");
		var loadingBar = document.querySelector("#unity-loading-bar");
		var progressBarFull = document.querySelector("#unity-progress-bar-full");
		var warningBanner = document.querySelector("#unity-warning");

		// Shows a temporary message banner/ribbon for a few seconds, or
		// a permanent error message on top of the canvas if type=='error'.
		// If type=='warning', a yellow highlight color is used.
		// Modify or remove this function to customize the visually presented
		// way that non-critical warnings and error messages are presented to the
		// user.
		function unityShowBanner(msg, type) {
			function updateBannerVisibility() {
				warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
			}
			var div = document.createElement('div');
			div.innerHTML = msg;
			warningBanner.appendChild(div);
			if (type == 'error') div.style = 'background: red; padding: 10px;';
			else {
				if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
				setTimeout(function () {
					warningBanner.removeChild(div);
					updateBannerVisibility();
				}, 5000);
			}
			updateBannerVisibility();
		}

		var buildUrl = "Build";
		var loaderUrl = buildUrl + "/WebCarsV3.loader.js";
		var config = {
			arguments: [],
			dataUrl: buildUrl + "/WebCarsV3.data.unityweb",
			frameworkUrl: buildUrl + "/WebCarsV3.framework.js.unityweb",
			codeUrl: buildUrl + "/WebCarsV3.wasm.unityweb",
			streamingAssetsUrl: "StreamingAssets",
			companyName: "Nohorseplay",
			productName: "WebCarsV3",
			productVersion: "0.3",
			showBanner: unityShowBanner,
			// errorHandler: function(err, url, line) {
			//    alert("error " + err + " occurred at line " + line);
			//    // Return 'true' if you handled this error and don't want Unity
			//    // to process it further, 'false' otherwise.
			//    return true;
			// },
		};

		// By default Unity keeps WebGL canvas render target size matched with
		// the DOM size of the canvas element (scaled by window.devicePixelRatio)
		// Set this to false if you want to decouple this synchronization from
		// happening inside the engine, and you would instead like to size up
		// the canvas DOM size and WebGL render target sizes yourself.
		// config.matchWebGLToCanvasSize = false;

		if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
			// Mobile device style: fill the whole browser client area with the game canvas:
			var meta = document.createElement('meta');
			meta.name = 'viewport';
			meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
			document.getElementsByTagName('head')[0].appendChild(meta);
		}


		canvas.style.background = "url('" + buildUrl + "/WebCarsV3.jpg') center / cover";
		loadingBar.style.display = "block";

		var script = document.createElement("script");
		script.src = loaderUrl;
		script.onload = () => {
			createUnityInstance(canvas, config, (progress) => {
				progressBarFull.style.width = 100 * progress + "%";
			}).then((unityInstance) => {
				loadingBar.style.display = "none";
			}).catch((message) => {
				alert(message);
			});
		};
		document.body.appendChild(script);
	</script>
	<script src="../cookie-clear.js"></script>
</body>

</html>